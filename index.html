<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>404ÁöÑÈÇÆÁÆ± - ÊûóÊò≠ÁöÑÁ¥ßÊÄ•Êù•‰ø°</title>
		<link rel="icon" href="https://i.imgs.ovh/2026/01/02/Cintz9.th.png " type="image/png">
    <style>
        /* ==================== ÊÅêÊÄñGIFÈ°µÈù¢Ê†∑Âºè ==================== */
        .terror-page {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            z-index: 9999;
            display: none;
            cursor: none;
        }
        
        .terror-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(20, 0, 0, 0.95);
            border: 3px solid #8b0000;
            border-radius: 10px;
            padding: 30px;
            width: 80%;
            max-width: 600px;
            z-index: 20;
            box-shadow: 0 0 50px rgba(255, 0, 0, 0.7);
            animation: popupAppear 1.5s ease-out, glow 3s infinite alternate;
            text-align: center;
        }
        
        .popup-title {
            font-size: 2.8rem;
            margin-bottom: 20px;
            color: #ff0000;
            text-shadow: 0 0 15px #ff0000;
            letter-spacing: 4px;
        }
        
        .popup-message {
            font-size: 1.3rem;
            line-height: 1.6;
            margin-bottom: 25px;
            color: #ff6666;
        }
        
        .popup-note {
            font-size: 1rem;
            color: #cc3333;
            margin-top: 20px;
            font-style: italic;
        }
        
        .close-popup {
            background-color: #400000;
            color: #ff6666;
            border: 2px solid #8b0000;
            padding: 12px 30px;
            font-size: 1.2rem;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
            transition: all 0.3s;
            font-weight: bold;
            letter-spacing: 2px;
        }
        
        .close-popup:hover {
            background-color: #8b0000;
            color: #fff;
            box-shadow: 0 0 20px #ff0000;
        }
        
        /* ÂÖ®Â±èGIFÂÆπÂô® */
        .gif-fullscreen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1;
            background: #000;
        }
        
        .terror-gif {
            width: 95%;
            height: 95%;
            object-fit: contain;
            /* Á∫¢Ëâ≤Ê≥õÂÖâËæπÊ°Ü */
            border: 3px solid transparent;
            border-radius: 10px;
            box-shadow: 
                0 0 20px #ff0000,
                0 0 40px #ff0000,
                0 0 60px #ff0000,
                0 0 80px #ff0000,
                inset 0 0 20px rgba(255, 0, 0, 0.3),
                inset 0 0 40px rgba(255, 0, 0, 0.2);
            animation: glow-pulse 3s infinite alternate;
            display: none;
        }
        
        /* ÊÅêÊÄñÁâπÊïàÂÖÉÁ¥† */
        .blood-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            opacity: 0.15;
            z-index: 2;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(255, 0, 0, 0.2) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(139, 0, 0, 0.2) 0%, transparent 50%);
            mix-blend-mode: multiply;
            display: none;
        }
        
        /* ÈöèÊú∫Ë°ÄÊª¥ */
        .blood-drip {
            position: fixed;
            top: -100px;
            width: 3px;
            height: 150px;
            background: linear-gradient(to bottom, transparent, #ff0000, #8b0000);
            border-radius: 0 0 3px 3px;
            z-index: 3;
            pointer-events: none;
            animation: drip 8s infinite linear;
            filter: blur(0.5px);
            display: none;
        }
        
        /* Èó™ÁÉÅËæπÊ°Ü */
        .border-flash {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 4;
            box-shadow: inset 0 0 100px rgba(255, 0, 0, 0);
            animation: borderFlash 12s infinite;
            display: none;
        }
        
        /* ==================== Ë≠¶ÊÉÖÈÄöÊä•È°µÈù¢Ê†∑Âºè ==================== */
        .police-page {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #0a2463;
            color: #ffffff;
            line-height: 1.6;
            overflow-y: auto;
            display: none;
            z-index: 9998;
            font-family: "SimSun", "ÂÆã‰Ωì", "NSimSun", serif;
            animation: fadeIn 1s ease;
        }
        
        .police-container {
            max-width: 1000px;
            margin: 0 auto;
            background-color: rgba(10, 36, 99, 0.9);
            border-radius: 5px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
            margin-top: 20px;
            margin-bottom: 20px;
        }
        
        .header-decoration {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background-color: #8b0000;
        }
        
        .emblem {
            text-align: center;
            margin-bottom: 25px;
        }
        
        .emblem i {
            font-size: 3.5rem;
            color: #ffde59;
        }
        
        .police-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.2);
        }
        
        .police-department {
            font-size: 2.2rem;
            font-weight: bold;
            margin-bottom: 10px;
            letter-spacing: 8px;
        }
        
        .notification-title {
            font-size: 2.8rem;
            font-weight: bold;
            margin: 15px 0;
            color: #ffffff;
        }
        
        .notification-number {
            font-size: 1.2rem;
            color: #e0e0ff;
            margin-bottom: 5px;
        }
        
        .police-content {
            font-size: 1.1rem;
            text-align: center;
        }
        
        .police-content p {
            margin-bottom: 30px;
            text-align: center;
        }
        
        .emphasis {
            font-weight: bold;
            color: #ffde59;
        }
        
        .conclusion {
            background-color: rgba(0, 0, 0, 0.2);
            padding: 20px;
            border-radius: 5px;
            margin: 40px 0;
            border-left: 5px solid #8b0000;
            text-align: center;
        }
        
        .crime-list, .progress-list {
            margin: 0 auto 30px auto;
            text-align: left;
            display: inline-block;
            max-width: 900px;
        }
        
        .crime-list li, .progress-list li {
            margin-bottom: 25px;
            text-align: left;
            line-height: 1.8;
        }
        
        .crime-list li strong, .progress-list li strong {
            color: #ffde59;
        }
        
        .contact-info {
            text-align: center;
            margin: 40px 0;
            padding: 20px;
            background-color: rgba(0, 0, 0, 0.2);
            border-radius: 5px;
        }
        
        .contact-info .phone {
            font-size: 1.4rem;
            font-weight: bold;
            color: #ffde59;
            margin-top: 10px;
        }
        
        .police-footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .date {
            font-size: 1.2rem;
            margin-bottom: 20px;
        }
        
        .stamp {
            display: inline-block;
            margin-top: 20px;
        }
        
        .stamp-content {
            border: 3px solid #8b0000;
            padding: 15px 30px;
            border-radius: 5px;
            font-size: 1.3rem;
            font-weight: bold;
            letter-spacing: 5px;
            background-color: rgba(10, 36, 99, 0.9);
        }
        
        .back-to-chat-btn {
            background-color: #400000;
            color: #ff6666;
            border: 2px solid #8b0000;
            padding: 12px 30px;
            font-size: 1.2rem;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s;
            font-weight: bold;
            letter-spacing: 2px;
            display: inline-block;
        }
        
        .back-to-chat-btn:hover {
            background-color: #8b0000;
            color: #fff;
            box-shadow: 0 0 20px #ff0000;
        }
        
        /* ==================== ÂéüÊúâCSSÊ†∑Âºè ==================== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Courier New', Courier, monospace;
        }
        
        body {
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
            padding: 20px;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><rect width="100" height="100" fill="%23f0f0f0"/><path d="M0,0 L100,100 M100,0 L0,100" stroke="%23e0e0e0" stroke-width="0.5"/></svg>');
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        /* ÈÇÆ‰ª∂ÂºπÁ™óÊ†∑Âºè */
        .email-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            z-index: 1000;
            display: flex;
            justify-content: center;
            align-items: center;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .email-modal-content {
            width: 90%;
            max-width: 900px;
            height: 90vh;
            background-color: #fff;
            border-radius: 5px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        .email-modal-header {
            background: linear-gradient(to bottom, #4a6fa5, #3a5a8a);
            color: white;
            padding: 20px;
            border-bottom: 1px solid #2a4a7a;
        }
        
        .email-modal-header h2 {
            font-size: 24px;
            margin-bottom: 5px;
        }
        
        .email-modal-body {
            flex: 1;
            overflow-y: auto;
            padding: 30px;
            font-size: 16px;
            line-height: 1.8;
            background-color: #fff;
        }
        
        .email-modal-body strong {
            color: #c0392b;
            font-weight: bold;
        }
        
        .email-modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background-color: #e74c3c;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 20px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .email-modal-close:hover {
            background-color: #c0392b;
        }
        
        /* ‰∏æÊä•‰ø°ÂºπÁ™óÊ†∑Âºè */
        .report-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            z-index: 1001;
            display: none;
            justify-content: center;
            align-items: center;
        }
        
        .report-modal-content {
            width: 90%;
            max-width: 900px;
            height: 90vh;
            background-color: #fff;
            border-radius: 5px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        .report-modal-header {
            background: linear-gradient(to bottom, #8b0000, #660000);
            color: white;
            padding: 20px;
            border-bottom: 1px solid #500000;
        }
        
        .report-modal-header h2 {
            font-size: 22px;
            margin-bottom: 5px;
        }
        
        .report-modal-body {
            flex: 1;
            overflow-y: auto;
            padding: 25px;
            font-size: 15px;
            line-height: 1.7;
        }
        
        .report-input {
            background-color: #fff8f8;
            border: 1px dashed #cc0000;
            padding: 8px 12px;
            margin: 0 5px;
            min-width: 150px;
            font-family: 'Courier New', Courier, monospace;
            color: #8b0000;
            font-weight: bold;
        }
        
        .report-submit {
            background-color: #8b0000;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 3px;
            cursor: pointer;
            font-weight: bold;
            margin-top: 20px;
            transition: background-color 0.2s;
        }
        
        .report-submit:hover {
            background-color: #660000;
        }
        
        /* ÂΩïÈü≥Êí≠ÊîæÂºπÁ™óÊ†∑Âºè */
        .recording-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #0a0f0a;
            color: #ff0000;
            z-index: 1002;
            display: none;
            justify-content: center;
            align-items: center;
            font-family: 'Courier New', 'Á≠âÂÆΩ', monospace;
            padding: 40px;
            overflow: hidden;
        }

        .recording-modal::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                linear-gradient(rgba(10, 255, 10, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(10, 255, 10, 0.03) 1px, transparent 1px);
            background-size: 50px 50px;
            pointer-events: none;
        }

        .recording-content-wrapper {
            position: relative;
            width: 100%;
            max-width: 800px;
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .recording-header {
            text-align: center;
            padding: 20px;
            border-bottom: 1px solid rgba(255, 10, 10, 0.3);
            margin-bottom: 30px;
        }

        .recording-title {
            color: #ff2a2a;
            font-size: 24px;
            text-transform: uppercase;
            letter-spacing: 3px;
            margin-bottom: 10px;
        }

        .recording-subtitle {
            color: #ff8080;
            font-size: 14px;
            opacity: 0.8;
        }

        .recording-content {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            background: rgba(5, 15, 5, 0.85);
            border: 1px solid rgba(255, 10, 10, 0.3);
            box-shadow: 
                0 0 30px rgba(255, 10, 10, 0.1),
                inset 0 0 50px rgba(0, 0, 0, 0.5);
            position: relative;
        }

        .recording-content::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 100%;
            background: linear-gradient(
                to bottom,
                transparent 95%,
                rgba(10, 255, 10, 0.05) 100%
            );
            pointer-events: none;
        }

        .recording-transcript {
            font-size: 18px;
            line-height: 1.8;
            position: relative;
        }

        .recording-line {
            margin-bottom: 20px;
            opacity: 0;
            animation: typeLine 0.5s ease forwards;
        }

        .recording-character {
            opacity: 0;
            animation: typeChar 0.05s ease forwards;
        }

        .speaker {
            display: block;
            margin-top: 25px;
            position: relative;
            padding-left: 20px;
        }

        .speaker::before {
            content: '‚ñ∂';
            position: absolute;
            left: 0;
            color: #ff2a2a;
            font-size: 14px;
        }

        .speaker-linzhao {
            color: #ff2a2a;
            font-weight: bold;
        }

        .speaker-linzhao::before {
            content: '‚óè';
            color: #ff2a2a;
            animation: pulse 2s infinite;
        }

        .speaker-male-clear {
            color: #ffa0a0;
        }

        .speaker-male-serious {
            color: #ff8080;
        }

        .speaker-female-doubt {
            color: #ff8080;
        }

        .sound-effect {
            color: #ff4040;
            font-style: italic;
            font-size: 16px;
            opacity: 0.8;
            display: inline-block;
            margin: 0 3px;
        }

        .highlight {
            color: #ff0000;
            font-weight: bold;
            text-shadow: 0 0 8px rgba(255, 0, 0, 0.7);
            position: relative;
        }

        .highlight::after {
            content: '';
            position: absolute;
            left: 0;
            right: 0;
            bottom: -2px;
            height: 1px;
            background: #ff0000;
            box-shadow: 0 0 5px #ff0000;
        }

        .narration {
            color: #ff8080;
            font-style: italic;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px dashed rgba(255, 10, 10, 0.3);
            position: relative;
        }

        .narration::before {
            content: 'üìº';
            position: absolute;
            left: -30px;
            opacity: 0.5;
        }

        .cursor {
            display: inline-block;
            width: 3px;
            background: #ff2a2a;
            margin-left: 2px;
            animation: cursorBlink 1s infinite;
            vertical-align: baseline;
            height: 1.2em;
        }

        @keyframes cursorBlink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }

        .recording-footer {
            text-align: center;
            padding: 20px;
            color: #ff8080;
            font-size: 14px;
        }

        .warning-flash {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 0, 0, 0.05);
            pointer-events: none;
            z-index: 1003;
            animation: warningFlash 10s infinite;
            display: none;
        }

        @keyframes warningFlash {
            0%, 90% { opacity: 0; }
            95% { opacity: 0.1; }
            100% { opacity: 0; }
        }

        .sound-indicator {
            position: fixed;
            top: 30px;
            right: 30px;
            display: flex;
            align-items: center;
            gap: 10px;
            z-index: 1004;
        }

        .sound-dot {
            width: 8px;
            height: 8px;
            background: #ff2a2a;
            border-radius: 50%;
            opacity: 0;
            animation: soundPulse 0.5s ease-out;
        }

        @keyframes soundPulse {
            0% {
                transform: scale(0.5);
                opacity: 1;
            }
            100% {
                transform: scale(2);
                opacity: 0;
            }
        }

        .scroll-line {
            position: absolute;
            right: -20px;
            top: 0;
            bottom: 0;
            width: 1px;
            background: linear-gradient(
                to bottom,
                transparent,
                #ff2a2a,
                transparent
            );
            opacity: 0.5;
        }

        .typehead {
            position: absolute;
            right: -40px;
            top: 50px;
            width: 30px;
            height: 40px;
            background: rgba(255, 42, 42, 0.1);
            border: 1px solid rgba(255, 42, 42, 0.3);
            animation: typeheadMove 20s linear infinite;
        }

        @keyframes typeheadMove {
            0% { top: 50px; }
            50% { top: 80%; }
            100% { top: 50px; }
        }

        .crt-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                repeating-linear-gradient(
                    0deg,
                    rgba(255, 0, 0, 0.15) 0px,
                    rgba(255, 0, 0, 0.15) 1px,
                    transparent 1px,
                    transparent 2px
                );
            pointer-events: none;
            z-index: 1005;
            animation: flicker 0.15s infinite;
        }

        @keyframes flicker {
            0% { opacity: 0.97; }
            50% { opacity: 0.99; }
            100% { opacity: 0.97; }
        }
        
        /* ‰∏ªÂÆπÂô®Ê†∑Âºè */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: #fff;
            border: 1px solid #ccc;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border-radius: 3px;
            overflow: hidden;
        }
        
        /* Â§¥ÈÉ®Ê†∑Âºè */
        .header {
            background: linear-gradient(to bottom, #4a6fa5, #3a5a8a);
            color: white;
            padding: 20px;
            border-bottom: 1px solid #2a4a7a;
            position: relative;
        }
        
        .header h1 {
            font-size: 28px;
            margin-bottom: 5px;
            letter-spacing: 1px;
        }
        
        .header p {
            font-size: 14px;
            opacity: 0.9;
        }
        
        .urgent-badge {
            position: absolute;
            top: 20px;
            right: 20px;
            background-color: #e74c3c;
            color: white;
            padding: 5px 15px;
            border-radius: 3px;
            font-weight: bold;
            font-size: 14px;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 0.8; }
            50% { opacity: 1; }
            100% { opacity: 0.8; }
        }
        
        /* ‰∏ªÂÜÖÂÆπÂå∫ */
        .main-content {
            display: flex;
            min-height: 700px;
        }
        
        /* ‰æßËæπÊ†è - ÈÇÆ‰ª∂ÂàóË°® */
        .sidebar {
            width: 300px;
            border-right: 1px solid #ddd;
            background-color: #f9f9f9;
            overflow-y: auto;
        }
        
        .mail-list {
            list-style: none;
        }
        
        .mail-item {
            padding: 15px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .mail-item:hover {
            background-color: #eef5ff;
        }
        
        .mail-item.active {
            background-color: #e0ebff;
            border-left: 4px solid #4a6fa5;
        }
        
        .mail-item.unread .sender {
            font-weight: bold;
        }
        
        .mail-item .sender {
            font-weight: bold;
            font-size: 16px;
            margin-bottom: 5px;
            color: #2a4a7a;
        }
        
        .mail-item .subject {
            font-size: 14px;
            margin-bottom: 5px;
            font-weight: bold;
            color: #333;
        }
        
        .mail-item .time {
            font-size: 12px;
            color: #777;
        }
        
        /* ÈÇÆ‰ª∂ÂÜÖÂÆπÂå∫ */
        .mail-content {
            flex: 1;
            padding: 20px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        .mail-header {
            border-bottom: 1px solid #ddd;
            padding-bottom: 15px;
            margin-bottom: 15px;
        }
        
        .mail-header h2 {
            font-size: 22px;
            color: #2a4a7a;
            margin-bottom: 10px;
        }
        
        .mail-info {
            display: flex;
            justify-content: space-between;
            font-size: 14px;
            color: #666;
        }
        
        .mail-body {
            height: 250px;
            padding: 15px;
            background-color: #f9f9f9;
            border: 1px solid #eee;
            border-radius: 3px;
            line-height: 1.7;
            white-space: pre-line;
            overflow-y: auto;
            margin-bottom: 20px;
            font-size: 14px;
        }
        
        .mail-body strong {
            color: #c0392b;
        }
        
        /* ËÅäÂ§©Âå∫Âüü */
        .chat-section {
            border-top: 1px solid #ddd;
            padding-top: 20px;
            display: flex;
            flex-direction: column;
            flex: 1;
            min-height: 400px;
        }
        
        .chat-section h3 {
            font-size: 18px;
            margin-bottom: 15px;
            color: #2a4a7a;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .chat-date {
            font-size: 12px;
            color: #777;
            font-weight: normal;
        }
        
        .chat-container {
            display: flex;
            flex-direction: column;
            flex: 1;
            overflow: hidden;
        }
        
        .chat-window {
            flex: 1;
            overflow-y: auto;
            border: 1px solid #ddd;
            border-radius: 3px;
            padding: 15px;
            margin-bottom: 15px;
            background-color: #f9f9f9;
            display: flex;
            flex-direction: column;
        }
        
        .message {
            margin-bottom: 12px;
            padding: 8px 12px;
            border-radius: 5px;
            max-width: 85%;
            animation: fadeIn 0.3s;
        }
        
        .message.sent {
            background-color: #e0ebff;
            margin-left: auto;
            border: 1px solid #3a5a8a;
        }
        
        .message.received {
            background-color: #f0f0f0;
            margin-right: auto;
            border: 1px solid #ddd;
        }
        
        .message.system {
            background-color: #ffffff;
            margin: 0 auto;
            border: 1px solid #000000;
            max-width: 95%;
            text-align: center;
            font-size: 13px;
            color: #010101;
        }
        
        .message-header {
            font-weight: bold;
            margin-bottom: 5px;
            font-size: 14px;
            display: flex;
            justify-content: space-between;
        }
        
        .message-time {
            font-weight: normal;
            font-size: 12px;
            color: #777;
        }
        
        .message-content {
            font-size: 14px;
            line-height: 1.5;
        }
        
        .message-content a {
            color: #2a4a7a;
            text-decoration: underline;
            word-break: break-all;
        }
        
        .message-content img {
            max-width: 200px;
            max-height: 150px;
            border: 1px solid #ccc;
            margin-top: 5px;
            display: block;
            cursor: pointer;
        }
        
        .chat-input-area {
            display: flex;
            gap: 10px;
        }
        
        .chat-input {
            flex: 1;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 3px;
            font-size: 14px;
        }
        
        .chat-input:focus {
            outline: none;
            border-color: #4a6fa5;
        }
        
        .send-button {
            padding: 10px 20px;
            background-color: #4a6fa5;
            color: white;
            border: none;
            border-radius: 3px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.2s;
        }
        
        .send-button:hover {
            background-color: #3a5a8a;
        }
        
        .send-button:disabled {
            background-color: #aaa;
            cursor: not-allowed;
        }
        
        /* ÊâìÂ≠óÊåáÁ§∫Âô®Ê†∑Âºè */
        .typing-indicator {
            display: none;
            align-items: center;
            margin-bottom: 10px;
            margin-right: auto;
            background-color: #f0f0f0;
            padding: 8px 15px;
            border-radius: 5px;
            border: 1px solid #ddd;
            max-width: 150px;
            width: auto;
        }
        
        .typing-text {
            font-size: 13px;
            color: #666;
            margin-right: 8px;
            white-space: nowrap;
        }
        
        .typing-dots {
            display: flex;
        }
        
        .typing-dots span {
            height: 8px;
            width: 8px;
            background-color: #777;
            border-radius: 50%;
            margin: 0 2px;
            animation: typing 1.4s infinite ease-in-out both;
        }
        
        .typing-dots span:nth-child(1) { animation-delay: -0.32s; }
        .typing-dots span:nth-child(2) { animation-delay: -0.16s; }
        
        @keyframes typing {
            0%, 80%, 100% { transform: scale(0.7); opacity: 0.5; }
            40% { transform: scale(1); opacity: 1; }
        }
        
        /* Êó•ÊúüÂàÜÈöîÁ∫ø */
        .date-divider {
            text-align: center;
            margin: 15px 0;
            position: relative;
        }
        
        .date-divider span {
            background-color: #f9f9f9;
            padding: 5px 15px;
            border-radius: 15px;
            font-size: 12px;
            color: #777;
            border: 1px solid #ddd;
        }
        
        .date-divider:before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 1px;
            background-color: #ddd;
            z-index: -1;
        }
        
        /* ÂéÜÂè≤Ê∂àÊÅØÊèêÁ§∫ */
        .history-note {
            text-align: center;
            margin: 10px 0;
            font-size: 12px;
            color: #888;
            font-style: italic;
        }
        
        /* Â∫ïÈÉ®ÂÖçË¥£Â£∞Êòé */
        .footer {
            background-color: #f0f0f0;
            padding: 15px;
            text-align: center;
            font-size: 12px;
            color: #666;
            border-top: 1px solid #ddd;
        }
        
        .footer p {
            margin: 0;
        }
        
        /* ÂìçÂ∫îÂºèË∞ÉÊï¥ */
        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                border-right: none;
                border-bottom: 1px solid #ddd;
                max-height: 300px;
            }
            
            .mail-body {
                height: 200px;
            }
            
            .email-modal-body {
                padding: 20px;
                font-size: 14px;
            }
            
            .terror-popup {
                width: 95%;
                padding: 20px;
            }
            
            .popup-title {
                font-size: 2rem;
            }
            
            .popup-message {
                font-size: 1.1rem;
            }
            
            .police-container {
                padding: 20px 15px;
            }
            
            .police-department {
                font-size: 1.8rem;
                letter-spacing: 5px;
            }
            
            .notification-title {
                font-size: 2.2rem;
            }
            
            .police-content {
                font-size: 1rem;
            }
            
            .crime-list, .progress-list {
                padding-left: 15px;
            }
        }
        
        /* ÊªöÂä®Êù°Ê†∑Âºè */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }

        /* ÂõæÁâáÊîæÂ§ßÂäüËÉΩÊ†∑Âºè */
        .image-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            cursor: zoom-out;
        }

        .zoomable-image {
            max-width: 90vw;
            max-height: 90vh;
            object-fit: contain;
            cursor: grab;
        }

        .zoomable-image:active {
            cursor: grabbing;
        }
		
        /* Á∫¢Ëâ≤Ê≥õÂÖâÁâπÊïàÊ†∑Âºè */
        .image-glow {
            position: relative;
            overflow: visible;
        }

        .image-glow::before {
            content: '';
            position: absolute;
            top: -15px;
            left: -15px;
            right: -15px;
            bottom: -15px;
            background: linear-gradient(45deg, #ff0000, #ff3333, #ff0000, #ff3333);
            background-size: 400% 400%;
            border-radius: 10px;
            z-index: -1;
            filter: blur(20px);
            opacity: 0;
            transition: opacity 0.5s ease, transform 0.5s ease;
            animation: glowPulse 3s ease-in-out infinite;
            transform: scale(1.05);
        }

        .image-glow.active::before {
            opacity: 0.8;
        }

        @keyframes glowPulse {
            0%, 100% {
                background-position: 0% 50%;
                transform: scale(1.05);
                filter: blur(20px);
            }
            50% {
                background-position: 100% 50%;
                transform: scale(1.1);
                filter: blur(25px);
            }
        }

        /* Ê∑ªÂä†Á∫¢Ëâ≤Ê≥õÂÖâËæπÊ°ÜÊïàÊûú */
        .glow-border {
            box-shadow: 
                0 0 20px rgba(255, 0, 0, 0.8),
                0 0 40px rgba(255, 0, 0, 0.6),
                0 0 60px rgba(255, 0, 0, 0.4),
                0 0 80px rgba(255, 0, 0, 0.2),
                inset 0 0 30px rgba(255, 0, 0, 0.3);
            transition: box-shadow 0.5s ease;
        }
        
        /* Êñ∞Â¢ûÁöÑ‰∏æÊä•‰ø°Ê†∑Âºè */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'SimSun', 'ÂÆã‰Ωì', serif;
        }
        
        .blank-input {
            display: inline-block;
            min-width: 150px;
            margin: 0 5px;
            position: relative;
        }
        
        .blank-input input {
            width: 100%;
            padding: 4px 8px;
            border: 1px solid #b30000;
            border-radius: 2px;
            background-color: #fff9f9;
            color: #333;
            font-weight: bold;
            text-align: center;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .blank-input input:focus {
            outline: none;
            box-shadow: 0 0 5px rgba(179, 0, 0, 0.5);
            background-color: #fff;
        }
        
        .blank-input input::placeholder {
            color: #999;
            font-weight: normal;
        }
        
        .blank-hint {
            position: absolute;
            top: -25px;
            left: 0;
            background-color: #b30000;
            color: white;
            padding: 3px 8px;
            border-radius: 3px;
            font-size: 12px;
            white-space: nowrap;
            opacity: 0;
            transition: opacity 0.3s;
            pointer-events: none;
            z-index: 10;
        }
        
        .blank-input:hover .blank-hint {
            opacity: 1;
        }
        
        .blank-hint::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 10px;
            border-width: 5px;
            border-style: solid;
            border-color: #b30000 transparent transparent transparent;
        }
        
        .btn-container {
            text-align: center;
            margin-top: 30px;
        }
        
        .submit-btn {
            background-color: #b30000;
            color: white;
            border: none;
            padding: 12px 40px;
            font-size: 18px;
            border-radius: 3px;
            cursor: pointer;
            transition: background-color 0.3s;
            letter-spacing: 1px;
        }
        
        .submit-btn:hover {
            background-color: #8a0000;
        }
        
        .submit-btn:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }
        
        .result-message {
            text-align: center;
            padding: 15px;
            margin-top: 20px;
            border-radius: 3px;
            display: none;
            font-weight: bold;
        }
        
        .success {
            background-color: #e6ffe6;
            color: #006600;
            border: 1px solid #99cc99;
        }
        
        .error {
            background-color: #ffe6e6;
            color: #b30000;
            border: 1px solid #ff9999;
        }
        
        .letter-signature {
            text-align: right;
            margin-top: 30px;
            font-style: italic;
        }
        
        .instructions {
            background-color: #fff9f9;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            border-left: 4px solid #b30000;
        }
        
        .instructions h3 {
            color: #b30000;
            margin-bottom: 10px;
        }
        
        .instructions ul {
            padding-left: 20px;
        }
        
        .instructions li {
            margin-bottom: 5px;
        }
        
        /* ==================== ÊÅêÊÄñGIFÂä®Áîª ==================== */
        @keyframes glow-pulse {
            0% { 
                box-shadow: 
                    0 0 20px #ff0000,
                    0 0 40px #ff0000,
                    0 0 60px #ff0000,
                    0 0 80px #ff0000,
                    inset 0 0 20px rgba(255, 0, 0, 0.3),
                    inset 0 0 40px rgba(255, 0, 0, 0.2);
                border-color: rgba(255, 0, 0, 0.5);
            }
            100% { 
                box-shadow: 
                    0 0 30px #ff0000,
                    0 0 60px #ff0000,
                    0 0 90px #ff0000,
                    0 0 120px #ff0000,
                    inset 0 0 30px rgba(255, 0, 0, 0.4),
                    inset 0 0 60px rgba(255, 0, 0, 0.3);
                border-color: rgba(255, 0, 0, 0.8);
            }
        }
        
        @keyframes drip {
            0% { top: -150px; opacity: 0; }
            10% { opacity: 0.8; }
            90% { opacity: 0.8; }
            100% { top: 100vh; opacity: 0; }
        }
        
        @keyframes popupAppear {
            0% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
            70% { opacity: 1; transform: translate(-50%, -50%) scale(1.05); }
            100% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        }
        
        @keyframes glow {
            0%, 100% { box-shadow: 0 0 50px rgba(255, 0, 0, 0.7); }
            50% { box-shadow: 0 0 80px rgba(255, 0, 0, 0.9), 0 0 120px rgba(139, 0, 0, 0.5); }
        }
        
        @keyframes borderFlash {
            0%, 70%, 100% { box-shadow: inset 0 0 100px rgba(255, 0, 0, 0); }
            75% { box-shadow: inset 0 0 100px rgba(255, 0, 0, 0.5); }
            80% { box-shadow: inset 0 0 100px rgba(255, 0, 0, 0); }
            85% { box-shadow: inset 0 0 100px rgba(139, 0, 0, 0.7); }
            90% { box-shadow: inset 0 0 100px rgba(255, 0, 0, 0); }
        }
    </style>
</head>

<!-- ÊñáÂ≠óÈõ®ÁâπÊïà‰ª£Á†Å - Â∏¶Ëß¶ÂèëÊú∫Âà∂ -->
<style>
/* ÊñáÂ≠óÈõ®ÂÆπÂô® - Âõ∫ÂÆöÂú®È°µÈù¢È°∂ÈÉ® */
.text-rain-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100vh;
    pointer-events: none;
    z-index: 9999;
    overflow: hidden;
}

/* ÊñáÂ≠óÁ≤íÂ≠êÊ†∑Âºè - ÈªëËâ≤ÂÆã‰ΩìÊó†ËÉåÊôØ */
.text-particle {
    position: absolute;
    color: #000000;
    font-weight: 600;
    font-size: 22px;
    font-family: 'SimSun', 'ÂÆã‰Ωì', serif;
    user-select: none;
    opacity: 0.9;
    text-shadow: none;
    filter: none;
    z-index: 2;
    padding: 0;
    border-radius: 0;
}

/* Á∫¢Ëâ≤ÊãñÂ∞æÁ∫ø */
.tail-line {
    position: absolute;
    top: 0;
    left: 50%;
    width: 1.5px;
    background: linear-gradient(to bottom, transparent, #ff0000 10%, #ff0000);
    transform: translateX(-50%);
    z-index: 1;
    opacity: 0.9;
    transform-origin: center top;
}
</style>

<div class="text-rain-container" id="textRain"></div>

<script>
// ====================== ÊñáÂ≠óÈõ®ÁâπÊïà - ‰øÆÂ§çÂàáÊç¢Ê†áÁ≠æÈ°µÂç°È°øÈóÆÈ¢ò ======================
// Ê†ëÊú®‰∏ªÈ¢òÊ±âÂ≠óÂ∫ì
const textPool = "Êûó„ÄÅÊ£Æ„ÄÅÊ†ë„ÄÅÊùø„ÄÅÊ°•„ÄÅÊü±„ÄÅÊüè„ÄÅÊùâ„ÄÅÊ£â„ÄÅÊ°∂„ÄÅÊ•º„ÄÅÊ¢Ø„ÄÅÊ°É„ÄÅÊ¢®„ÄÅÊûù„ÄÅÊü≥„ÄÅÊ°â„ÄÅÊ†é„ÄÅÊ™©„ÄÅÊ©°„ÄÅÊßê„ÄÅÊ¢ì„ÄÅÊùâ„ÄÅÊû∏„ÄÅÊüë„ÄÅÊûØ„ÄÅÊüØ„ÄÅÊüò„ÄÅÊ†ã„ÄÅÊü©„ÄÅÊ†å„ÄÅÊü¨„ÄÅÊü•„ÄÅÁõ∏„ÄÅÊûµ„ÄÅÊüö„ÄÅÊû≥„ÄÅÊãê„ÄÅÊ†Ö„ÄÅÊüô„ÄÅÊüû„ÄÅÊüÉ„ÄÅÊüè„ÄÅÊüù„ÄÅÊ†Ä„ÄÅÊü¢„ÄÅÊ†é„ÄÅÊû∏„ÄÅÊ†Ö„ÄÅÊü≥„ÄÅÊüí„ÄÅÊüì„ÄÅÊü†„ÄÅÊüÅ„ÄÅÊü±„ÄÅÊüø„ÄÅÊ†è„ÄÅÊ†ë„ÄÅÊüΩ„ÄÅÊüî„ÄÅÊû∑„ÄÅÊû∂„ÄÅÊ¢Ü„ÄÅÊ°Ç„ÄÅÊ°î„ÄÅÊ†≥„ÄÅÊ†≤„ÄÅÊ†Ω„ÄÅÊ°†„ÄÅÈÉ¥„ÄÅÊ°ì„ÄÅÊ†ñ„ÄÅÊ†ó„ÄÅÊ°°„ÄÅÊåù„ÄÅÊ°é„ÄÅÊ°Ü„ÄÅÊ°Ñ„ÄÅÊ°£„ÄÅÊü¥„ÄÅÊ°å„ÄÅÊ°¢„ÄÅÊ°ê„ÄÅÊ°§„ÄÅÊ°É„ÄÅÊ†ì„ÄÅÊ°ß„ÄÅÊ†™„ÄÅÊ¢É„ÄÅÊ†ù„ÄÅÊ°•„ÄÅËá¨„ÄÅÊ°¶„ÄÅÊ°ï„ÄÅÊ°Å„ÄÅÊ°Ä„ÄÅÊ†º„ÄÅÊ°Ö„ÄÅÊó¨„ÄÅÊù°„ÄÅÊ°â„ÄÅÊ°à„ÄÅÊ†æ„ÄÅÊ°®„ÄÅÊ†°„ÄÅÊ°©„ÄÅÊ†∏„ÄÅÊ†∑„ÄÅÊ°ä„ÄÅÊ†©„ÄÅÊ°ë„ÄÅÊ†π„ÄÅÊû®„ÄÅÂºÉ„ÄÅÊ£í„ÄÅÊ£±„ÄÅÊ•Æ„ÄÅÊ£ã„ÄÅÊ§∞„ÄÅÂè∂„ÄÅÊ§ç„ÄÅÊ£º„ÄÅÁÑö„ÄÅÊ£Æ„ÄÅÊ§ü„ÄÅÊ†ã„ÄÅÊ°†„ÄÅÊ§Ö„ÄÅÊ§Ö„ÄÅÊ§†„ÄÅÊ†à„ÄÅÊ£†„ÄÅÊ§í„ÄÅÊ£π„ÄÅÊ§§„ÄÅÊ£µ„ÄÅÊ£ç„ÄÅÊû£„ÄÅÊ£ò„ÄÅÊ£∞„ÄÅÊ§é„ÄÅÈõÜ„ÄÅÊ£â„ÄÅÊ£ö„ÄÅÊ§ã„ÄÅÊ£ï„ÄÅÊ£∫„ÄÅÊ§Å„ÄÅÊ¶î„ÄÅÊûÅ„ÄÅÊ££„ÄÅÊ§≠„ÄÅÊ§ê„ÄÅÊ•ó„ÄÅÊ•î„ÄÅÊ§ø„ÄÅÊ§π„ÄÅÊ•†„ÄÅÊ•Ç„ÄÅÊ•ù„ÄÅÁ¶Å„ÄÅÊ•ö„ÄÅÊ•∑„ÄÅ‰∏ö„ÄÅÊ¶Ñ„ÄÅÊù®„ÄÅÊ•´„ÄÅÊ¶Ä„ÄÅÊ•û„ÄÅÊ¶Ü„ÄÅÊ•π„ÄÅÊ¶ò„ÄÅÊ•∏„ÄÅÊ§¥„ÄÅÊßê„ÄÅÊßå„ÄÅÊû´„ÄÅÊ¶â„ÄÅÊ•¶„ÄÅÊ¶á„ÄÅÊ¶à„ÄÅÂºÉ„ÄÅÊßé„ÄÅÊ•º„ÄÅÊ¶Ç„ÄÅÊ•£„ÄÅÊ§Ω„ÄÅÊ©ê„ÄÅÊ¶õ„ÄÅÊûÑ„ÄÅÊ¶ß„ÄÅËïñ„ÄÅËøû„ÄÅÊù†„ÄÅÊù©„ÄÅÊ°¶„ÄÅÊ®°„ÄÅÊ¶ª„ÄÅÊßõ„ÄÅÊ°§„ÄÅÊû™„ÄÅÊ¶´„ÄÅÊ¶≠„ÄÅÊßî„ÄÅÊ¶¥„ÄÅÊ¶ï„ÄÅÊ¶®„ÄÅÊßü„ÄÅÊ¶ú„ÄÅÊßÅ„ÄÅÊ§Å„ÄÅÊ¶±„ÄÅÊßä„ÄÅËç£„ÄÅÊß†„ÄÅÊ¶∑„ÄÅÊ¶ç„ÄÅ".split("„ÄÅ");

// ÊñáÂ≠óÈõ®Áä∂ÊÄÅÊéßÂà∂
let isTextRainActive = false;
let textRainParticles = [];
let textRainAnimationId = null;
let textRainLastTime = 0;
const textRainElement = document.getElementById('textRain');

// ÊñáÂ≠óÈõ®ÈÖçÁΩÆÂèÇÊï∞
const textRainConfig = {
    speed: 2.5,              // ‰∏ãËêΩÈÄüÂ∫¶ (ÂÉèÁ¥†/Â∏ß)
    density: 0.6,           // ÁîüÊàêÂØÜÂ∫¶ (0-1)
    sizeMin: 20,            // ÊúÄÂ∞èÂ≠ó‰ΩìÂ§ßÂ∞è
    sizeMax: 26,            // ÊúÄÂ§ßÂ≠ó‰ΩìÂ§ßÂ∞è
    tailColor: "#ff0000",   // ÊãñÂ∞æÁ∫øÈ¢úËâ≤
    tailWidth: 1.5,         // ÊãñÂ∞æÁ∫øÂÆΩÂ∫¶
    tailOpacity: 0.9        // ÊãñÂ∞æÁ∫ø‰∏çÈÄèÊòéÂ∫¶
};

// È°µÈù¢ÂèØËßÅÊÄßÁä∂ÊÄÅ
let isPageVisible = true;
let visibilityPausedTime = 0;
let visibilityResumeTime = 0;

// ÁõëÂê¨È°µÈù¢ÂèØËßÅÊÄßÂèòÂåñ
document.addEventListener('visibilitychange', function() {
    if (document.hidden) {
        // È°µÈù¢ÈöêËóèÊó∂ÊöÇÂÅúÂä®Áîª
        isPageVisible = false;
        if (textRainAnimationId) {
            cancelAnimationFrame(textRainAnimationId);
            textRainAnimationId = null;
        }
        visibilityPausedTime = Date.now();
    } else {
        // È°µÈù¢ÈáçÊñ∞ÂèØËßÅÊó∂ÊÅ¢Â§çÂä®Áîª
        isPageVisible = true;
        visibilityResumeTime = Date.now();
        
        // ËÆ°ÁÆóÈ°µÈù¢ÈöêËóèÁöÑÊó∂Èó¥
        const hiddenDuration = visibilityResumeTime - visibilityPausedTime;
        
        // Êõ¥Êñ∞ÊâÄÊúâÁ≤íÂ≠ê‰ΩçÁΩÆÔºàË°•ÂÅøÈöêËóèÊúüÈó¥Â∫îËØ•‰∏ãËêΩÁöÑ‰ΩçÁΩÆÔºâ
        if (isTextRainActive && hiddenDuration > 0) {
            textRainParticles.forEach(particle => {
                // Ê†πÊçÆÈöêËóèÊó∂Èó¥ËÆ°ÁÆóÂ∫îËØ•‰∏ãËêΩÁöÑ‰ΩçÁΩÆ
                const fallDistance = particle.speed * (hiddenDuration / 16);
                particle.y += fallDistance;
                
                // Êõ¥Êñ∞DOMÂÖÉÁ¥†‰ΩçÁΩÆ
                if (particle.textElement) {
                    particle.textElement.style.top = `${particle.y}px`;
                }
                
                // Êõ¥Êñ∞ÊãñÂ∞æÁ∫ø
                if (particle.tailElement) {
                    const tailLength = particle.y - particle.startY;
                    particle.tailElement.style.height = `${tailLength}px`;
                }
            });
            
            // ÁßªÈô§Â∑≤ÁªèË∂ÖÂá∫Â±èÂπïÁöÑÁ≤íÂ≠ê
            for (let i = textRainParticles.length - 1; i >= 0; i--) {
                const particle = textRainParticles[i];
                if (particle.y > window.innerHeight + 50) {
                    removeTextRainParticle(particle);
                    textRainParticles.splice(i, 1);
                }
            }
        }
        
        // ÈáçÊñ∞ÂºÄÂßãÂä®ÁîªÂæ™ÁéØ
        if (isTextRainActive) {
            animateTextRain();
        }
    }
});

// ÂàõÂª∫ÊñáÂ≠óÁ≤íÂ≠ê
function createTextRainParticle() {
    if (!isTextRainActive) return;
    
    // ÈöèÊú∫ÈÄâÊã©ÊñáÂ≠ó
    const text = textPool[Math.floor(Math.random() * textPool.length)];
    
    // ÂàõÂª∫ÊñáÂ≠óÂÖÉÁ¥†
    const textElement = document.createElement('div');
    textElement.className = 'text-particle';
    textElement.textContent = text;
    textElement.title = text;
    
    // ËÆæÁΩÆÂàùÂßã‰ΩçÁΩÆÂíåÊ†∑Âºè
    const startX = Math.random() * (window.innerWidth - 60);
    const startY = -30;
    
    textElement.style.left = `${startX}px`;
    textElement.style.top = `${startY}px`;
    
    // ÈöèÊú∫Â≠ó‰ΩìÂ§ßÂ∞è
    const fontSize = textRainConfig.sizeMin + Math.random() * (textRainConfig.sizeMax - textRainConfig.sizeMin);
    textElement.style.fontSize = `${fontSize}px`;
    
    // ÂàõÂª∫ÊãñÂ∞æÁ∫øÂÖÉÁ¥†
    const tailElement = document.createElement('div');
    tailElement.className = 'tail-line';
    tailElement.style.left = `${startX + fontSize/2}px`;
    tailElement.style.top = `${startY}px`;
    tailElement.style.height = '0px';
    tailElement.style.width = `${textRainConfig.tailWidth}px`;
    tailElement.style.opacity = textRainConfig.tailOpacity;
    tailElement.style.background = `linear-gradient(to bottom, transparent, ${textRainConfig.tailColor} 10%, ${textRainConfig.tailColor})`;
    
    // Ê∑ªÂä†Âà∞ÂÆπÂô®
    textRainElement.appendChild(tailElement);
    textRainElement.appendChild(textElement);
    
    // ÂàõÂª∫Á≤íÂ≠êÂØπË±°
    const particle = {
        textElement,
        tailElement,
        x: startX,
        y: startY,
        startX: startX,
        startY: startY,
        fontSize: fontSize,
        speed: 0.8 + Math.random() * textRainConfig.speed,
        isActive: true
    };
    
    textRainParticles.push(particle);
    
    // ÈôêÂà∂Á≤íÂ≠êÊï∞ÈáèÔºå‰øùÊåÅÊÄßËÉΩ
    if (textRainParticles.length > 150) {
        const oldParticle = textRainParticles.shift();
        removeTextRainParticle(oldParticle);
    }
}

// ÁßªÈô§Á≤íÂ≠ê
function removeTextRainParticle(particle) {
    if (particle.textElement && particle.textElement.parentNode) {
        particle.textElement.parentNode.removeChild(particle.textElement);
    }
    if (particle.tailElement && particle.tailElement.parentNode) {
        particle.tailElement.parentNode.removeChild(particle.tailElement);
    }
    particle.isActive = false;
}

// Êõ¥Êñ∞Á≤íÂ≠ê‰ΩçÁΩÆ
function updateTextRainParticles(timestamp) {
    // ËÆ°ÁÆóÊó∂Èó¥Â¢ûÈáèÔºåÁ°Æ‰øùÂä®ÁîªÂπ≥Êªë
    const deltaTime = textRainLastTime ? timestamp - textRainLastTime : 16;
    textRainLastTime = timestamp;
    
    // Êõ¥Êñ∞ÊâÄÊúâÁ≤íÂ≠ê
    for (let i = textRainParticles.length - 1; i >= 0; i--) {
        const particle = textRainParticles[i];
        
        if (!particle.isActive) {
            textRainParticles.splice(i, 1);
            continue;
        }
        
        // Êõ¥Êñ∞‰∏ãËêΩ‰ΩçÁΩÆ
        particle.y += particle.speed * (deltaTime / 16);
        
        // Êõ¥Êñ∞ÊñáÂ≠ó‰ΩçÁΩÆ
        if (particle.textElement) {
            particle.textElement.style.top = `${particle.y}px`;
        }
        
        // Êõ¥Êñ∞ÊãñÂ∞æÁ∫ø
        if (particle.tailElement) {
            // ËÆ°ÁÆóÊãñÂ∞æÁ∫øÈïøÂ∫¶
            const tailLength = particle.y - particle.startY;
            particle.tailElement.style.height = `${tailLength}px`;
            particle.tailElement.style.top = `${particle.startY}px`;
            
            // Êõ¥Êñ∞ÊãñÂ∞æÁ∫øÈ¢úËâ≤Ê∏êÂèò
            const gradientEnd = Math.min(100, tailLength * 0.3);
            if (tailLength > 0) {
                const gradientPercent = Math.min(30, (gradientEnd / tailLength) * 100);
                particle.tailElement.style.background = 
                    `linear-gradient(to bottom, transparent, ${textRainConfig.tailColor} ${gradientPercent}%, ${textRainConfig.tailColor})`;
            }
        }
        
        // Á≤íÂ≠êË∂ÖÂá∫Â±èÂπïÊó∂ÁßªÈô§
        if (particle.y > window.innerHeight + 50) {
            removeTextRainParticle(particle);
            textRainParticles.splice(i, 1);
        }
    }
}

// ÊñáÂ≠óÈõ®Âä®ÁîªÂæ™ÁéØ
function animateTextRain(timestamp) {
    if (!isTextRainActive || !isPageVisible) return;
    
    updateTextRainParticles(timestamp);
    textRainAnimationId = requestAnimationFrame(animateTextRain);
}

// ÂàùÂßãÂåñÊñáÂ≠óÈõ®
function initTextRain() {
    // ÂàõÂª∫ÂàùÂßãÁ≤íÂ≠ê
    for (let i = 0; i < 25; i++) {
        setTimeout(() => createTextRainParticle(), i * 200);
    }
    
    // ÂÆöÊó∂ÁîüÊàêÊñ∞Á≤íÂ≠ê
    const particleInterval = setInterval(() => {
        if (isTextRainActive && Math.random() < textRainConfig.density) {
            createTextRainParticle();
        }
    }, 250);
    
    // ÂºÄÂßãÂä®Áîª
    animateTextRain();
    
    // ‰øùÂ≠òÂÆöÊó∂Âô®‰ª•‰æøÊ∏ÖÁêÜ
    window.textRainInterval = particleInterval;
}

// ÂêØÂä®ÊñáÂ≠óÈõ®ÁâπÊïà
function startTextRain() {
    if (isTextRainActive) return;
    
    isTextRainActive = true;
    isPageVisible = !document.hidden;
    console.log("ÊñáÂ≠óÈõ®ÁâπÊïàÂêØÂä® - ÂΩìÂâçÊèêÁ§∫ËØç: Á†ßÊú®");
    initTextRain();
}

// ÂÅúÊ≠¢ÊñáÂ≠óÈõ®ÁâπÊïà
function stopTextRain() {
    isTextRainActive = false;
    
    // ÂèñÊ∂àÂä®ÁîªÂæ™ÁéØ
    if (textRainAnimationId) {
        cancelAnimationFrame(textRainAnimationId);
        textRainAnimationId = null;
    }
    
    // Ê∏ÖÈô§ÊâÄÊúâÁ≤íÂ≠ê
    textRainParticles.forEach(removeTextRainParticle);
    textRainParticles = [];
    
    // Ê∏ÖÈô§ÁîüÊàêÂÆöÊó∂Âô®
    if (window.textRainInterval) {
        clearInterval(window.textRainInterval);
        delete window.textRainInterval;
    }
    
    console.log("ÊñáÂ≠óÈõ®ÁâπÊïàÂÅúÊ≠¢ - ‰∏æÊä•‰ø°Â°´ÂÜôÂÆåÊàê");
}

// Á™óÂè£Â§ßÂ∞èÂèòÂåñÊó∂Ë∞ÉÊï¥ÊñáÂ≠ó‰ΩçÁΩÆ
window.addEventListener('resize', () => {
    textRainParticles.forEach(particle => {
        if (particle.tailElement) {
            particle.tailElement.style.left = `${particle.startX + particle.fontSize/2}px`;
        }
    });
});

// ====================== Ëß¶ÂèëÊú∫Âà∂ ======================
// ÁõëÂê¨ÂΩìÂâçÊèêÁ§∫ËØçÂèòÂåñ
let currentPrompt = "start";
let isReportComplete = false;

// ÁõëÂê¨Á≥ªÁªüÊèêÁ§∫ÂèòÂåñ
function checkPromptChange() {
    // Ê£ÄÊü•ÂΩìÂâçÊèêÁ§∫ËØçÊòØÂê¶‰∏∫"Á†ßÊú®"
    if (currentPrompt === "Á†ßÊú®" && !isTextRainActive) {
        startTextRain();
    }
    
    // Ê£ÄÊü•‰∏æÊä•‰ø°ÊòØÂê¶ÂÆåÊàê‰∏îÂÖ≥ÈîÆËØçÊ≠£Á°Æ
    if (isReportComplete && isTextRainActive) {
        // Âª∂Ëøü1ÁßíÂêéÂÅúÊ≠¢ÊñáÂ≠óÈõ®
        setTimeout(stopTextRain, 1000);
    }
}

// ÁõëÂê¨Áî®Êà∑ËæìÂÖ•
let originalSendUserMessage;
if (typeof sendUserMessage === 'function') {
    originalSendUserMessage = sendUserMessage;
    
    // ÈáçÂÜôsendUserMessageÂáΩÊï∞‰ª•ÁõëÂê¨ÂÖ≥ÈîÆËØç
    window.sendUserMessage = function() {
        const rawInput = messageInput.value.trim();
        if (!rawInput || isWaitingForResponse) return;
        
        // È™åËØÅÁî®Êà∑ËæìÂÖ•
        if (!validateUserInput(rawInput)) {
            const errorMessage = {
                sender: "Á≥ªÁªüÊèêÁ§∫",
                content: `ËæìÂÖ•Ê†ºÂºè‰∏çÊ≠£Á°ÆÔºÅ${systemPrompts[currentKeyword].prompt}`,
                type: "system",
                time: new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})
            };
            renderMessage(errorMessage);
            messageInput.value = '';
            return;
        }
        
        // Ê†áÂáÜÂåñÁî®Êà∑ËæìÂÖ•
        const message = normalizeUserInput(rawInput);
        
        // Êõ¥Êñ∞ÂΩìÂâçÊèêÁ§∫ËØç
        const oldPrompt = currentPrompt;
        currentPrompt = currentKeyword;
        
        // Ê£ÄÊü•ÊòØÂê¶ÈúÄË¶ÅÂêØÂä®ÊñáÂ≠óÈõ®
        if (currentPrompt === "Á†ßÊú®" && !isTextRainActive) {
            startTextRain();
        }
        
        // Ë∞ÉÁî®ÂéüÂßãÂáΩÊï∞
        originalSendUserMessage();
        
        // Ê£ÄÊü•ÊòØÂê¶ÈúÄË¶ÅÂÅúÊ≠¢ÊñáÂ≠óÈõ®ÔºàÂú®‰∏æÊä•‰ø°Êèê‰∫§ÊàêÂäüÂêéÔºâ
        if (currentKeyword === "ÂΩïÈü≥Êñá‰ª∂" && isTextRainActive) {
            // ÂÅáËÆæ‰∏æÊä•‰ø°Êèê‰∫§ÊàêÂäüÂêé‰ºöËøõÂÖ•"ÂΩïÈü≥Êñá‰ª∂"Èò∂ÊÆµ
            isReportComplete = true;
            checkPromptChange();
        }
    };
}

// ÁõëÂê¨‰∏æÊä•‰ø°Êèê‰∫§
let originalSubmitReport;
if (typeof submitReport === 'function') {
    originalSubmitReport = submitReport;
    
    window.submitReport = function() {
        // Ë∞ÉÁî®ÂéüÂßãÂáΩÊï∞
        const result = originalSubmitReport();
        
        // Ê£ÄÊü•ÊòØÂê¶Êèê‰∫§ÊàêÂäü
        const resultMessage = document.getElementById('resultMessage');
        if (resultMessage && resultMessage.className.includes('success')) {
            isReportComplete = true;
            checkPromptChange();
        }
        
        return result;
    };
}

// È°µÈù¢Âä†ËΩΩÂÆåÊàêÂêéÂàùÂßãÂåñ
window.addEventListener('DOMContentLoaded', () => {
    console.log("ÊñáÂ≠óÈõ®ÁâπÊïàÂ∑≤Âä†ËΩΩÔºåÂ∞ÜÂú®ÊèêÁ§∫ËØç‰∏∫'Á†ßÊú®'Êó∂ÂêØÂä®");
    
    // ÂàùÂßãÂåñÊñáÂ≠óÈõ®ÂÆπÂô®ÔºàÈöêËóèÁä∂ÊÄÅÔºâ
    textRainElement.style.display = 'none';
    
    // ÁõëÂê¨Á≥ªÁªüÊèêÁ§∫ÂèòÂåñ
    const originalShowSystemPrompt = showSystemPrompt;
    if (typeof showSystemPrompt === 'function') {
        window.showSystemPrompt = function() {
            originalShowSystemPrompt();
            
            // Êõ¥Êñ∞ÂΩìÂâçÂÖ≥ÈîÆËØç
            currentPrompt = currentKeyword;
            checkPromptChange();
            
            // ÊéßÂà∂ÊñáÂ≠óÈõ®ÂÆπÂô®ÁöÑÊòæÁ§∫/ÈöêËóè
            if (currentKeyword === "Á†ßÊú®" || 
                currentKeyword === "Êé•Á©ó" || 
                currentKeyword === "ÊàêÊùê" || 
                currentKeyword === "‰∏æÊä•‰ø°") {
                textRainElement.style.display = 'block';
            } else {
                textRainElement.style.display = 'none';
            }
        };
    }
    
    // ÁõëÂê¨‰∏æÊä•‰ø°ÂºπÁ™óÊâìÂºÄ
    const originalShowReportModal = showReportModal;
    if (typeof showReportModal === 'function') {
        window.showReportModal = function() {
            originalShowReportModal();
            // Á°Æ‰øùÊñáÂ≠óÈõ®Âú®‰∏æÊä•‰ø°Èò∂ÊÆµÊòæÁ§∫
            textRainElement.style.display = 'none';
        };
    }
    
    // ÁõëÂê¨ÂΩïÈü≥ÂºπÁ™óÂÖ≥Èó≠
    const originalShowRecordingModal = showRecordingModal;
    if (typeof showRecordingModal === 'function') {
        window.showRecordingModal = function() {
            originalShowRecordingModal();
            // ÂΩïÈü≥Êí≠ÊîæÊó∂ÊñáÂ≠óÈõ®ÁªßÁª≠ÊòæÁ§∫
            textRainElement.style.display = 'none';
        };
    }
});
// ==================== ÊÅêÊÄñÊïÖÈöúÊòæÁ§∫Â±èÂä®Áîª‰ª£Á†Å ====================
// ÂàõÂª∫Âä®ÁîªÂÆπÂô®Ê†∑Âºè
const animationStyles = `
/* ÊÅêÊÄñÊïÖÈöúÊòæÁ§∫Â±èÂä®ÁîªÊ†∑Âºè */
.screen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: #0a0a0a;
    z-index: 99999;
    display: none;
    overflow: hidden;
}

/* ÂçäÈÄèÊòéËÉåÊôØÂõæ */
.background-image {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: url('https://i.ibb.co/fz5C48Gv/c9adc09ceb3f52a7f060715bee57930f.png');
    background-size: cover;
    background-position: center;
    opacity: 0.15;
    z-index: 0;
}

/* ÊñáÂ≠óÂÆπÂô® */
.animation-text-container {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
    z-index: 2;
    width: 90%;
}

/* ÊñáÂ≠óË°åÊ†∑Âºè */
.animation-text-line {
    font-size: 2.8rem;
    line-height: 1.6;
    letter-spacing: 3px;
    margin-bottom: 10px;
    font-family: 'SimSun', 'ÂÆã‰Ωì', monospace;
}

/* ÂàùÂßãÊñáÂ≠óÊ†∑Âºè - ÊâìÂ≠óÊú∫ÊïàÊûú */
.animation-original-text {
    color: #fff;
    text-shadow: 0 0 8px rgba(255, 255, 255, 0.8);
}

/* ÊâìÂ≠óÊú∫ÂÖâÊ†áÊ†∑Âºè */
.animation-type-cursor {
    display: inline-block;
    width: 3px;
    height: 2.8rem;
    background-color: #fff;
    margin-left: 2px;
    vertical-align: bottom;
    opacity: 0;
}

.animation-type-cursor.active {
    animation: animation-cursor-blink 0.8s infinite;
}

/* ÂèòÊç¢ÂêéÊñáÂ≠óÊ†∑Âºè */
.animation-transformed-text {
    color: #ff0000;
    text-shadow: 0 0 12px rgba(255, 0, 0, 0.9);
    display: none;
}

/* ÊúÄÁªàÊñáÂ≠óÊ†∑Âºè */
.animation-final-text {
    font-size: 2.2rem;
    color: #ff0000;
    text-shadow: 0 0 15px rgba(255, 0, 0, 0.9);
    display: none;
    font-weight: bold;
}

/* ENDÊñáÂ≠óÊ†∑Âºè */
.animation-end-text {
    font-size: 3.5rem;
    color: #ff0000;
    text-shadow: 0 0 20px rgba(255, 0, 0, 0.9);
    display: none;
    font-weight: bold;
    letter-spacing: 8px;
}

/* ÂÆöÊ†ºENDÊ†∑Âºè */
.animation-end-text.final-frame {
    color: #ff0000;
    text-shadow: 0 0 25px rgba(255, 0, 0, 0.95);
    animation: none !important;
}

/* ÊñáÂ≠óÂ≠óÁ¨¶Ê†∑Âºè - Áî®‰∫éÈÄêÂ≠óÂä®Áîª */
.animation-char {
    display: inline-block;
    position: relative;
}

/* ÊïÖÈöúÈó™ÁÉÅÊïàÊûú */
.animation-char.glitching {
    animation: animation-glitch-char 0.15s infinite;
}

@keyframes animation-glitch-char {
    0% { transform: translate(0, 0); text-shadow: 0 0 5px currentColor; }
    20% { transform: translate(-1px, 1px); text-shadow: 1px -1px 3px currentColor, 0 0 10px #fff; }
    40% { transform: translate(1px, -1px); text-shadow: -1px 1px 3px currentColor, 0 0 10px #0ff; }
    60% { transform: translate(-1px, -1px); text-shadow: 1px 1px 3px currentColor, 0 0 10px #f0f; }
    80% { transform: translate(1px, 1px); text-shadow: -1px -1px 3px currentColor, 0 0 10px #ff0; }
    100% { transform: translate(0, 0); text-shadow: 0 0 5px currentColor; }
}

/* Â≠óÁ¨¶ÂèòÊç¢ÊïàÊûú */
.animation-char.changing {
    animation: animation-change-char 0.3s forwards;
}

@keyframes animation-change-char {
    0% { opacity: 1; transform: scale(1); }
    20% { opacity: 0.2; transform: scale(0.8); color: #f00; }
    40% { opacity: 0.8; transform: scale(1.2); color: #0f0; }
    60% { opacity: 0.3; transform: scale(0.9); color: #00f; }
    80% { opacity: 0.9; transform: scale(1.1); color: #ff0; }
    100% { opacity: 1; transform: scale(1); }
}

/* Â≠óÁ¨¶ÂõûÈÄÄÊïàÊûú */
.animation-char.backspacing {
    animation: animation-backspace-char 0.2s forwards;
}

@keyframes animation-backspace-char {
    0% { opacity: 1; transform: scale(1); }
    20% { opacity: 0.5; transform: scale(1.1); color: #ff0; }
    40% { opacity: 0.8; transform: scale(0.9); color: #f00; }
    60% { opacity: 0.3; transform: scale(1.05); color: #ff0; }
    80% { opacity: 0.1; transform: scale(0.95); color: #f00; }
    100% { opacity: 0; transform: scale(0); }
}

/* ENDÂ≠óÁ¨¶ÊâìÂ≠óÊú∫ÊïàÊûú */
.animation-end-char {
    display: inline-block;
    opacity: 0;
}

.animation-end-char.typing {
    animation: animation-type-end-char 0.5s forwards;
}

@keyframes animation-type-end-char {
    0% { opacity: 0; transform: scale(0) translateY(20px); }
    30% { opacity: 0.5; transform: scale(1.2) translateY(-5px); color: #ff0; }
    60% { opacity: 0.8; transform: scale(0.9) translateY(2px); color: #f00; }
    80% { opacity: 0.9; transform: scale(1.05) translateY(0); color: #ff0; }
    100% { opacity: 1; transform: scale(1) translateY(0); }
}

/* ÂÆöÊ†ºENDÂ≠óÁ¨¶Ê†∑Âºè */
.animation-end-char.final-char {
    animation: none !important;
    opacity: 1;
    color: #ff0000 !important;
    transform: scale(1) translateY(0) !important;
}

/* Èõ™Ëä±Èó™ÁÉÅÊïàÊûú - ÊñáÂ≠óËßÜËßâÊïÖÈöú */
.animation-snow-effect {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: 
        radial-gradient(circle at 10% 20%, rgba(255, 0, 0, 0.03) 1px, transparent 1px),
        radial-gradient(circle at 30% 40%, rgba(255, 0, 0, 0.02) 1px, transparent 1px),
        radial-gradient(circle at 50% 60%, rgba(255, 0, 0, 0.03) 1px, transparent 1px),
        radial-gradient(circle at 70% 80%, rgba(200, 0, 0, 0.02) 1px, transparent 1px),
        radial-gradient(circle at 90% 10%, rgba(255, 0, 0, 0.03) 1px, transparent 1px);
    background-size: 200px 200px, 150px 150px, 180px 180px, 220px 220px, 170px 170px;
    opacity: 0;
    pointer-events: none;
    z-index: 1;
    transition: opacity 2s ease-out;
}

.animation-snow-effect.active {
    animation: animation-snow-flicker 0.8s infinite alternate;
}

.animation-snow-effect.final-state {
    animation: none;
    opacity: 0.1;
}

@keyframes animation-snow-flicker {
    0% { opacity: 0.05; }
    20% { opacity: 0.1; }
    40% { opacity: 0.03; }
    60% { opacity: 0.08; }
    80% { opacity: 0.02; }
    100% { opacity: 0.07; }
}

/* Â±èÂπïÊâ´ÊèèÁ∫øÊïàÊûú */
.animation-scanlines {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(
        to bottom,
        transparent 50%,
        rgba(0, 0, 0, 0.2) 50%
    );
    background-size: 100% 6px;
    z-index: 3;
    pointer-events: none;
    opacity: 0.7;
}

/* Â±èÂπïÊï¥‰ΩìÈó™ÁÉÅÊïàÊûú */
.animation-screen-flash {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(255, 0, 0, 0.1);
    z-index: 5;
    pointer-events: none;
    opacity: 0;
}

/* ÊâìÂ≠óÊú∫ÂÖâÊ†á */
.animation-cursor {
    display: inline-block;
    width: 3px;
    height: 2.8rem;
    background-color: #ff0000;
    margin-left: 5px;
    vertical-align: bottom;
    opacity: 0;
}

.animation-cursor.active {
    animation: animation-cursor-blink 0.8s infinite;
}

@keyframes animation-cursor-blink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0; }
}

/* ENDÊñáÂ≠óÂÖâÊ†á */
.animation-end-cursor {
    display: inline-block;
    width: 4px;
    height: 3.5rem;
    background-color: #ff0000;
    margin-left: 5px;
    vertical-align: bottom;
    opacity: 0;
}

.animation-end-cursor.active {
    animation: animation-cursor-blink 0.8s infinite;
}

.animation-end-cursor.final-state {
    animation: none;
    opacity: 0;
}
`;

// ÂàõÂª∫Âä®ÁîªÂÆπÂô®HTML
const animationHTML = `
<div class="screen" id="terrorDisplayScreen">
    <!-- ÂçäÈÄèÊòéËÉåÊôØÂõæ -->
    <div class="background-image"></div>
    
    <!-- Èõ™Ëä±Èó™ÁÉÅÊïàÊûú -->
    <div class="animation-snow-effect" id="animationSnowEffect"></div>
    
    <!-- Â±èÂπïÊâ´ÊèèÁ∫ø -->
    <div class="animation-scanlines"></div>
    
    <!-- ÊñáÂ≠óÂÆπÂô® -->
    <div class="animation-text-container">
        <!-- ÂàùÂßãÊñáÂ≠ó - ÊâìÂ≠óÊú∫ÊïàÊûú -->
        <div class="animation-original-text animation-text-line" id="animationOriginalText">
            <span id="animationTypedOriginalText"></span><span class="animation-type-cursor" id="animationOriginalCursor"></span>
        </div>
        
        <!-- ÂèòÊç¢ÂêéÊñáÂ≠ó -->
        <div class="animation-transformed-text animation-text-line" id="animationTransformedText">
            <span class="animation-char">Ê£Æ</span>
            <span class="animation-char">ÁÖß</span>
            <span class="animation-char">Ôºö</span>
            <span class="animation-char">ÂêÉ</span>
            <span class="animation-char">‰∫∫</span>
        </div>
        
        <!-- ÊúÄÁªàÊñáÂ≠ó -->
        <div class="animation-final-text" id="animationFinalText">
            <span id="animationTypedText"></span><span class="animation-cursor" id="animationCursor"></span>
        </div>
        
        <!-- ENDÊñáÂ≠ó -->
        <div class="animation-end-text" id="animationEndText">
            <span id="animationEndTypedText"></span><span class="animation-end-cursor" id="animationEndCursor"></span>
        </div>
    </div>
    
    <!-- Â±èÂπïÈó™ÁÉÅÂ±Ç -->
    <div class="animation-screen-flash" id="animationScreenFlash"></div>
</div>
`;

// ÂàùÂßãÂåñÂä®ÁîªÁ≥ªÁªü
function initTerrorDisplayAnimation() {
    // Ê∑ªÂä†Ê†∑ÂºèÂà∞È°µÈù¢
    const styleSheet = document.createElement('style');
    styleSheet.textContent = animationStyles;
    document.head.appendChild(styleSheet);
    
    // Ê∑ªÂä†HTMLÂÆπÂô®Âà∞È°µÈù¢
    document.body.insertAdjacentHTML('beforeend', animationHTML);
    
    console.log("ÊÅêÊÄñÊïÖÈöúÊòæÁ§∫Â±èÂä®ÁîªÁ≥ªÁªüÂ∑≤ÂàùÂßãÂåñ");
}

// ÂêØÂä®ÊÅêÊÄñÂä®Áîª
function startTerrorDisplayAnimation() {
    const screen = document.getElementById('terrorDisplayScreen');
    const originalText = document.getElementById('animationOriginalText');
    const typedOriginalText = document.getElementById('animationTypedOriginalText');
    const originalCursor = document.getElementById('animationOriginalCursor');
    const transformedText = document.getElementById('animationTransformedText');
    const finalText = document.getElementById('animationFinalText');
    const endText = document.getElementById('animationEndText');
    const typedText = document.getElementById('animationTypedText');
    const endTypedText = document.getElementById('animationEndTypedText');
    const cursor = document.getElementById('animationCursor');
    const endCursor = document.getElementById('animationEndCursor');
    const snowEffect = document.getElementById('animationSnowEffect');
    const screenFlash = document.getElementById('animationScreenFlash');
    
    const transformedChars = transformedText.querySelectorAll('.animation-char');
    
    // ÊñáÂ≠óÂÜÖÂÆπ
    const originalMessage = "ÊûóÊò≠ÔºöÂêÉÊ§çÁâ©‰∫∫„ÄÇ„ÄÇ";
    const finalMessage = "ÊØè‰∏ÄÊ†™ÈùíËãóÔºåÁªàÂ∞ÜÊàêÊùê";
    const endMessage = "END";
    
    // ÊòæÁ§∫Â±èÂπï
    screen.style.display = 'block';
    
    // ÂêØÂä®Èõ™Ëä±ÊïàÊûú
    snowEffect.classList.add('active');
    
    // Á¨¨‰∏ÄÈò∂ÊÆµÔºöÊâìÂ≠óÊú∫ÊïàÊûúÊòæÁ§∫ÂàùÂßãÊñáÂ≠ó
    function startOriginalTypewriter() {
        let index = 0;
        const typingSpeed = 120;
        
        typedOriginalText.textContent = "";
        originalCursor.style.opacity = 1;
        originalCursor.classList.add('active');
        
        function typeOriginal() {
            if (index < originalMessage.length) {
                typedOriginalText.textContent += originalMessage.charAt(index);
                index++;
                
                setTimeout(typeOriginal, typingSpeed);
            } else {
                // ÊâìÂ≠óÂÆåÊàêÂêéÔºåÊòæÁ§∫3ÁßíÂêéÂºÄÂßãÈÄêÂ≠óÊïÖÈöúÂèòÊç¢
                setTimeout(() => {
                    // ÁßªÈô§ÂÖâÊ†á
                    originalCursor.classList.remove('active');
                    originalCursor.style.opacity = 0;
                    
                    // ÂºÄÂßãÈÄêÂ≠óÊïÖÈöúÂèòÊç¢
                    startCharacterGlitch();
                }, 3000);
            }
        }
        
        // ÂºÄÂßãÊâìÂ≠ó
        setTimeout(typeOriginal, 500);
    }
    
    // ÈÄêÂ≠óÊïÖÈöúÂèòÊç¢ÂáΩÊï∞
    function startCharacterGlitch() {
        // ÈöèÊú∫Â±èÂπïÈó™ÁÉÅ
        triggerFlash();
        
        // È¶ñÂÖàËÆ©ÊâÄÊúâÂ≠óÁ¨¶ÂºÄÂßãÈó™ÁÉÅ
        const originalChars = typedOriginalText.textContent.split('').map((char, i) => {
            const span = document.createElement('span');
            span.textContent = char;
            span.className = 'animation-char';
            return span;
        });
        
        // Ê∏ÖÁ©∫Âπ∂ÈáçÊñ∞Ê∑ªÂä†Â≠óÁ¨¶
        typedOriginalText.textContent = '';
        originalChars.forEach(char => {
            typedOriginalText.appendChild(char);
            char.classList.add('glitching');
        });
        
        // ÂÆö‰πâË¶ÅÊîπÂèòÁöÑÂ≠óÁ¨¶‰ΩçÁΩÆÂíåÂØπÂ∫îÊñ∞Â≠óÁ¨¶
        const charChanges = [
            { index: 0, newChar: 'Ê£Æ', delay: 300 },
            { index: 1, newChar: 'ÁÖß', delay: 600 },
            { index: 3, newChar: 'ÂêÉ', delay: 900 },
            { index: 4, newChar: 'Ê§ç', delay: 1200 },
            { index: 5, newChar: 'Áâ©', delay: 1500 },
            { index: 6, newChar: '‰∫∫', delay: 1800 },
            { index: 7, newChar: '', delay: 2100 },
            { index: 8, newChar: '', delay: 2400 }
        ];
        
        // ÊâßË°åÈÄêÂ≠óÂèòÊç¢
        charChanges.forEach(change => {
            setTimeout(() => {
                const char = originalChars[change.index];
                
                // ÂÅúÊ≠¢Èó™ÁÉÅÔºåÂºÄÂßãÂèòÊç¢Âä®Áîª
                char.classList.remove('glitching');
                char.classList.add('changing');
                
                // ÂèòÊç¢ÂÆåÊàêÂêéÊõ¥Êñ∞Â≠óÁ¨¶
                setTimeout(() => {
                    if (change.newChar === '') {
                        // Â≠óÁ¨¶Ê∂àÂ§±
                        char.style.opacity = '0';
                        char.style.visibility = 'hidden';
                    } else {
                        // Êõ¥Êñ∞Â≠óÁ¨¶
                        char.textContent = change.newChar;
                    }
                    
                    // ÁßªÈô§ÂèòÊç¢Âä®ÁîªÁ±ª
                    char.classList.remove('changing');
                    
                    // ÂÜçÊ¨°ÂºÄÂßãÈó™ÁÉÅ
                    setTimeout(() => {
                        char.classList.add('glitching');
                    }, 100);
                    
                }, 300);
                
                // ÈöèÊú∫Ëß¶ÂèëÂ±èÂπïÈó™ÁÉÅ
                if (Math.random() > 0.5) {
                    setTimeout(() => {
                        triggerFlash(0.08 + Math.random() * 0.1);
                    }, Math.random() * 200);
                }
                
            }, change.delay);
        });
        
        // ÊâÄÊúâÂ≠óÁ¨¶ÂèòÊç¢ÂÆåÊàêÂêé
        setTimeout(() => {
            // ÁßªÈô§ÊâÄÊúâÈó™ÁÉÅÊïàÊûú
            originalChars.forEach(char => {
                if (char.parentNode) {
                    char.classList.remove('glitching');
                }
            });
            
            // Â±èÂπïÂº∫ÁÉàÈó™ÁÉÅ
            triggerFlash(0.3);
            
            // ÈöêËóèÂéüÂßãÊñáÊú¨ÔºåÊòæÁ§∫ÂèòÊç¢ÂêéÁöÑÁ∫¢Ëâ≤ÊñáÊú¨
            setTimeout(() => {
                originalText.style.display = 'none';
                transformedText.style.display = 'block';
                
                // ËÆ©Á∫¢Ëâ≤ÊñáÊú¨Â≠óÁ¨¶Èó™ÁÉÅ
                transformedChars.forEach(char => {
                    char.classList.add('glitching');
                });
                
                // 3ÁßíÂêéËøõÂÖ•‰∏ã‰∏ÄÈò∂ÊÆµ
                setTimeout(() => {
                    // ÁßªÈô§Á∫¢Ëâ≤ÊñáÊú¨ÁöÑÈó™ÁÉÅ
                    transformedChars.forEach(char => {
                        char.classList.remove('glitching');
                    });
                    
                    // Â±èÂπïÂº∫ÁÉàÈó™ÁÉÅ
                    triggerFlash(0.4);
                    
                    // ÈöêËóèÁ∫¢Ëâ≤ÊñáÊú¨
                    setTimeout(() => {
                        transformedText.style.display = 'none';
                        
                        // ÊòæÁ§∫ÊúÄÁªàÊñáÊú¨Âπ∂ÂºÄÂßãÊâìÂ≠óÊú∫ÊïàÊûú
                        finalText.style.display = 'block';
                        startTypewriter();
                    }, 500);
                    
                }, 3000);
                
            }, 2700);
        }, 2700);
    }
    
    // ÊâìÂ≠óÊú∫ÊïàÊûú
    function startTypewriter() {
        let index = 0;
        const typingSpeed = 120;
        
        typedText.textContent = "";
        cursor.style.opacity = 1;
        cursor.classList.add('active');
        
        function typeWriter() {
            if (index < finalMessage.length) {
                typedText.textContent += finalMessage.charAt(index);
                index++;
                
                // ÈöèÊú∫Ê∑ªÂä†Èõ™Ëä±ÊïàÊûúÂ¢ûÂº∫
                if (Math.random() > 0.7) {
                    snowEffect.style.opacity = 0.15 + Math.random() * 0.1;
                }
                
                // ÈöèÊú∫Â±èÂπïÈó™ÁÉÅ
                if (Math.random() > 0.8) {
                    triggerFlash(0.05);
                }
                
                setTimeout(typeWriter, typingSpeed);
            } else {
                // ÊâìÂ≠óÂÆåÊàêÂêéÔºåÊòæÁ§∫3Áßí
                setTimeout(() => {
                    // ÂºÄÂßãÈÄêÂ≠óÂõûÈÄÄ
                    startBackspaceEffect();
                }, 3000);
            }
        }
        
        // ÂºÄÂßãÊâìÂ≠ó
        setTimeout(typeWriter, 500);
    }
    
    // ÈÄêÂ≠óÂõûÈÄÄÊïàÊûú
    function startBackspaceEffect() {
        const messageChars = typedText.textContent.split('');
        let index = messageChars.length - 1;
        const backspaceSpeed = 100;
        
        function backspace() {
            if (index >= 0) {
                // Ê∑ªÂä†ÂõûÈÄÄÂä®Áîª
                const tempSpan = document.createElement('span');
                tempSpan.textContent = messageChars[index];
                tempSpan.className = 'animation-char backspacing';
                tempSpan.style.display = 'inline-block';
                typedText.appendChild(tempSpan);
                
                // ÁßªÈô§ÂéüÂßãÂ≠óÁ¨¶
                typedText.textContent = typedText.textContent.slice(0, -1);
                
                // ÈöèÊú∫Â±èÂπïÈó™ÁÉÅ
                if (Math.random() > 0.6) {
                    triggerFlash(0.07 + Math.random() * 0.08);
                }
                
                index--;
                
                // ÁßªÈô§Âä®ÁîªÂÖÉÁ¥†
                setTimeout(() => {
                    if (tempSpan.parentNode) {
                        tempSpan.parentNode.removeChild(tempSpan);
                    }
                }, 200);
                
                setTimeout(backspace, backspaceSpeed);
            } else {
                // ÊâÄÊúâÂ≠óÁ¨¶ÂõûÈÄÄÂÆåÊàêÂêé
                setTimeout(() => {
                    // Â±èÂπïÂº∫ÁÉàÈó™ÁÉÅ
                    triggerFlash(0.4);
                    
                    // ÈöêËóèÊúÄÁªàÊñáÊú¨
                    setTimeout(() => {
                        finalText.style.display = 'none';
                        
                        // ÊòæÁ§∫ENDÊñáÂ≠óÂÆπÂô®
                        endText.style.display = 'block';
                        
                        // ÂºÄÂßãENDÊâìÂ≠óÊú∫ÊïàÊûú
                        startEndTypewriter();
                    }, 300);
                }, 500);
            }
        }
        
        // ÂºÄÂßãÂõûÈÄÄ
        backspace();
    }
    
    // ENDÊâìÂ≠óÊú∫ÊïàÊûú
    function startEndTypewriter() {
        let index = 0;
        const typingSpeed = 400;
        
        endTypedText.textContent = "";
        endCursor.style.opacity = 1;
        endCursor.classList.add('active');
        
        function typeEnd() {
            if (index < endMessage.length) {
                // ÂàõÂª∫Â≠óÁ¨¶ÂÖÉÁ¥†Âπ∂Ê∑ªÂä†ÊâìÂ≠óÂä®Áîª
                const charSpan = document.createElement('span');
                charSpan.textContent = endMessage.charAt(index);
                charSpan.className = 'animation-end-char typing';
                endTypedText.appendChild(charSpan);
                
                // Â±èÂπïÈó™ÁÉÅ
                triggerFlash(0.15 + Math.random() * 0.1);
                
                // Èõ™Ëä±ÊïàÊûúÂ¢ûÂº∫
                snowEffect.style.opacity = 0.2 + Math.random() * 0.1;
                
                index++;
                
                setTimeout(typeEnd, typingSpeed);
            } else {
                // ENDÊâìÂ≠óÂÆåÊàêÂêéÔºåÁü≠ÊöÇÂÅúÁïôÁÑ∂ÂêéÂÆöÊ†º
                setTimeout(() => {
                    // ÁßªÈô§ÊâÄÊúâÂä®ÁîªÔºåÂÆöÊ†ºÂú®END
                    finalFreeze();
                }, 1000);
            }
        }
        
        // ÂºÄÂßãENDÊâìÂ≠ó
        setTimeout(typeEnd, 300);
    }
    
    // ÊúÄÁªàÂÆöÊ†ºÂáΩÊï∞
    function finalFreeze() {
        // ÂÅúÊ≠¢ÊâÄÊúâÂä®Áîª
        const endChars = endTypedText.querySelectorAll('.animation-end-char');
        endChars.forEach(char => {
            char.classList.remove('typing');
            char.classList.add('final-char');
        });
        
        // ÁßªÈô§ÂÖâÊ†á
        endCursor.classList.remove('active');
        endCursor.classList.add('final-state');
        endCursor.style.opacity = 0;
        
        // ÂÅúÊ≠¢Èõ™Ëä±Èó™ÁÉÅÂä®ÁîªÔºå‰øùÊåÅÈùôÊÄÅ
        snowEffect.classList.remove('active');
        snowEffect.classList.add('final-state');
        snowEffect.style.opacity = 0.08;
        
        // Ê∑ªÂä†ÊúÄÁªàÂÆöÊ†ºÊ†∑Âºè
        endText.classList.add('final-frame');
        
        // ÊúÄÂêéÂ±èÂπïËΩªÂæÆÈó™ÁÉÅ‰∏ÄÊ¨°
        setTimeout(() => {
            triggerFlash(0.2);
        }, 200);
        
        // 10ÁßíÂêéËá™Âä®ÂÖ≥Èó≠Âä®ÁîªÂ±èÂπï
        setTimeout(() => {
            screen.style.display = 'none';
        }, 10000);
    }
    
    // Ëß¶ÂèëÂ±èÂπïÈó™ÁÉÅ
    function triggerFlash(intensity = 0.15) {
        screenFlash.style.backgroundColor = `rgba(255, 0, 0, ${intensity})`;
        screenFlash.style.opacity = 1;
        
        setTimeout(() => {
            screenFlash.style.opacity = 0;
        }, 80 + Math.random() * 100);
    }
    
    // ÂºÄÂßãÂä®Áîª
    startOriginalTypewriter();
}

// ÁõëÂê¨"È£ü‰∫∫ÊóèÂ¶Ç‰ΩïË°•ÂÖÖËÜ≥È£üÁ∫§Áª¥Ôºü"Ê∂àÊÅØÁöÑËß¶Âèë
function setupTerrorAnimationTrigger() {
    // ÁõëÂê¨Áî®Êà∑ÂèëÈÄÅÊ∂àÊÅØ
    const originalSendUserMessage = window.sendUserMessage;
    if (typeof originalSendUserMessage === 'function') {
        window.sendUserMessage = function() {
            const message = messageInput.value.trim();
            
            // Ë∞ÉÁî®ÂéüÂßãÂáΩÊï∞
            originalSendUserMessage();
            
            // Ê£ÄÊü•ÊòØÂê¶ÂèëÈÄÅ‰∫Ü"È£ü‰∫∫ÊóèÂ¶Ç‰ΩïË°•ÂÖÖËÜ≥È£üÁ∫§Áª¥Ôºü"
            if (message === "È£ü‰∫∫ÊóèÂ¶Ç‰ΩïË°•ÂÖÖËÜ≥È£üÁ∫§Áª¥Ôºü") {
                // Âª∂Ëøü1ÁßíÂêéÂêØÂä®ÊÅêÊÄñÂä®Áîª
                setTimeout(() => {
                    console.log("Ê£ÄÊµãÂà∞'È£ü‰∫∫ÊóèÂ¶Ç‰ΩïË°•ÂÖÖËÜ≥È£üÁ∫§Áª¥Ôºü'Ê∂àÊÅØÔºåÂêØÂä®ÊÅêÊÄñÊïÖÈöúÂä®Áîª");
                    startTerrorDisplayAnimation();
                }, 1000);
            }
        };
    }
}

// È°µÈù¢Âä†ËΩΩÂÆåÊàêÂêéÂàùÂßãÂåñ
window.addEventListener('DOMContentLoaded', function() {
    // ÂàùÂßãÂåñÂä®ÁîªÁ≥ªÁªü
    initTerrorDisplayAnimation();
    
    // ËÆæÁΩÆËß¶ÂèëÁõëÂê¨
    setupTerrorAnimationTrigger();
    
    console.log("ÊÅêÊÄñÊïÖÈöúÂä®ÁîªÁ≥ªÁªüÂ∑≤ÂáÜÂ§áÂ∞±Áª™");
});
// ==================== ÊâìÂ≠óÊú∫Âä®Áîª‰ª£Á†Å ====================
// Ê≠§‰ª£Á†ÅÂ∫îÂú®Áé∞Êúâ‰ª£Á†ÅÊú´Â∞æÊ∑ªÂä†

// ÂàõÂª∫Âä®ÁîªÊ†∑Âºè
const typewriterStyles = `
/* ÊâìÂ≠óÊú∫Âä®ÁîªÂÆπÂô® */
.typewriter-screen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: #ffffff;
    z-index: 99999;
    display: none;
    overflow: hidden;
    font-family: 'SimSun', 'ÂÆã‰Ωì', serif;
}

/* ÊñáÂ≠óÂÆπÂô® */
.typewriter-container {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
    z-index: 2;
    width: 90%;
}

/* ÊñáÂ≠óÊ†∑Âºè */
.typewriter-text {
    font-size: 2.8rem;
    line-height: 1.6;
    letter-spacing: 3px;
    margin-bottom: 10px;
    color: #000000;
    font-weight: normal;
}

/* ENDÊñáÂ≠óÊ†∑Âºè */
.typewriter-end-text {
    font-size: 3.5rem;
    color: #000000;
    font-weight: bold;
    letter-spacing: 10px;
    display: none;
}

/* ÊâìÂ≠óÊú∫ÂÖâÊ†á */
.typewriter-cursor {
    display: inline-block;
    width: 3px;
    height: 2.8rem;
    background-color: #000000;
    margin-left: 5px;
    vertical-align: bottom;
    opacity: 0;
}

.typewriter-cursor.active {
    animation: typewriter-cursor-blink 0.8s infinite;
}

@keyframes typewriter-cursor-blink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0; }
}

/* ENDÊñáÂ≠óÂÖâÊ†á */
.typewriter-end-cursor {
    display: inline-block;
    width: 4px;
    height: 3.5rem;
    background-color: #000000;
    margin-left: 5px;
    vertical-align: bottom;
    opacity: 0;
}

.typewriter-end-cursor.active {
    animation: typewriter-cursor-blink 0.8s infinite;
}

/* Â≠óÁ¨¶ÂõûÈÄÄÊïàÊûú */
.typewriter-char.backspacing {
    animation: typewriter-backspace-char 0.15s forwards;
}

@keyframes typewriter-backspace-char {
    0% { opacity: 1; transform: scale(1); }
    20% { opacity: 0.5; transform: scale(0.95); }
    40% { opacity: 0.8; transform: scale(0.9); }
    60% { opacity: 0.3; transform: scale(0.85); }
    80% { opacity: 0.1; transform: scale(0.8); }
    100% { opacity: 0; transform: scale(0); }
}
`;

// ÂàõÂª∫Âä®ÁîªÂÆπÂô®HTML
const typewriterHTML = `
<div class="typewriter-screen" id="typewriterScreen">
    <!-- ÊñáÂ≠óÂÆπÂô® -->
    <div class="typewriter-container">
        <!-- ÂàùÂßãÊñáÂ≠ó - ÊâìÂ≠óÊú∫ÊïàÊûú -->
        <div class="typewriter-text" id="typewriterOriginalText">
            <span id="typewriterTypedText"></span><span class="typewriter-cursor" id="typewriterCursor"></span>
        </div>
        
        <!-- ENDÊñáÂ≠ó -->
        <div class="typewriter-end-text" id="typewriterEndText">
            <span id="typewriterEndTypedText"></span><span class="typewriter-end-cursor" id="typewriterEndCursor"></span>
        </div>
    </div>
</div>
`;

// ÂàùÂßãÂåñÊâìÂ≠óÊú∫Âä®ÁîªÁ≥ªÁªü
function initTypewriterAnimation() {
    // Ê∑ªÂä†Ê†∑ÂºèÂà∞È°µÈù¢
    const styleSheet = document.createElement('style');
    styleSheet.textContent = typewriterStyles;
    document.head.appendChild(styleSheet);
    
    // Ê∑ªÂä†HTMLÂÆπÂô®Âà∞È°µÈù¢
    document.body.insertAdjacentHTML('beforeend', typewriterHTML);
    
    console.log("ÊâìÂ≠óÊú∫Âä®ÁîªÁ≥ªÁªüÂ∑≤ÂàùÂßãÂåñ");
}

// ÂêØÂä®ÊâìÂ≠óÊú∫Âä®Áîª
function startTypewriterAnimation() {
    const screen = document.getElementById('typewriterScreen');
    const originalText = document.getElementById('typewriterOriginalText');
    const typedText = document.getElementById('typewriterTypedText');
    const cursor = document.getElementById('typewriterCursor');
    const endText = document.getElementById('typewriterEndText');
    const endTypedText = document.getElementById('typewriterEndTypedText');
    const endCursor = document.getElementById('typewriterEndCursor');
    
    // ÊñáÂ≠óÂÜÖÂÆπ
    const message = "ÊûóÊò≠ÔºöÂà∞Êó∂ÂÄô‰Ω†ÂèØË¶ÅÊâã‰∏ãÁïôÊÉÖÂëÄÔºÅ";
    const endMessage = "END";
    
    // ÊòæÁ§∫Â±èÂπï
    screen.style.display = 'block';
    
    // Á¨¨‰∏ÄÈò∂ÊÆµÔºöÊâìÂ≠óÊú∫ÊïàÊûúÊòæÁ§∫ÊñáÂ≠ó
    function startTypewriter() {
        let index = 0;
        const typingSpeed = 120;
        
        typedText.textContent = "";
        cursor.style.opacity = 1;
        cursor.classList.add('active');
        
        function typeWriter() {
            if (index < message.length) {
                typedText.textContent += message.charAt(index);
                index++;
                
                setTimeout(typeWriter, typingSpeed);
            } else {
                // ÊâìÂ≠óÂÆåÊàêÂêéÔºåÊòæÁ§∫3ÁßíÂêéÂºÄÂßãÈÄêÂ≠óÂõûÈÄÄ
                setTimeout(() => {
                    // ÂºÄÂßãÈÄêÂ≠óÂõûÈÄÄ
                    startBackspaceEffect();
                }, 3000);
            }
        }
        
        // ÂºÄÂßãÊâìÂ≠ó
        setTimeout(typeWriter, 500);
    }
    
    // ÈÄêÂ≠óÂõûÈÄÄÊïàÊûú
    function startBackspaceEffect() {
        const messageChars = typedText.textContent.split('');
        let index = messageChars.length - 1;
        const backspaceSpeed = 80;
        
        function backspace() {
            if (index >= 0) {
                // Ê∑ªÂä†ÂõûÈÄÄÂä®Áîª
                const tempSpan = document.createElement('span');
                tempSpan.textContent = messageChars[index];
                tempSpan.className = 'typewriter-char backspacing';
                tempSpan.style.display = 'inline-block';
                typedText.appendChild(tempSpan);
                
                // ÁßªÈô§ÂéüÂßãÂ≠óÁ¨¶
                typedText.textContent = typedText.textContent.slice(0, -1);
                
                index--;
                
                // ÁßªÈô§Âä®ÁîªÂÖÉÁ¥†
                setTimeout(() => {
                    if (tempSpan.parentNode) {
                        tempSpan.parentNode.removeChild(tempSpan);
                    }
                }, 150);
                
                setTimeout(backspace, backspaceSpeed);
            } else {
                // ÊâÄÊúâÂ≠óÁ¨¶ÂõûÈÄÄÂÆåÊàêÂêé
                setTimeout(() => {
                    // ÈöêËóèÂéüÂßãÊñáÊú¨
                    originalText.style.display = 'none';
                    
                    // ÊòæÁ§∫ENDÊñáÂ≠óÂÆπÂô®
                    endText.style.display = 'block';
                    
                    // ÂºÄÂßãENDÊâìÂ≠óÊú∫ÊïàÊûú
                    startEndTypewriter();
                }, 500);
            }
        }
        
        // ÂºÄÂßãÂõûÈÄÄ
        backspace();
    }
    
    // ENDÊâìÂ≠óÊú∫ÊïàÊûú
    function startEndTypewriter() {
        let index = 0;
        const typingSpeed = 300;
        
        endTypedText.textContent = "";
        endCursor.style.opacity = 1;
        endCursor.classList.add('active');
        
        function typeEnd() {
            if (index < endMessage.length) {
                endTypedText.textContent += endMessage.charAt(index);
                index++;
                
                setTimeout(typeEnd, typingSpeed);
            } else {
                // ENDÊâìÂ≠óÂÆåÊàêÂêéÔºåÂÖâÊ†áÊåÅÁª≠Èó™ÁÉÅ
                setTimeout(() => {
                    // ‰øùÊåÅÂÖâÊ†áÈó™ÁÉÅÔºåÂä®ÁîªÁªìÊùü
                }, 1000);
            }
        }
        
        // ÂºÄÂßãENDÊâìÂ≠ó
        typeEnd();
    }
    
    // ÂºÄÂßãÂä®Áîª
    startTypewriter();
}

// ËÆæÁΩÆÂä®ÁîªËß¶ÂèëÊú∫Âà∂
function setupTypewriterAnimationTrigger() {
    // ÁõëÂê¨Áî®Êà∑ÂèëÈÄÅÊ∂àÊÅØ
    const originalSendUserMessage = window.sendUserMessage;
    if (typeof originalSendUserMessage === 'function') {
        window.sendUserMessage = function() {
            const message = messageInput.value.trim();
            
            // Ë∞ÉÁî®ÂéüÂßãÂáΩÊï∞
            originalSendUserMessage();
            
            // Ê£ÄÊü•ÊòØÂê¶ÂèëÈÄÅ‰∫Ü"ÊúüÂæÖÊàë‰ª¨‰∏ãÊ¨°ËßÅÈù¢"
            if (message === "ÊúüÂæÖÊàë‰ª¨‰∏ãÊ¨°ËßÅÈù¢") {
                // Âª∂Ëøü1ÁßíÂêéÂêØÂä®ÊâìÂ≠óÊú∫Âä®Áîª
                setTimeout(() => {
                    console.log("Ê£ÄÊµãÂà∞'ÊúüÂæÖÊàë‰ª¨‰∏ãÊ¨°ËßÅÈù¢'Ê∂àÊÅØÔºåÂêØÂä®ÊâìÂ≠óÊú∫Âä®Áîª");
                    startTypewriterAnimation();
                }, 1000);
            }
        };
    }
}

// È°µÈù¢Âä†ËΩΩÂÆåÊàêÂêéÂàùÂßãÂåñ
window.addEventListener('DOMContentLoaded', function() {
    // ÂàùÂßãÂåñÊâìÂ≠óÊú∫Âä®ÁîªÁ≥ªÁªü
    initTypewriterAnimation();
    
    // ËÆæÁΩÆËß¶ÂèëÁõëÂê¨
    setupTypewriterAnimationTrigger();
    
    console.log("ÊâìÂ≠óÊú∫Âä®ÁîªÁ≥ªÁªüÂ∑≤ÂáÜÂ§áÂ∞±Áª™ÔºåÂ∞ÜÂú®Áî®Êà∑ÂèëÈÄÅ'ÊúüÂæÖÊàë‰ª¨‰∏ãÊ¨°ËßÅÈù¢'Êó∂Ëß¶Âèë");
});
</script>

<body>
    <!-- ==================== ÊÅêÊÄñGIFÈ°µÈù¢ ==================== -->
    <div class="terror-page" id="terrorPage">
        <!-- ÊÅêÊÄñÂºπÁ™ó -->
        <div class="terror-popup" id="terrorPopup">
            <div class="popup-title">‚ö†Ô∏è ÊÇ®Â•Ω ‚ö†Ô∏è</div>
            <div class="popup-message">
                ÊàëÊòØÁî®Êà∑"ÊûóÊò≠"ÁîµÂ≠êÊâãË°®‰∫∫Â∑•Êô∫ËÉΩ„ÄÇ<br><br>
                2025Âπ¥9Êúà16Êó•18Ôºö30ËÆæÂ§áÂèóÂà∞ÊçüÂùè<br><br>
				‰ª•‰∏ãÊòØËÆæÂ§áÊçüÂùèÂâçÁöÑËá™Âä®ÂΩïÂÉè„ÄÇ<br><br>
                ‰æùÁÖßÊåá‰ª§ÔºåÁé∞Â∞ÜËá™Âä®ÂΩïÂÉèÂèëÈÄÅÁªôÁî®Êà∑ÁöÑÁ¥ßÊÄ•ËÅîÁ≥ª‰∫∫„ÄÇ
            </div>
            <div class="popup-note">
                ÁÇπÂáª"ÁªßÁª≠ËßÇÁúã"Âç≥Ë°®Á§∫ÊÇ®Â∑≤‰∫ÜËß£Âπ∂Êé•ÂèóÂèØËÉΩÁöÑÈ£éÈô©
            </div>
            <button class="close-popup" id="closeTerrorPopup">ÁªßÁª≠ËßÇÁúã</button>
        </div>
        
        <!-- ÂÖ®Â±èGIF -->
        <div class="gif-fullscreen" id="gifFullscreen">
            <img src="" alt="ÊÅêÊÄñGIF" class="terror-gif" id="terrorGif">
        </div>
        
        <!-- ÁâπÊïàÂÖÉÁ¥† -->
        <div class="blood-overlay" id="bloodOverlay"></div>
        <div class="border-flash" id="borderFlash"></div>
    </div>
    
    <!-- ==================== Ë≠¶ÊÉÖÈÄöÊä•È°µÈù¢ ==================== -->
    <div class="police-page" id="policePage">
        <div class="police-container">
            <div class="header-decoration"></div>
            
            <div class="emblem">
                <i class="fas fa-shield-alt"></i>
            </div>
            
            <div class="police-header">
                <div class="police-department">Ê≠¶Èò≥Â∏ÇÂÖ¨ÂÆâÂ±Ä</div>
                <div class="notification-title">Ë≠¶ÊÉÖÈÄöÊä•</div>
                <div class="notification-number">ÔºàÈÄöÊä•ÁºñÂè∑ÔºöÊ≠¶ÂÖ¨ÈÄö„Äî2025„ÄïÁ¨¨087Âè∑Ôºâ</div>
            </div>
            
            <div class="police-content">
                <p>2025Âπ¥9ÊúàÔºåÊàëÂ±ÄÊé•Ëé∑Áæ§‰ºóÂÆûÂêç‰∏æÊä•ÔºåÂèçÊò†ÊàëÂ∏ÇÈùíËãó‰∏≠Â≠¶Â≠òÂú®Ê∂âÂ´åËøùÊ≥ïÁäØÁΩ™Ë°å‰∏∫„ÄÇÊé•Êä•ÂêéÔºåÊàëÂ±ÄÈ´òÂ∫¶ÈáçËßÜÔºåÁ´ãÂç≥ËÅîÂêàÂ∏ÇÊïôËÇ≤Â±Ä„ÄÅÂ∏ÇÂç´ÁîüÂÅ•Â∫∑Âßî„ÄÅÂ∏ÇÂ∏ÇÂú∫ÁõëÁù£ÁÆ°ÁêÜÂ±ÄÁ≠âÈÉ®Èó®ÊàêÁ´ã"9¬∑16"‰∏ìÊ°àÁªÑÔºå‰æùÊ≥ïÂ±ïÂºÄÂÖ®Èù¢Ë∞ÉÊü•„ÄÇ</p>
                
                <p>ÁªèÁºúÂØÜ‰æ¶Êü•ÔºåÁé∞Â∑≤Êü•ÊòéÔºöÈùíËãó‰∏≠Â≠¶Ëá™2020Âπ¥Ëµ∑Ôºå‰ª•ÊâÄË∞ì"Ëã±ÊùêÂüπËÇ≤ËÆ°Âàí"‰∏∫ÂêçÔºåÈïøÊúüÂú®Ê†°ÂÜÖÁªÑÁªáÂÆûÊñΩÈùûÊ≥ïÂü∫Âõ†ÈááÈõÜ„ÄÅ‰∫∫‰ΩìÂÆûÈ™åÂèäÈ£üÂìÅÁîü‰∫ßÁ≠âÁ≥ªÂàóÁäØÁΩ™Ê¥ªÂä®„ÄÇÂÖ∂‰∏ªË¶ÅÁäØÁΩ™‰∫ãÂÆûÂ¶Ç‰∏ãÔºö</p>
                
                <ul class="crime-list">
                    <li>‰∏Ä„ÄÅÈùûÊ≥ïÈááÈõÜÂü∫Âõ†‰∏é‰∫∫‰ΩìÂÆûÈ™åÔºöËØ•Ê†°Âà©Áî®ÂÖ•Â≠¶‰ΩìÊ£ÄÁéØËäÇÔºåÂú®Êú™ÂëäÁü•Â≠¶ÁîüÂèäÁõëÊä§‰∫∫„ÄÅÊú™Ëé∑ÂêàÊ≥ïÊéàÊùÉÁöÑÊÉÖÂÜµ‰∏ãÔºåÁ≥ªÁªüÊÄßÈááÈõÜ„ÄÅÁ≠õÈÄâÂ≠¶ÁîüÁîüÁâ©Ê†∑Êú¨ÔºåÂπ∂Âà©Áî®ÂÖ∂ËÆæÁ´ãÁöÑ"ÈùíËãóÂÜúÂú∫"ËØïÈ™åÂü∫Âú∞ÔºåÂØπÈÉ®ÂàÜÂ≠¶ÁîüÂèäÂ∑≤ÊØï‰∏ö‰∫∫ÂëòËøõË°åÈùûÊ≥ï‰∫∫‰ΩìÊîπÈÄ†ÂÆûÈ™åÔºåÈÄ†ÊàêÂÖ∂Ë∫´‰ΩìÊú∫ËÉΩ‰∏éÂ§ñËßÇÂèëÁîüÂºÇÂ∏∏ÊîπÂèò„ÄÇ</li>
                    
                    <li>‰∫å„ÄÅÈùûÊ≥ïÁîü‰∫ß‰∏éÊäïÊîæËçØÂâÇÔºöËØ•Ê†°ÊâÄÂ±ûÊ†°ÂåªÈô¢Âú®Êú™ÂèñÂæóËçØÂìÅÁîü‰∫ßËÆ∏ÂèØÁöÑÊÉÖÂÜµ‰∏ãÔºåÁßÅËá™ÈÖçÂà∂ÈùûÊ≥ïÂåñÂ≠¶Âà∂ÂâÇÔºåÂΩ±ÂìçÂ≠¶ÁîüÁîüÁêÜÂèäËÆ§Áü•ÂèëËÇ≤„ÄÇ</li>
                    
                    <li>‰∏â„ÄÅÈùûÊ≥ïÈ£üÂìÅÁîü‰∫ß‰∏éÈîÄÂîÆÔºöËØ•Ê†°Âà©Áî®ÂÆûÈ™å‰∫ßÁîüÁöÑ‰∫∫‰ΩìÁîüÁâ©ÊùêÊñôÔºåÂú®ÂÖ∂È£üÂ†ÇÂêéÂé®Âä†Â∑•Âå∫ÂÜÖÈùûÊ≥ïÁîü‰∫ß"Ëã±ÊùêËâØÂìÅ"ÂìÅÁâåÁΩêÂ§¥È£üÂìÅÔºåÂπ∂ÂêëÊ†°ÂÜÖÈÉ®ÂàÜ‰∫∫Âëò‰æõÂ∫î„ÄÇ</li>
                    
                    <li>Âõõ„ÄÅ‰º™ÈÄ†Êñá‰ª∂‰∏éÈöêÁûíÁúüÁõ∏ÔºöË∞ÉÊü•ÂèëÁé∞ÔºåËØ•Ê†°‰∏∫Êé©ÁõñÂÖ∂ËøùÊ≥ïÁäØÁΩ™Ë°å‰∏∫ÂèäÊ†°ÂÜÖÂÆâÂÖ®‰∫ãÊïÖÔºåÂ≠òÂú®‰º™ÈÄ†„ÄÅÂèòÈÄ†Áõ∏ÂÖ≥Êñá‰ª∂ËÆ∞ÂΩïÁöÑË°å‰∏∫ÔºåÂåÖÊã¨‰ΩÜ‰∏çÈôê‰∫é2025Âπ¥3Êúà8Êó•Â≠¶ÁîüÊûóÂèàÊ≠ª‰∫°‰∫ã‰ª∂ÁöÑÊúâÂÖ≥ÊùêÊñô„ÄÇ</li>
                </ul>
                
                <p>ÁõÆÂâçÔºåÊ°à‰ª∂Â§ÑÁΩÆËøõÂ±ïÂ¶Ç‰∏ãÔºö</p>
                
                <ul class="progress-list">
                    <li>‰∫∫ÂëòËß£Êïë‰∏éÊéßÂà∂ÔºöÁé∞Âú∫ÂÆâÂÖ®Ëß£ÊïëÂπ∂Â¶•ÂñÑÂÆâÁΩÆÂ≠¶ÁîüÂÖ±ËÆ°<strong class="emphasis">1500Âêç</strong>„ÄÇÁªèÂ∏ÇÂåªÁñóÂç´Áîü‰∏ìÂÆ∂Âõ¢ÈòüÂÖ®Èù¢‰ΩìÊ£Ä‰∏éÂøÉÁêÜËØÑ‰º∞ÔºåÊâÄÊúâËé∑ÊïëÂ≠¶ÁîüÁîüÂëΩ‰ΩìÂæÅÂπ≥Á®≥ÔºåË∫´‰ΩìÊú∫ËÉΩÊú™ËßÅÁî±Ê°à‰ª∂Áõ¥Êé•ÂºïËµ∑ÁöÑÂô®Ë¥®ÊÄßÂºÇÂ∏∏ÔºåÊÉÖÁª™Áä∂ÊÄÅÂü∫Êú¨Á®≥ÂÆöÔºåÁé∞Â∑≤ÂÖ®ÈÉ®‰∫§Áî±ÂÆ∂ÈïøÊé•ÂõûÂπ∂Êé•ÂèóÂêéÁª≠ÂÖ≥ÊÄÄ„ÄÇ</li>
                    
                    <li>Ê∂âÊ°à‰∫∫Âëò‰∏éÂú∫ÊâÄÊü•Â§ÑÔºöË≠¶ÊñπÂ∑≤‰æùÊ≥ïÂØπÂåÖÊã¨ËØ•Ê†°Ê†°Èïø„ÄÅÊ†°ÂåªÈô¢Ë¥üË¥£‰∫∫„ÄÅÂÜúÂú∫È°πÁõÆ‰∏ªÁÆ°Âú®ÂÜÖÁöÑ<strong class="emphasis">44Âêç</strong>Ê∂âÂ´åÁäØÁΩ™ÁöÑÊ†∏ÂøÉ‰∫∫ÂëòÈááÂèñÂàë‰∫ãÂº∫Âà∂Êé™ÊñΩ„ÄÇÊ∂âÊ°àÁöÑ"ÈùíËãóÂÜúÂú∫"ËØïÈ™åÂü∫Âú∞„ÄÅÊ†°ÂåªÈô¢ÁâπÊÆäÂà∂ÂâÇÂÆ§„ÄÅÈ£üÂ†ÇÈùûÊ≥ïÂä†Â∑•Âå∫Á≠â<strong class="emphasis">17Â§Ñ</strong>Âú∫ÊâÄÂ∑≤Ë¢´‰æùÊ≥ïÊü•Â∞ÅÔºåÁõ∏ÂÖ≥ÂÆûÈ™åËÆæÂ§á„ÄÅÂà∂ÂâÇÂéüÊñô„ÄÅÁîü‰∫ßÂ∑•ÂÖ∑ÂèäÊ∂âÊ°àÈ£üÂìÅÂùáË¢´Êâ£Êäº„ÄÇ</li>
                    
                    <li>ÈùûÊ≥ïÊ¥ªÂä®Ë¢´Âà∂Ê≠¢ÔºöÁõ∏ÂÖ≥ÈùûÊ≥ï‰∫∫‰ΩìÂÆûÈ™å„ÄÅÈùûÊ≥ïËçØÂâÇÈÖçÂà∂‰∏éÊäïÊîæ„ÄÅÈùûÊ≥ïÈ£üÂìÅÂä†Â∑•Á≠âÁäØÁΩ™Ë°å‰∏∫Â∑≤Ë¢´ÊúâÊïàÂà∂Ê≠¢ÔºåÂΩªÂ∫ïÊ∂àÈô§‰∫ÜÂÖ∂ÂØπÂ∏àÁîüÂÅ•Â∫∑ÁöÑÁõ¥Êé•Âç±ÂÆ≥È£éÈô©„ÄÇ</li>
                    
                    <li>ËØÅÊçÆÂõ∫ÂÆö‰∏éÊ∑±ÊåñÔºö‰∏ìÊ°àÁªÑÂ∑≤ÊèêÂèñÂπ∂Âõ∫ÂÆöÂ§ßÈáèÁîµÂ≠êËØÅÊçÆ„ÄÅÊñá‰π¶ËØÅÊçÆÂèäÁâ©ËØÅÔºåÊâ£ÊäºÊ∂âÊ°àÊúçÂä°Âô®„ÄÅÂÆûÈ™åËÆ∞ÂΩï„ÄÅË¥¢Âä°Ë¥¶ÂÜåËã•Âπ≤„ÄÇÂØπ‰∫éÊ°à‰ª∂Ê∂âÂèäÁöÑ"Á±ª‰∫∫ÁîüÁâ©‰Ωì"Êù•Ê∫ê„ÄÅÂü∫Âõ†Êï∞ÊçÆÊµÅÂêë„ÄÅÊ†°Â§ñÈîÄÂîÆÁΩëÁªúÁ≠âÂª∂‰º∏Á∫øÁ¥¢ÔºåË≠¶ÊñπÊ≠£Âú®‰ºöÂêåÁõ∏ÂÖ≥ÊäÄÊúØÈÉ®Èó®ÂèäÂÖÑÂºüÂçï‰ΩçÊ∑±ÂÖ•ÂºÄÂ±ïË∞ÉÊü•„ÄÇ</li>
                </ul>
                
                <div class="conclusion">
                    <p><strong class="emphasis">ÈùíËãó‰∏≠Â≠¶Ê°à‰ª∂ÊòØ‰∏ÄËµ∑ÊÄßË¥®ÊûÅÂÖ∂ÊÅ∂Âä£„ÄÅÊâãÊÆµÈöêËîΩ„ÄÅÂç±ÂÆ≥‰∏•ÈáçÁöÑÈõÜÂõ¢ÁäØÁΩ™„ÄÇ</strong>ÂÖ∂Ë°å‰∏∫‰∏•ÈáçË∑µË∏èÊ≥ïÂæãÂ∞ä‰∏•Ôºå‰æµÂÆ≥ÂÖ¨Ê∞ëÂü∫Êú¨ÊùÉÂà©ÔºåÂç±ÂÆ≥Á§æ‰ºöÂÖ¨ÂÖ±ÂÆâÂÖ®‰∏éÈ£üÂìÅÂÆâÂÖ®Â∫ïÁ∫ø„ÄÇÂÖ¨ÂÆâÊú∫ÂÖ≥ÂùöÂÜ≥‰æùÊ≥ï‰∏•ÂéâÊâìÂáªÊ≠§Á±ªÁäØÁΩ™ÔºåÁª¥Êä§‰∫∫Ê∞ëÁæ§‰ºóÁîüÂëΩÂÅ•Â∫∑ÂÆâÂÖ®‰∏éÁ§æ‰ºöÂÖ¨Âπ≥Ê≠£‰πâ„ÄÇ</p>
                </div>
                
                <p>ÁõÆÂâçÔºåÊ°à‰ª∂Ê≠£Âú®Ëøõ‰∏ÄÊ≠•‰æ¶Âäû‰∏≠„ÄÇÂÖ¨ÂÆâÊú∫ÂÖ≥Êï¶‰øÉÂÖ∂‰ªñÊ∂âÊ°à‰∫∫ÂëòÂ∞ΩÂø´ÊäïÊ°àËá™È¶ñÔºåÂπ∂ÂëºÂêÅÂπøÂ§ßÁæ§‰ºóÁªßÁª≠Êèê‰æõÁõ∏ÂÖ≥Á∫øÁ¥¢„ÄÇ</p>
            </div>
            
            <div class="contact-info">
                <p>‰∏æÊä•ÁîµËØùÔºöÊ≠¶Èò≥Â∏ÇÂÖ¨ÂÆâÂ±ÄÂàë‰æ¶ÊîØÈòü</p>
                <div class="phone">0515-XXXXXXXX</div>
            </div>
            
            <div class="police-footer">
                <div class="date">2025Âπ¥10Êúà17Êó•</div>
                <div class="stamp">
                    <div class="stamp-content">Ê≠¶Èò≥Â∏ÇÂÖ¨ÂÆâÂ±Ä</div>
                </div>
                <div>
                    <button class="back-to-chat-btn" id="backToChatBtn">ËøîÂõûËÅäÂ§©ÁïåÈù¢</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- ==================== ÂéüÊúâÈ°µÈù¢ÁªìÊûÑ ==================== -->
    <!-- ÈÇÆ‰ª∂ÂºπÁ™ó -->
    <div class="email-modal" id="emailModal">
        <div class="email-modal-content">
            <div class="email-modal-header">
                <h2>üìß Á¥ßÊÄ•ÈÇÆ‰ª∂</h2>
                <p>Âèë‰ª∂‰∫∫: ÊûóÊò≠ &lt;linzhao@retro-mail.com&gt; | ÂèëÈÄÅÊó∂Èó¥: 2025Âπ¥5Êúà10Êó• 22:47</p>
            </div>
            <div class="email-modal-body" id="emailContent">
                <!-- ÈÇÆ‰ª∂ÂÜÖÂÆπÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÊ∑ªÂä† -->
            </div>
            <div class="email-modal-close" id="closeEmailBtn">
                ‚úï
            </div>
        </div>
    </div>
    
    <!-- ‰∏æÊä•‰ø°ÂºπÁ™ó -->
    <div class="report-modal" id="reportModal">
        <div class="report-modal-content">
            <div class="report-modal-header">
                <h2>üìÑ ÂÖ≥‰∫éÈùíËãó‰∏≠Â≠¶Ê∂âÂ´åËøùÊ≥ïÁäØÁΩ™Ë°å‰∏∫ÁöÑÂåøÂêç‰∏æÊä•‰ø°</h2>
                <p>ËØ∑Â°´ÂÜô‰ª•‰∏ã‰ø°ÊÅØÂêéÊèê‰∫§‰∏æÊä•</p>
            </div>
            <div class="report-modal-body" id="reportContent">
                <!-- ‰∏æÊä•‰ø°ÂÜÖÂÆπÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÊ∑ªÂä† -->
            </div>
        </div>
    </div>
    
    <!-- ÂΩïÈü≥Êí≠ÊîæÂºπÁ™ó -->
    <div class="recording-modal" id="recordingModal">
        <div class="crt-screen"></div>
        <div class="warning-flash" id="recordingWarningFlash"></div>
        <div class="sound-indicator" id="recordingSoundIndicator">
            <div class="sound-dot"></div>
            <div class="sound-dot"></div>
            <div class="sound-dot"></div>
        </div>
        <div class="recording-content-wrapper">
            <div class="recording-header">
                <h2 class="recording-title">#Êù•Ëá™„ÄêÊûóÊò≠„Äë</h2>
                <div class="recording-subtitle">ÂÆö‰ΩçÂú∞ÁÇπÔºöÈùíËãó‰∏≠Â≠¶-ÂΩïÈü≥ËΩ¨ÊñáÂ≠ó</div>
            </div>
            <div class="recording-content">
                <div class="scroll-line"></div>
                <div class="typehead"></div>
                <div class="recording-transcript" id="recordingTranscript">
                    <!-- ÂΩïÈü≥ÂÜÖÂÆπÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÊ∑ªÂä† -->
                </div>
            </div>
            <div class="recording-footer">
                ÂΩïÈü≥Êí≠ÊîæÂÆåÊØï
            </div>
        </div>
    </div>
    
    <!-- ‰∏ªÂÆπÂô® -->
    <div class="container" id="mainContainer" style="display: none;">
        <div class="header">
            <h1>üìß 404ÁöÑÈÇÆÁÆ±Á≥ªÁªü</h1>
            <p>ÂΩìÂâçÁî®Êà∑: 404 | Êî∂‰ª∂ÁÆ±: 5Â∞ÅÊú™ËØªÈÇÆ‰ª∂</p>
            <div class="urgent-badge">Á¥ßÊÄ•ÈÇÆ‰ª∂</div>
        </div>
        
        <div class="main-content">
            <div class="sidebar">
                <ul class="mail-list">
					<li class="mail-item active unread" data-mail="linzhao">
                        <div class="sender">ÊûóÊò≠</div>
                        <div class="subject">ÊÄ•ÔºÅÊàëÂì•ÁöÑ‰∫ãÊÉÖÔºåÁúüÁöÑÂè™ËÉΩÈù†‰Ω†‰∫ÜÔºÅÔºÅ</div>
                        <div class="time">2025Âπ¥5Êúà10Êó• 22:47</div>
                    </li>
                    <li class="mail-item" data-mail="hackjob">
                        <div class="sender">Êú™Áü•Âèë‰ª∂‰∫∫</div>
                        <div class="subject">È´òËñ™ÂßîÊâò - Êï∞ÊçÆÊÅ¢Â§çÈ°πÁõÆ</div>
                        <div class="time">2025Âπ¥5Êúà5Êó• 14:23</div>
                    </li>
                    <li class="mail-item" data-mail="cybercontest">
                        <div class="sender">ÂÖ®ÂõΩÁΩëÁªúÂÆâÂÖ®Â§ßËµõÁªÑÂßî‰ºö</div>
                        <div class="subject">ÊÅ≠ÂñúÊÇ®Ëé∑Âæó2025ÂÖ®ÂõΩÁΩëÁªúÂÆâÂÖ®Â§ßËµõ‰∏ÄÁ≠âÂ•ñ</div>
                        <div class="time">2025Âπ¥4Êúà28Êó• 09:15</div>
                    </li>
                    <li class="mail-item" data-mail="computersociety">
                        <div class="sender">ËÆ°ÁÆóÊú∫Á§æÂõ¢</div>
                        <div class="subject">Êú¨Âë®Á§æÂõ¢Ê¥ªÂä®ÈÄöÁü• - ÈÄÜÂêëÂ∑•Á®ãÂÆûÊàò</div>
                        <div class="time">2025Âπ¥4Êúà25Êó• 16:42</div>
                    </li>
                </ul>
            </div>
            
            <div class="mail-content">
                <div class="mail-header">
                    <h2>ÊÄ•ÔºÅÊàëÂì•ÁöÑ‰∫ãÊÉÖÔºåÁúüÁöÑÂè™ËÉΩÈù†‰Ω†‰∫ÜÔºÅÔºÅÔºÅ</h2>
                    <div class="mail-info">
                        <div>Âèë‰ª∂‰∫∫: ÊûóÊò≠ &lt;linzhao@retro-mail.com&gt;</div>
                        <div>ÂèëÈÄÅÊó∂Èó¥: 2025Âπ¥5Êúà10Êó• 22:47</div>
                    </div>
                </div>
                
                <div class="mail-body">
<strong>404Â§ßÁ•ûÔºö</strong>

ÊàëÊòØÊûóÊò≠ÔºÅËøòËÆ∞ÂæóÂêóÔºüÂ∞±ÊòØËÆ°ÁÆóÊú∫Á§æÂõ¢ÈÇ£‰∏™ÊÄªÁº†ÁùÄ‰Ω†ÈóÆ‰ª£Á†ÅbugÁöÑÂÆ∂‰ºôÔºÅ‰ªäÂ§©Á™ÅÁÑ∂Êâæ‰Ω†ÔºåÊòØÂõ†‰∏∫Êúâ‰∏Ä‰ª∂ÁâπÂà´ÈáçË¶ÅÁöÑ‰∫ãÊÉÖÔºåÂèØËÉΩÁúüÁöÑÂè™Êúâ‰Ω†ËÉΩÂ∏ÆÊàë‰∫Ü„ÄÇ

ÊàëË∑ü‰Ω†ËØ¥ËØ¥ÊÉÖÂÜµÔºöÊàëÂì•ÊûóÂèàÔºå‰∏§Âπ¥ÂâçË∂ÖÁ•ûÂèëÊå•ËÄÉËøõ‰∫ÜÈùíËãó‰∏≠Â≠¶ÔºåÈÇ£Êó∂ÂÄôÊàë‰ª¨ÂÖ®ÂÆ∂ÈÉΩÂæà‰∏∫‰ªñÈ™ÑÂÇ≤ÔºÅ

‰ΩÜÈ´ò‰∏â‰πãÂêéÔºå‰ªñÊï¥‰∏™‰∫∫Â∞±‰∏çÂ§™ÂØπÂä≤‰∫Ü„ÄÇÊØèÂë®ÂõõÁªôÂÆ∂ÈáåÊâìÁîµËØùÔºåÊÄªËØ¥Ë∑üÂêåÂ≠¶Â§Ñ‰∏çÊù•ÔºåÂøÉÊÉÖ‰πüË∂äÊù•Ë∂ädown„ÄÇÂ≠¶Ê†°ÁÆ°ÂæóÂ∑®‰∏•ÔºåÂÆåÂÖ®ÊòØÂÖ®Â∞ÅÈó≠ÂºèÔºåÊàë‰ª¨Èô§‰∫ÜÁîµËØùÈáåËØ¥Âá†Âè•"Âä†Ê≤π"ÔºåÂï•‰πüÂÅö‰∏ç‰∫Ü„ÄÇ

ÂèØÂ•áÊÄ™ÁöÑÊòØÊúÄÂêé‰∏ÄÊ¨°ÈÄöËØùÔºå‰ªñÊï¥‰∏™‰∫∫Á™ÅÁÑ∂"Èò≥ÂÖâÂºÄÊúó"‰∫ÜËµ∑Êù•ÔºåËØ≠Ê∞îÁßØÊûÅÂà∞ÂÉèÊç¢‰∫Ü‰∏™‰∫∫ÔºåÁîöËá≥ËøòÂÆâÂà©ÊàëÔºö"Ë¶Å‰∏ç‰Ω†‰πüËÄÉÈùíËãóÂêßÔºÅ"ÊàëÂΩìÊó∂Â∞±ËßâÂæóÊúâÁÇπ‰∏çÂØπÂä≤Ôºå‰ΩÜÂèàÂõ†‰∏∫‰ªñÁä∂ÊÄÅÂ•ΩËΩ¨ËÄåÁ®çÂæÆÊùæ‰∫ÜÂè£Ê∞î„ÄÇÁªìÊûúÊ≤°ËøáÂ§ö‰πÖÔºåÂ≠¶Ê†°Â∞±ÈÄöÁü•Êàë‰ª¨Ôºö‰ªñ‰∏äÂêäËá™ÊùÄ‰∫Ü„ÄÇ

ÊàëÁúüÁöÑÊ≤°ÂäûÊ≥ïÊé•ÂèóÂïäÔºÅÔºÅÔºÅ

Ë≠¶ÊñπÂíåÊ†°ÊñπÈÉΩËØ¥ÊòØÂõ†‰∏∫"Â≠¶‰∏öÂéãÂäõÂ§ß"Ôºå‰ΩÜÊàëÂì•ÊúÄÂêéÈÇ£ÈÄöÁîµËØùÁöÑÁä∂ÊÄÅÔºåÊòéÊòéÂ∞±ÂÆåÂÖ®‰∏çÂÉèË¶ÅËá™ÊùÄÁöÑÊ†∑Â≠ê,ËÄå‰∏îÈÇ£ÈÄöÁîµËØùÊú¨Êù•‰πüÂæàÂ•áÊÄ™ÂïäÂñÇÔºÅÁà∏Â¶àÊï¥‰∏™‰∫∫ÈÉΩÂ¥©Ê∫É‰∫ÜÔºåËÄåÈùíËãó‰∏≠Â≠¶ÂèàÂÅèÂæóË¶ÅÂëΩÔºå‰ø°ÊÅØËøòÂ∞ÅÈó≠ÔºåÂ§ñÈù¢ÁöÑ‰∫∫Ê†πÊú¨‰∏çÁü•ÈÅìÈáåÈù¢ÂèëÁîü‰∫Ü‰ªÄ‰πà„ÄÇ

ÊâÄ‰ª•ÊàëÂÜ≥ÂÆö‰∫≤Ëá™Âéª‰∏ÄË∂ü„ÄÇ‰∏ÄÊñπÈù¢ÊòØÊÉ≥Êü•Ê∏ÖÁúüÁõ∏ÔºåÂè¶‰∏ÄÊñπÈù¢‰πüÁÆóÊòØÂÆåÊàêÊàëÂì•ÊúÄÂêéÁöÑÂª∫ËÆÆÂêßÔºàÊ≤°ÈîôÊàëÁúüÁöÑËÄÉËøõÊù•‰∫ÜÂìàÂìàÔºâ„ÄÇÁé∞Âú®ÊàëÂ∑≤ÁªèÂú®ËøôÊâÄÂ≠¶Ê†°Èáå‰∫ÜÔºå‰ΩÜÂõ†‰∏∫Ê†°ËßÑË∂Ö‰∏•ÔºåÁîµÂ≠êËÆæÂ§á‰∏ÄÂæãÁ¶ÅÂ∏¶ÔºåÊàëÂè™ËÉΩÂÅ∑ÂÅ∑Â∏¶Âè™Êô∫ËÉΩÊâãË°®ËøõÊù•ÔºåËøôËøòÊòØÊîπÈÄ†ËøáÁöÑÁâàÊú¨ÔºåÂãâÂº∫ËÉΩÈÅøÂºÄ‰ø°Âè∑Â±èËîΩË∑ü‰Ω†ËÅîÁ≥ª„ÄÇ

ÊàëÁü•ÈÅìËøô‰∫ãÂÑø‰∏çÂÆπÊòìÔºå‰πüÂèØËÉΩÊúâÁÇπÊïèÊÑüÔºå‰ΩÜÊàëÁé∞Âú®ÁúüÁöÑÂè™‰ø°ÂæóËøá‰Ω†‰∫Üüò¢

Â¶ÇÊûú‰Ω†ÊÑøÊÑèÂ∏ÆÊàëÔºå‰∏ÄÂÆöË¶ÅÂõûÊàëÈÇÆ‰ª∂ÂïäÔºÅÊàëËøôÊâãË°®ËôΩÁÑ∂ËÉΩË∫≤Â±èËîΩÔºå‰ΩÜ‰ø°Âè∑‰πü‰∏çÁ®≥ÔºåÊàë‰ºöÂ∞ΩÈáèÊâæÊú∫‰ºö‰∏äÁ∫øÁúãÁúã„ÄÇ

‰∏çÁÆ°ÊÄéÊ†∑ÔºåÁúüÁöÑË∂ÖÊÑüË∞¢‰Ω†ÊÑøÊÑèÁúãÂà∞ËøôÈáåÔºÅ

<strong>Á≠â‰Ω†Ê∂àÊÅØÔºÅ</strong>

ÊûóÊò≠
                </div>
                
                <div class="chat-section">
                    <h3>‰∏éÊûóÊò≠ÁöÑÂØπËØù <span class="chat-date" id="currentDate">2025.08.31 23:30</span></h3>
                    
                    <div class="chat-container">
                        <div class="chat-window" id="chatWindow">
                            <!-- ËÅäÂ§©ÂÜÖÂÆπÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÊ∑ªÂä† -->
                        </div>
                        
                        <div class="typing-indicator" id="typingIndicator">
                            <span class="typing-text">ÊûóÊò≠Ê≠£Âú®ËæìÂÖ•</span>
                            <div class="typing-dots">
                                <span></span>
                                <span></span>
                                <span></span>
                            </div>
                        </div>
                        
                        <div class="chat-input-area">
                            <input type="text" class="chat-input" id="messageInput" placeholder="ËæìÂÖ•Ê∂àÊÅØÂèëÈÄÅÁªôÊûóÊò≠...">
                            <button class="send-button" id="sendButton">ÂèëÈÄÅ</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="footer">
            <p>ÂÖçË¥£Â£∞ÊòéÔºöÊú¨ÁΩëÁ´ô‰∏∫ËôöÊãüÊ∏∏ÊàèÁïåÈù¢ÔºåÊâÄÊúâÂÜÖÂÆπÂùá‰∏∫ËôöÊûÑÔºå‰∏éÁé∞ÂÆûÊó†ÂÖ≥„ÄÇÈÇÆÁÆ±Á≥ªÁªüÂèäÂØπËØùÂÜÖÂÆπ‰ªÖ‰∏∫Â®±‰πêÁõÆÁöÑËÆæËÆ°„ÄÇ</p>
        </div>
    </div>

    <script>
        // ==================== ÊÅêÊÄñGIFÂäüËÉΩ ====================
        // Ëé∑ÂèñÊÅêÊÄñÈ°µÈù¢DOMÂÖÉÁ¥†
        const terrorPage = document.getElementById('terrorPage');
        const terrorPopup = document.getElementById('terrorPopup');
        const closeTerrorPopup = document.getElementById('closeTerrorPopup');
        const terrorGif = document.getElementById('terrorGif');
        const gifFullscreen = document.getElementById('gifFullscreen');
        const bloodOverlay = document.getElementById('bloodOverlay');
        const borderFlash = document.getElementById('borderFlash');
        
        // GIF URL
        const gifUrl = "https://i.ibb.co/xtHg4jt3/325ac8fb06d447c451185c7ae5a9adb7.gif";
        
        // GIFÁä∂ÊÄÅÂèòÈáè
        let gifPlayed = false;
        let gifDuration = 7000; // GIFÊí≠ÊîæÊåÅÁª≠Êó∂Èó¥
        
        // ÂÖ≥Èó≠ÂºπÁ™óÂπ∂ÂºÄÂßãÊí≠ÊîæGIF
        closeTerrorPopup.addEventListener('click', function() {
            // ÈöêËóèÂºπÁ™ó
            terrorPopup.style.display = 'none';
            
            // ÊòæÁ§∫GIFÂíåÁâπÊïà
            gifFullscreen.style.display = 'flex';
            terrorGif.style.display = 'block';
            bloodOverlay.style.display = 'block';
            borderFlash.style.display = 'block';
            
            // ËÆæÁΩÆGIFÊ∫êÔºåÂºÄÂßãÊí≠Êîæ
            terrorGif.src = gifUrl;
            gifPlayed = true;
            
            // ÂàõÂª∫Ë°ÄÊª¥ÁâπÊïà
            createBloodDrip();
            setInterval(createBloodDrip, 3500);
            
            // Ê†πÊçÆGIFÊåÅÁª≠Êó∂Èó¥ËÆæÁΩÆË∑≥ËΩ¨
            setTimeout(function() {
                // GIFÊí≠ÊîæÂÆåÊØïÂêéÂàáÊç¢Âà∞Ë≠¶ÊÉÖÈÄöÊä•È°µÈù¢
                terrorPage.style.display = 'none';
                showPolicePage();
            }, gifDuration);
        });
        
        // ÂàõÂª∫ÈöèÊú∫Ë°ÄÊª¥
        function createBloodDrip() {
            if (!gifPlayed) return;
            
            const drip = document.createElement('div');
            drip.className = 'blood-drip';
            drip.style.left = Math.random() * 100 + '%';
            drip.style.animationDuration = (Math.random() * 5 + 5) + 's';
            drip.style.animationDelay = Math.random() * 5 + 's';
            drip.style.height = (Math.random() * 200 + 100) + 'px';
            drip.style.opacity = Math.random() * 0.6 + 0.3;
            drip.style.display = 'block';
            
            document.body.appendChild(drip);
            
            // Âä®ÁîªÁªìÊùüÂêéÁßªÈô§ÂÖÉÁ¥†
            setTimeout(() => {
                if (drip.parentNode) {
                    drip.parentNode.removeChild(drip);
                }
            }, 15000);
        }
        
        // ==================== Ë≠¶ÊÉÖÈÄöÊä•È°µÈù¢ÂäüËÉΩ ====================
        const policePage = document.getElementById('policePage');
        const backToChatBtn = document.getElementById('backToChatBtn');
        
        // ÊòæÁ§∫Ë≠¶ÊÉÖÈÄöÊä•È°µÈù¢
        function showPolicePage() {
            policePage.style.display = 'block';
        }
        
        // ËøîÂõûËÅäÂ§©ÁïåÈù¢
        backToChatBtn.addEventListener('click', function() {
            policePage.style.display = 'none';
            // ÁªßÁª≠ËÅäÂ§©ÊµÅÁ®ã
            currentKeyword = "‰Ω†ËøòÂ•ΩÂêó";
            systemPromptShown = false;
            showSystemPrompt();
        });
        
        // ==================== ÂéüÊúâ‰ª£Á†ÅÔºà‰øùÊåÅÂéüÊ†∑Ôºâ ====================
        // ====================== ÂàùÂßãÂåñÈÇÆ‰ª∂ÂºπÁ™óÂÜÖÂÆπ ======================
        const emailContent = document.getElementById('emailContent');
        const originalEmail = `‰∏ªÈ¢òÔºöÊÄ•ÔºÅÊàëÂì•ÁöÑ‰∫ãÊÉÖÔºåÁúüÁöÑÂè™ËÉΩÈù†‰Ω†‰∫ÜÔºÅÔºÅÔºÅ

404Â§ßÁ•ûÔºö

ÊàëÊòØÊûóÊò≠ÔºÅËøòËÆ∞ÂæóÂêóÔºüÂ∞±ÊòØËÆ°ÁÆóÊú∫Á§æÂõ¢ÈÇ£‰∏™ÊÄªÁº†ÁùÄ‰Ω†ÈóÆ‰ª£Á†ÅbugÁöÑÂÆ∂‰ºôÔºÅ‰ªäÂ§©Á™ÅÁÑ∂Êâæ‰Ω†ÔºåÊòØÂõ†‰∏∫Êúâ‰∏Ä‰ª∂ÁâπÂà´ÈáçË¶ÅÁöÑ‰∫ãÊÉÖÔºåÂèØËÉΩÁúüÁöÑÂè™Êúâ‰Ω†ËÉΩÂ∏ÆÊàë‰∫Ü„ÄÇ

ÊàëË∑ü‰Ω†ËØ¥ËØ¥ÊÉÖÂÜµÔºöÊàëÂì•ÊûóÂèàÔºå‰∏§Âπ¥ÂâçË∂ÖÁ•ûÂèëÊå•ËÄÉËøõ‰∫ÜÈùíËãó‰∏≠Â≠¶ÔºåÈÇ£Êó∂ÂÄôÊàë‰ª¨ÂÖ®ÂÆ∂ÈÉΩÂæà‰∏∫‰ªñÈ™ÑÂÇ≤ÔºÅ

‰ΩÜÈ´ò‰∏â‰πãÂêéÔºå‰ªñÊï¥‰∏™‰∫∫Â∞±‰∏çÂ§™ÂØπÂä≤‰∫Ü„ÄÇÊØèÂë®ÂõõÁªôÂÆ∂ÈáåÊâìÁîµËØùÔºåÊÄªËØ¥Ë∑üÂêåÂ≠¶Â§Ñ‰∏çÊù•ÔºåÂøÉÊÉÖ‰πüË∂äÊù•Ë∂ädown„ÄÇÂ≠¶Ê†°ÁÆ°ÂæóÂ∑®‰∏•ÔºåÂÆåÂÖ®ÊòØÂÖ®Â∞ÅÈó≠ÂºèÔºåÊàë‰ª¨Èô§‰∫ÜÁîµËØùÈáåËØ¥Âá†Âè•"Âä†Ê≤π"ÔºåÂï•‰πüÂÅö‰∏ç‰∫Ü„ÄÇ

ÂèØÂ•áÊÄ™ÁöÑÊòØÊúÄÂêé‰∏ÄÊ¨°ÈÄöËØùÔºå‰ªñÊï¥‰∏™‰∫∫Á™ÅÁÑ∂"Èò≥ÂÖâÂºÄÊúó"‰∫ÜËµ∑Êù•ÔºåËØ≠Ê∞îÁßØÊûÅÂà∞ÂÉèÊç¢‰∫Ü‰∏™‰∫∫ÔºåÁîöËá≥ËøòÂÆâÂà©ÊàëÔºö"Ë¶Å‰∏ç‰Ω†‰πüËÄÉÈùíËãóÂêßÔºÅ"ÊàëÂΩìÊó∂Â∞±ËßâÂæóÊúâÁÇπ‰∏çÂØπÂä≤Ôºå‰ΩÜÂèàÂõ†‰∏∫‰ªñÁä∂ÊÄÅÂ•ΩËΩ¨ËÄåÁ®çÂæÆÊùæ‰∫ÜÂè£Ê∞î„ÄÇÁªìÊûúÊ≤°ËøáÂ§ö‰πÖÔºåÂ≠¶Ê†°Â∞±ÈÄöÁü•Êàë‰ª¨Ôºö‰ªñ‰∏äÂêäËá™ÊùÄ‰∫Ü„ÄÇ

ÊàëÁúüÁöÑÊ≤°ÂäûÊ≥ïÊé•ÂèóÂïäÔºÅÔºÅÔºÅ

Ë≠¶ÊñπÂíåÊ†°ÊñπÈÉΩËØ¥ÊòØÂõ†‰∏∫"Â≠¶‰∏öÂéãÂäõÂ§ß"Ôºå‰ΩÜÊàëÂì•ÊúÄÂêéÈÇ£ÈÄöÁîµËØùÁöÑÁä∂ÊÄÅÔºåÊòéÊòéÂ∞±ÂÆåÂÖ®‰∏çÂÉèË¶ÅËá™ÊùÄÁöÑÊ†∑Â≠ê,ËÄå‰∏îÈÇ£ÈÄöÁîµËØùÊú¨Êù•‰πüÂæàÂ•áÊÄ™ÂïäÂñÇÔºÅÁà∏Â¶àÊï¥‰∏™‰∫∫ÈÉΩÂ¥©Ê∫É‰∫ÜÔºåËÄåÈùíËãó‰∏≠Â≠¶ÂèàÂÅèÂæóË¶ÅÂëΩÔºå‰ø°ÊÅØËøòÂ∞ÅÈó≠ÔºåÂ§ñÈù¢ÁöÑ‰∫∫Ê†πÊú¨‰∏çÁü•ÈÅìÈáåÈù¢ÂèëÁîü‰∫Ü‰ªÄ‰πà„ÄÇ

ÊâÄ‰ª•ÊàëÂÜ≥ÂÆö‰∫≤Ëá™Âéª‰∏ÄË∂ü„ÄÇ‰∏ÄÊñπÈù¢ÊòØÊÉ≥Êü•Ê∏ÖÁúüÁõ∏ÔºåÂè¶‰∏ÄÊñπÈù¢‰πüÁÆóÊòØÂÆåÊàêÊàëÂì•ÊúÄÂêéÁöÑÂª∫ËÆÆÂêßÔºàÊ≤°ÈîôÊàëÁúüÁöÑËÄÉËøõÊù•‰∫ÜÂìàÂìàÔºâ„ÄÇÁé∞Âú®ÊàëÂ∑≤ÁªèÂú®ËøôÊâÄÂ≠¶Ê†°Èáå‰∫ÜÔºå‰ΩÜÂõ†‰∏∫Ê†°ËßÑË∂Ö‰∏•ÔºåÁîµÂ≠êËÆæÂ§á‰∏ÄÂæãÁ¶ÅÂ∏¶ÔºåÊàëÂè™ËÉΩÂÅ∑ÂÅ∑Â∏¶Âè™Êô∫ËÉΩÊâãË°®ËøõÊù•ÔºåËøôËøòÊòØÊîπÈÄ†ËøáÁöÑÁâàÊú¨ÔºåÂãâÂº∫ËÉΩÈÅøÂºÄ‰ø°Âè∑Â±èËîΩË∑ü‰Ω†ËÅîÁ≥ª„ÄÇ

ÊàëÁü•ÈÅìËøô‰∫ãÂÑø‰∏çÂÆπÊòìÔºå‰πüÂèØËÉΩÊúâÁÇπÊïèÊÑüÔºå‰ΩÜÊàëÁé∞Âú®ÁúüÁöÑÂè™‰ø°ÂæóËøá‰Ω†‰∫Üüò¢

Â¶ÇÊûú‰Ω†ÊÑøÊÑèÂ∏ÆÊàëÔºå‰∏ÄÂÆöË¶ÅÂõûÊàëÈÇÆ‰ª∂ÂïäÔºÅÊàëËøôÊâãË°®ËôΩÁÑ∂ËÉΩË∫≤Â±èËîΩÔºå‰ΩÜ‰ø°Âè∑‰πü‰∏çÁ®≥ÔºåÊàë‰ºöÂ∞ΩÈáèÊâæÊú∫‰ºö‰∏äÁ∫øÁúãÁúã„ÄÇ

‰∏çÁÆ°ÊÄéÊ†∑ÔºåÁúüÁöÑË∂ÖÊÑüË∞¢‰Ω†ÊÑøÊÑèÁúãÂà∞ËøôÈáåÔºÅ

Á≠â‰Ω†Ê∂àÊÅØÔºÅ

ÊûóÊò≠`;
        
        // Â∞ÜÈÇÆ‰ª∂ÂÜÖÂÆπÊ∑ªÂä†Âà∞ÂºπÁ™ó‰∏≠Ôºå‰øùÁïôÊ†ºÂºè
        emailContent.innerHTML = originalEmail.replace(/\n/g, '<br>').replace(/1\./g, '<br>1.').replace(/2\./g, '<br>2.').replace(/3\./g, '<br>3.');
        
		// ====================== ÂõæÁâáURLÊò†Â∞ÑÈÖçÁΩÆ ======================
        const imageUrlMapping = {
            "Êó©È§êÂõæÁâá.jpg": "https://i.imgs.ovh/2026/01/02/Ci6Nrm.jpeg",
            "È£üÂ†ÇËèúÂçïÂõæÁâá.jpg": "https://i.imgs.ovh/2026/01/02/Ci8fxY.md.png",
            "ÂÆøËàçÂÆàÂàô.jpg": "https://i.imgs.ovh/2026/01/02/Ci6is9.md.jpeg",
            "Ê†°Âõ≠Âç°ÁÖßÁâá.jpg": "https://i.imgs.ovh/2026/01/02/Ci8COp.md.jpeg",
            "ÂÇ®Áâ©ÊüúÂØÜÁ†ÅÈîÅ.jpg": "https://i.imgs.ovh/2026/01/02/Ci61xF.md.jpeg",
			"ÂΩïÈü≥Êñá‰ª∂ÂõæÁâá.jpg":"https://i.imgs.ovh/2026/01/02/Ci8vvb.md.jpeg",
            "Ë∫´‰∏äÁöÑÂàíÁóïÂõæÁâá.jpg": "https://i.imgs.ovh/2026/01/02/CiQ3tY.md.jpeg",
			"‰∏ÄÂ†ÜÊ°£Ê°àË¢ã.jpg":"https://i.imgs.ovh/2026/01/02/CiDPl9.jpeg",
            "Âº†ÊôìËãóÂ∑•‰ΩúÊó•Âøó.jpg": "https://i.imgs.ovh/2026/01/02/CikntN.jpeg",
            "Êó•ËÆ∞1.jpg": "https://i.imgs.ovh/2026/01/02/Ci8yk6.md.jpeg",
            "Êó•ËÆ∞2.jpg": "https://i.imgs.ovh/2026/01/02/Ci8ZNd.md.jpeg",
            "Êó•ËÆ∞3.jpg": "https://i.imgs.ovh/2026/01/02/Ci8jVg.md.jpeg",
            "Êó•ËÆ∞4.jpg": "https://i.imgs.ovh/2026/01/02/Ci8cn0.md.jpeg",
            "Êó•ËÆ∞5.jpg": "https://i.imgs.ovh/2026/01/02/Ci8O4O.md.jpeg",
            "Ê†°Êúç‰∏äÁöÑËÑöÂç∞.jpg": "https://i.imgs.ovh/2026/01/02/Ci80pc.md.jpeg"
};

        // ====================== ËÅäÂ§©Êï∞ÊçÆ ======================
        const chatData = {
            "2025.08.31 23:30": [
                {
                    sender: "ÊûóÊò≠",
                    content: "https://qingmiaomiddleschool.github.io/Official-Site/",
                    type: "received",
                    time: "23:30"
                },
                {
                    sender: "ÊûóÊò≠",
                    content: "Â§ßÁ•ûÔºåËøôÊòØÂ≠¶Ê†°ÁöÑÂÆòÁΩëÔºåÊàëÂì•ÁöÑÊ≠ªËÇØÂÆöÊúâËπäË∑∑ÔºåÊàëÂæóÂéªÂºÑÊ∏ÖÊ•öÂà∞Â∫ïÂèëÁîü‰∫Ü‰ªÄ‰πà„ÄÇ",
                    type: "received",
                    time: "23:30"
                }
            ],
            "2025.09.01 07:05": [
				{
                    sender: "ÊûóÊò≠",
                    content: "Êó©È§êÂõæÁâá.jpg",
                    type: "received",
                    time: "07:05"
                },
				{
                    sender: "ÊûóÊò≠",
                    content: "È£üÂ†ÇËèúÂçïÂõæÁâá.jpg",
                    type: "received",
                    time: "07:05"
                },
                {
                    sender: "ÊûóÊò≠",
                    content: "Â§ßÁ•ûÊó©‰∏äÂ•ΩÔºÅ‰ªäÂ§©ÊòØÂºÄÂ≠¶Á¨¨‰∏ÄÂ§©ÔºåÂ≠¶Ê†°ÁöÑÊó©È§êËøòÊå∫‰∏∞ÁõõÁöÑÔºåÂ±ÖÁÑ∂ËøòÊèê‰æõÂÖçË¥πÁöÑÁâõÂ•∂Âñù„ÄÇ",
                    type: "received",
                    time: "07:05"
                },
				{
                    sender: "ÊûóÊò≠",
                    content: "ÂØπ‰∫ÜÔºåÊàëÂì•ÁöÑÂÖ•Â≠¶ËµÑÊñôÊúâ‰ªÄ‰πàÈóÆÈ¢òÂêóÔºü",
                    type: "received",
                    time: "07:05"
                }
            ],
            "2025.09.02 21:30": [
                {
                    sender: "ÊûóÊò≠",
                    content: "ÂÆøËàçÂÆàÂàô.jpg",
                    type: "received",
                    time: "21:30"
                },
                {
                    sender: "ÊûóÊò≠",
                    content: "Êàë‰ª•‰∏∫Â≠¶ÁîüÊâãÂÜåÁöÑËßÑÁü©Â∑≤ÁªèÂ§üÂ§ö‰∫ÜÔºåÊ≤°ÊÉ≥Âà∞ËøòÊúâÂÆøËàçÂÆàÂàôÔºåË∞ÅËÉΩÂàÜÊ∏Ö‰∏äÂ≠¶ÂíåÂùêÁâ¢„ÄÇ",
                    type: "received",
                    time: "21:30"
                },
                {
                    sender: "ÊûóÊò≠",
                    content: "ÂÆµÁ¶Å‰πãÂêéÊàëÂ∞±Âá∫‰∏çÂéª‰∫ÜÔºåÊò®Â§©ÂÅ∑ÁúãÂÆøÁÆ°ËæìÂØÜÁ†ÅÂºÄÈó®ËøòÂ∑ÆÁÇπË¢´ÊäìÂà∞‰∫Ü......",
                    type: "received",
                    time: "21:30"
                },
                {
                    sender: "ÊûóÊò≠",
                    content: "ËøôÊÆµÊó∂Èó¥ÊàëÂÖàÁÜüÊÇâ‰∏Ä‰∏ãÂ≠¶Ê†°ÔºåÂ¶ÇÊûúËÉΩÁü•ÈÅìÂÆøËàçÊ•ºÂØÜÁ†ÅÁöÑËØùÔºåÂ∞±ËÉΩË∂ÅÂÆµÁ¶ÅÊó∂Èó¥Âá∫ÂéªË∞ÉÊü•‰∫Ü„ÄÇ",
                    type: "received",
                    time: "21:30"
                }
            ],
            "2025.09.08 14:35": [
                {
                    sender: "ÊûóÊò≠",
                    content: "Ê†°Âõ≠Âç°ÁÖßÁâá.jpg",
                    type: "received",
                    time: "14:35"
                },
                {
                    sender: "ÊûóÊò≠",
                    content: "Â§ßÁ•ûÔºåÊàëÊÑüËßâÊàëË°å‰∫ÜÔºå‰ªäÊôöÂÖàÂá∫ÂéªÊé¢Êé¢Ë∑Ø„ÄÇ",
                    type: "received",
                    time: "14:35"
                },
                {
                    sender: "ÊûóÊò≠",
                    content: "ÊØè‰∏™Â≠¶ÁîüÂú®ÂØùÂÆ§Ê•ºÈÉΩÊúâËá™Â∑±ÁöÑÂÇ®Áâ©ÊüúÔºå‰∏çÁü•ÈÅìÊàëÂì•ÁöÑÂÇ®Áâ©ÊüúÊúâÊ≤°ÊúâË¢´Ê∏ÖÁêÜÔºåÊØè‰∏™ÊüúÂ≠êÈÉΩÊúâÁºñÂè∑Ôºå‰ªñÁöÑ‰ºöÂú®Âì™Âë¢„ÄÇ",
                    type: "received",
                    time: "14:35"
                }
            ],
            "2025.09.08 20Ôºö40": [
                {
                    sender: "ÊûóÊò≠",
                    content: "ÂÇ®Áâ©ÊüúÂØÜÁ†ÅÈîÅ.jpg",
                    type: "received",
                    time: "20Ôºö40"
                },
                {
                    sender: "ÊûóÊò≠",
                    content: "https://qingmiaomiddleschool.github.io/Lin-You-s-Blog/",
                    type: "received",
                    time: "20Ôºö40"
                },
                {
                    sender: "ÊûóÊò≠",
                    content: "ËØï‰∫Ü‰ªñÁîüÊó•Êâì‰∏çÂºÄÔºåËá™‰ªé‰ªñ‰∏äÈ´ò‰∏≠ÂêéÊàë‰ª¨Â∞±ÂæàÂ∞ëËØ¥ËØùÔºåÊàñËÆ∏‰ªñÁöÑ‰∏ªÈ°µ‰ºöÈÄèÈú≤‰∫õÁ∫øÁ¥¢„ÄÇ",
                    type: "received",
                    time: "20Ôºö40"
                }
            ],      
            "2025.09.08 20Ôºö55": [
                {
                    sender: "ÊûóÊò≠",
                    content: "ÊàëÂì•ÁîµËØùÈáåÊ≤°ËØ¥ËøáËøô‰∫õ‰∫ãÔºå‰ªñÂΩìÊó∂ËøòÂéª‰∫ÜÊ†°ÂåªÈô¢ÔºåÂ∫îËØ•ÊúâÁïô‰∏ãËÆ∞ÂΩï„ÄÇ",
                    type: "received",
                    time: "20Ôºö55"
                }
            ],
			"2025.09.09 10:30": [
				{
                    sender: "ÊûóÊò≠",
                    content: "Êàë‰ªäÂ§©ÂéªÊâæ‰∫Ü‰ªñ‰ª¨‰∏â‰∏™ÔºåÂÜ≤‰∏äÂéªË¥®ÈóÆ‰ªñ‰ª¨ÊòØ‰∏çÊòØÊ¨∫Ë¥üËøáÊûóÂèàÔºåÈÇ£‰∏â‰∏™ÂÇªxÂ±ÖÁÑ∂ËØ¥ÊòØ‰ªñËá™Â∑±Á≤æÁ•ûÊúâÈóÆÈ¢òÔºåË∑ü‰ªñ‰ª¨ÂçäÊØõÈí±ÂÖ≥Á≥ªÈÉΩÊ≤°ÊúâÔºåÈ¨ºÊâç‰ø°ÔºÅ",
                    type: "received",
                    time: "10:30"
                },
				{
                    sender: "ÊûóÊò≠",
                    content: "‰ªñ‰ª¨Ë¶Å‰∏çÊòØÂøÉËôöÁöÑËØùÔºå‰∏∫‰ªÄ‰πà‰∏ÄÂºÄÂßãÊääÊàëËÆ§ÊàêÊàëÂì•‰ºöÈÇ£‰πàÂÆ≥ÊÄïÔºüÂêéÈù¢Â±ÖÁÑ∂ËøòË∑üÊàëÂä®ÊâãÔºÅËøòÂ•ΩÊàë‰πü‰∏çÊòØÂêÉÁ¥†ÁöÑÔºåÁõ¥Êé•Êä¢ÂÖàÁªô‰∫ÜÈÇ£‰∏™Êà¥ÁúºÈïúÁöÑ‰∏ÄÊã≥ÔºåÁªô‰ªñÊâìÊàêÁÜäÁå´Áúº‰∫ÜÔºå‰Ω†ÊòØÊ≤°ÁúãÂà∞‰ªñÈÇ£ÂâØË°∞Ê†∑ÔºåÂìàÂìà„ÄÇ",
                    type: "received",
                    time: "10:30"
                }
			],	
            "2025.09.09 12:12": [
                {
                    sender: "ÊûóÊò≠",
                    content: "ÁúüËßÅÈ¨º‰∫ÜÔºåÂàöÊâçÂèàÁ¢∞Âà∞ÈÇ£‰∏™ÂõõÁúºÔºå‰∏çÁü•ÈÅìÁî®‰∫Ü‰ªÄ‰πàÁÅµ‰∏πÂ¶ôËçØÔºåÊàë‰∏ãÈÇ£‰πàÈáçÁöÑÊâãÊòéÊòéÂΩìÂú∫Â∞±ËÇøÂæóË∑üÁå™Â§¥‰∏ÄÊ†∑ÔºåÂçäÂ§©‰∏çÂà∞Â±ÖÁÑ∂Â•Ω‰∫ÜÔºÅÔºü",
                    type: "received",
                    time: "12:12"
                },
                {
                    sender: "ÊûóÊò≠",
                    content: "‰∏çÂØπÔºåÂ•ΩÂÉèÊúâÁÇπ‰∏çÂØπÂä≤Ôºå‰ªñ‰ª¨‰∏∫‰ªÄ‰πàË°®Áé∞ÂæóÂÉè‰ªéÊù•Ê≤°ËßÅËøáÊàë‰∏ÄÊ†∑ÔºåÁúãÂà∞Êàë‰∏ÄÁÇπÂèçÂ∫îÈÉΩÊ≤°Êúâ„ÄÇ",
                    type: "received",
                    time: "12:12"
                },
                {
                    sender: "ÊûóÊò≠",
                    content: "ÊàëÁöÑÁîµÂ≠êÊâãË°®ÂèØ‰ª•ËΩ¨ÂΩïÈü≥È¢ëÔºå‰Ω†Áúã‰∏Ä‰∏ãÔºåËøôÂ§™ÈÇ™Èó®‰∫ÜÔºåÂ•ΩÂÉèË∑ü‰∏äÂçà‰∏çÊòØÂêå‰∏ÄÊâπ‰∫∫„ÄÇ",
                    type: "received",
                    time: "12:12"
                },
				{
                    sender: "ÊûóÊò≠",
                    content: "ÂΩïÈü≥Êñá‰ª∂ÂõæÁâá.jpg",
                    type: "received",
                    time: "12:12"
                }
            ],
            "2025.09.09 12:48": [
                {
                    sender: "ÊûóÊò≠",
                    content: "Â§ßÁ•ûÔºåÂÖ∂ÂÆûÊúâ‰∏Ä‰∏™ÁñëÈóÆ‰∏ÄÁõ¥ÁõòË∏ûÂú®ÊàëÁöÑÂ§¥È°∂„ÄÇ",
                    type: "received",
                    time: "12:48"
                }
            ],
            "2025.09.15 06:30": [
                {
                    sender: "ÊûóÊò≠",
                    content: "Âä≥Âä®ÊïôËÇ≤ËØæÂ±ÖÁÑ∂Êúâ‰∏ÄÊï¥Â§©ÔºåÂ±ÖÁÑ∂ÂÆåÂÖ®‰∏çÊòØÈù¢Â≠êÂ∑•Á®ãÂêóÔºü‰ªäÂ§©Â§ñÂá∫Ë¶ÅÊç¢Ë°£ÊúçÊî∂Ëµ∞ËÆæÂ§áÔºåÁªìÊùüÂêéÊàëÂÜçËÅîÁ≥ª‰Ω†„ÄÇ",
                    type: "received",
                    time: "06:30"
                },
                {
                    sender: "ÊûóÊò≠",
                    content: "ÊàëÂ•ΩÂÉèËøòË¢´ÂàÜÈÖç‰∫Ü‰∏Ä‰∏™Êê≠Ê°£Ôºå‰∏çÊòØÊàë‰ª•Ë≤åÂèñ‰∫∫Ôºå‰ªñÁúüÁöÑÁúãËµ∑Êù•‰∏çÂ§™ËÅ™ÊòéÔºå‰øóÁß∞ÂÉè‰∏™‰º™‰∫∫„ÄÇ",
                    type: "received",
                    time: "06:30"
                }
            ],
            "2025.09.15 21:35": [
                {
                    sender: "ÊûóÊò≠",
                    content: "Á¥ØÊ≠ªÊàë‰∫ÜÔºå‰øÆ‰∫Ü‰∏ÄÊï¥Â§©Ê†ëÊùàÂ≠êÔºåË∫´‰∏ä‰∏ÄÁõ¥Ë¢´Ê†ëÊûùÂàÆÔºåÁóõÊ≠ª‰∫Ü„ÄÇÂâ™‰∏ãÊù•ÁöÑ‰∏úË•øËøòÂæóÊçÜËµ∑Êù•Êê¨ËøêÔºåËøôÂà∞Â∫ïÊòØÂä≥Âä®ÊïôËÇ≤ËøòÊòØÂä≥Âä®ÊîπÈÄ†Âïä„ÄÇ",
                    type: "received",
                    time: "21:35"
                },
                {
                    sender: "ÊûóÊò≠",
                    content: "ÈÇ£‰∏™Êê≠Ê°£ÂÆåÂÖ®Â∏Æ‰∏ç‰∏äÂøôÔºåÊîØ‰∏ÄÊîØÂä®‰∏ÄÂä®ÔºåÈóÆ‰ªñÂè´‰ªÄ‰πàÂêçÂ≠óÈÉΩ‰∏çÁêÜÊàëÔºå‰∏ÄÁõ¥ÊåáÁùÄÊàë„ÄÇÂ•ΩÊÉ≥Êää‰ªñÊåÇ‰∏äÈùíËãóËÆ∫Âùõ„ÄÇ",
                    type: "received",
                    time: "21:35"
                }   
            ],
			    "2025.09.15 21:38": [
                {
                    sender: "ÊûóÊò≠",
                    content: "ÈóÆËÄÅÂ∏àËÉΩ‰∏çËÉΩÊç¢‰∏™Êê≠Â≠ê‰πüÁ≥äÂºÑÊàëÔºåÂèØÊÅ∂ÁöÑÂº†ÊôìËãóÔºåÁúãËßÅÊàëÁöÑËÑ∏ÂÉèÁúãËßÅÈ¨º‰∏ÄÊ†∑ÔºåÈöæÈÅìÊàëÊúâËøô‰πà‰∏ëÂêóÔºü",
                    type: "received",
                    time: "21:35"
                }  
            ],
            "2025.09.15 21:45": [       
                {
                    sender: "ÊûóÊò≠",
                    content: "Ê¨∏ÔºüÂàöÂàöÊúâ‰∏™Â•≥ÁîüË¢´Ê†ëÊûùÂàí‰º§ÔºåËÄÅÂ∏àÂ∏¶Â•πÂéªÊ†°ÂåªÈô¢‰∫ÜÔºåÂ•ΩÊú∫‰ºöÔºåË∂ÅÊú∫ÁúãÁúãÂèØ‰ª•Âéª‰ªÄ‰πàÂú∞ÊñπË∞ÉÊü•‰∏Ä‰∏ã„ÄÇ",
                    type: "received",
                    time: "21:38"
                }
            ],
            "2025.09.15 22:25": [   
                {
                    sender: "ÊûóÊò≠",
                    content: "ÊàëÊ¥óÊæ°ÁöÑÊó∂ÂÄôÂèëÁé∞ÁöÑÔºåÊàëÊúâÁÇπ......ÊàëË¶ÅÂ¥©Ê∫É‰∫Ü„ÄÇ",
                    type: "received",
                    time: "22:25"
                },
                {
                    sender: "ÊûóÊò≠",
                    content: "Ë∫´‰∏äÁöÑÂàíÁóïÂõæÁâá.jpg",
                    type: "received",
                    time: "22:25"
                },
                {
                    sender: "ÊûóÊò≠",
                    content: "‰Ω†ËßâÂæóËøôÊòØÂ∑ßÂêàÂêóÔºü",
                    type: "received",
                    time: "22:25"
                }
            ],
            "2025.09.15 00:50": [
                {
                    sender: "ÊûóÊò≠",
                    content: "ÁÆó‰∫Ü‰∏çÊÉ≥Ëøô‰∫õÊúâÁöÑÊ≤°ÁöÑÔºå‰ªäÂ§©ÊâæÂà∞ÁöÑÊñá‰ª∂ÊâçÊòØÂÖ≥ÈîÆ„ÄÇ",
                    type: "received",
                    time: "00:50"
                },
                {
                    sender: "ÊûóÊò≠",
                    content: "Âº†ÊôìËãóÂ∑•‰ΩúÊó•Âøó.jpg",
                    type: "received",
                    time: "00:50"
                },
                {
                    sender: "ÊûóÊò≠",
                    content: "\"Âä†ÈÄüÂºÇÂèòÔºåÊèêÂâçÂÆöÊ§ç„ÄÇ\"‰ªÄ‰πàÊÑèÊÄùÔºüÊàëÂì•Âì•ËøòÊ≤°Ê≠ªÔºü‰ΩÜÊàëÊòØ‰∫≤ÁúºÁúã‰ªñÁÅ´ÂåñÁöÑÔºüÔºÅ",
                    type: "received",
                    time: "00:50"        
                }
            ],  
            "2025.09.15 01:05": [
                {
                    sender: "ÊûóÊò≠",
                    content: "Â¶ÇÊûúÊ≠ªÁöÑ‰∏çÊòØÊàëÂì•ÔºåÈöæÈÅìÊòØÊàëÂì•ÊùÄ‰∫∫‰∫ÜÔºü‰∏çÂØπÔºå‰ªñ‰∏çÂèØËÉΩËøô‰πàÂÅöÔºå‰ªñÊùÄÁöÑ‰∫∫ÊòØË∞ÅÔºü",
                    type: "received",
                    time: "01:05"        
                }
            ],  
            "2025.09.15 01:35": [
                {
                    sender: "ÊûóÊò≠",
                    content: "ÂØπ‰∫ÜÔºåÊó•ÂøóÈáåËøòÊèêÂà∞ÊûóÂèàÂú®Ê°àÂèëÂâçÁ•ûÂøó‰∏çÊ∏ÖÊòØÂõ†‰∏∫ÁßÅËá™ÂáèÂ∞ë‰∫ÜYC-08Ëê•ÂÖªÊ∂≤ÊëÑÂÖ•ÔºåËøô......ËøôÊòØ‰ªÄ‰πà‰∏úË•ø„ÄÇ",
                    type: "received",
                    time: "01:35"
                }
            ],
            "2025.09.16 07:35": [
                {
                    sender: "ÊûóÊò≠",
                    content: "‰ªäÂ§©Êó©È§êÁöÑÊó∂ÂÄôÊàëÂÅ∑ÂÅ∑ÊääÁâõÂ•∂ÂÄíÊéâ‰∫ÜÔºåÁõÆÂâçÊ≤°Êúâ‰ªÄ‰πàÂºÇÂ∏∏ÔºåÂ∞±ÊòØ......ÊÑüËßâÊàëÁöÑÊåáÁî≤Â•ΩÂÉèÈïøÈïø‰∫ÜÂæàÂ§ö„ÄÇ",
                    type: "received",
                    time: "07:35"
                },
                {
                    sender: "ÊûóÊò≠",
                    content: "È©¨‰∏äÂ∞±Ë¶ÅÂéªÂÜúÂú∫‰∫ÜÔºåÊàëËßâÂæóÊàëÁ¶ªÁúüÁõ∏‰∏çËøú‰∫Ü„ÄÇÊò®Â§©ÈÇ£‰∏™ÂéªÊ†°ÂåªÈô¢ÁöÑÂ•≥ÁîüÂõûÊù•ËØ¥ÂåªÁîüÁªôÂ•πÂºÄ‰∫ÜÂæàÂ§öÂ•áÊÄ™ÁöÑÊ£ÄÊü•Ôºå‰ΩÜÊúÄÂêéÁóÖÂéÜ‰∏ä‰πüÊ≤°ÊúâÊ£ÄÊü•ÁªìÊûúÔºåÂè™ËØ¥ÊòØÊôÆÈÄöÊì¶‰º§„ÄÇ",
                    type: "received",
                    time: "07:35"
                },
                {
                    sender: "ÊûóÊò≠",
                    content: "‰πü‰∏çÁü•ÈÅìÊò®Â§©ÊòØÂì™‰∏™ÂåªÁîüÂÄºÁè≠ÔºåÂèçÊ≠£Ê†°ÂåªÈô¢‰∏ÄÂÆöÊúâÈóÆÈ¢òÔºåÂ§ßÁ•û‰Ω†ËÉΩÂ∏ÆÊàëÊü•‰∏Ä‰∏ãÂêóÔºü",
                    type: "received",
                    time: "07:35"
                },
				{
                    sender: "ÊûóÊò≠",
                    content: "ËøôÂΩì‰∏≠‰∏ÄÂÆöÊúâÈò¥Ë∞ãÔºåÂ≠¶Ê†°Ê≤°Ê≥ïËß£Èáä‰∏∫‰ªÄ‰πàÊúâ‰∏ÄÂçäÁöÑÂ≠¶ÁîüÂú®ÊØï‰∏öÊó∂Â§±Ë∏™„ÄÇÊàë‰ºöÂΩïÈü≥‰øùÂ≠òËØÅÊçÆÔºåÊôö‰∏äÂÆöÊó∂ÂèëÁªô‰Ω†ÔºåÂ¶ÇÊûúËØÅÊçÆÂÖÖË∂≥Â∞±ÂéªÊä•Ë≠¶ÔºÅ",
                    type: "received",
                    time: "07:35"
                }
            ],  
            "2025.09.16 07:45": [           
                {
                    sender: "ÊûóÊò≠",
                    content: "ËøôÂΩì‰∏≠‰∏ÄÂÆöÊúâÈò¥Ë∞ãÔºåÂ≠¶Ê†°Ê≤°Ê≥ïËß£Èáä‰∏∫‰ªÄ‰πàÊúâ‰∏ÄÂçäÁöÑÂ≠¶ÁîüÂú®ÊØï‰∏öÊó∂Â§±Ë∏™„ÄÇÊàë‰ºöÂΩïÈü≥‰øùÂ≠òËØÅÊçÆÔºåÊôö‰∏äÂÆöÊó∂ÂèëÁªô‰Ω†ÔºåÂ¶ÇÊûúËØÅÊçÆÂÖÖË∂≥Â∞±ÂéªÊä•Ë≠¶ÔºÅ",
                    type: "received",
                    time: "07:45"
                },
                {
                    sender: "ÊûóÊò≠",
                    content: "ÊîæÂøÉÂêßÔºÅÊàëÂèØÊòØÂêç‰æ¶Êé¢ÊûóÊò≠ÔºÅ",
                    type: "received",
                    time: "07:45"
                }
            ]
        };
        
        // Á≥ªÁªüÊèêÁ§∫ÈÖçÁΩÆ
        const systemPrompts = {
            "start": {
                prompt: "Á≠îÂ∫îÊûóÊò≠ÁöÑËØ∑Ê±ÇÔºåÂºÄÂêØ‰∏ã‰∏ÄËøõÁ®ã„ÄÇ",
                nextKeyword: "350",
                dateIndex: 0,
                inputType: "period"
            },
            "350": {
                prompt: "ËØ∑ËæìÂÖ•ÊûóÊò≠ÂÖ•Â≠¶ËÄÉËØïÁöÑÂàÜÊï∞„ÄÇ",
                nextKeyword: "2510",
                dateIndex: 0,
                inputType: "keyword"
            },
            "2510": {
                prompt: "ËØ∑ËæìÂÖ•ÊûóÊò≠ÊâÄÂú®ÁöÑÁè≠Á∫ß„ÄÇ",
                nextKeyword: "‰π≥Á≥ñ‰∏çËÄê",
                dateIndex: 0,
                inputType: "keyword"
            },
            "‰π≥Á≥ñ‰∏çËÄê": {
                prompt: "ËØ∑ËæìÂÖ•ÊûóÂèà‰ΩìÊ£ÄÊä•Âëä‰∏≠Âá∫Áé∞ÁöÑË∫´‰ΩìÂºÇÂ∏∏„ÄÇ",
                nextKeyword: "5201",
                dateIndex: 1,
                inputType: "keyword"
            },
            "5201": {
                prompt: "ËØ∑ËæìÂÖ•ÂÆøËàçÊ•ºÂØÜÁ†Å„ÄÇ",
                nextKeyword: "YC001",
                dateIndex: 2,
                inputType: "keyword"
            },
            "YC001": {
                prompt: "ËØ∑ËæìÂÖ•ÊûóÂèàÂÇ®Áâ©ÊüúÁöÑÁºñÂè∑„ÄÇ",
                nextKeyword: "20101123",
                dateIndex: 3,
                inputType: "keyword"
            },
            "20101123": {
                prompt: "ËØ∑ËæìÂÖ•ÊûóÂèàÂÇ®Áâ©Êüú8‰ΩçÊï∞Â≠óÂØÜÁ†Å„ÄÇ",
                nextKeyword: "Ëã±Êâç2301Áè≠",
                dateIndex: 4,
                inputType: "keyword"
            },
            "Ëã±Êâç2301Áè≠": {
                prompt: "ËØ∑ËæìÂÖ•ÂÆòÂ§ßÂçé‰∏â‰∫∫ÊâÄÂú®ÁöÑÁè≠Á∫ß„ÄÇ",
                nextKeyword: "Ëê•ÂÖª‰∏çËâØÊÄßË¥´Ë°Ä",
                dateIndex: 5,
                inputType: "keyword"
            },
            "Ëê•ÂÖª‰∏çËâØÊÄßË¥´Ë°Ä": {
                prompt: "ËØ∑ËæìÂÖ•ÊûóÂèàÁöÑËØäÊñ≠ÁªìÊûú„ÄÇ",
                nextKeyword: "ÈÄâÊã©1",
                dateIndex: 6,
                inputType: "keyword"
            },
            "ÈÄâÊã©1": {
                prompt: "ËØ∑Âú®‰∏ãÂàóÈÄâÈ°π‰∏≠ÈÄâÊã©‰∏ÄÈ°πÂõûÁ≠îÔºö1<ÊâìÂæóÂ•Ω>;2<‰Ω†ÊÄé‰πàÊ†∑>„ÄÇ",
                nextKeyword: "ÈÄâÊã©2",
                dateIndex: 7,
                inputType: "choice",
                options: ["ÊâìÂæóÂ•Ω", "‰Ω†ÊÄé‰πàÊ†∑"]
            },
            "ÈÄâÊã©2": {
                prompt: "ËØ∑Âú®‰∏ãÂàóÈÄâÈ°π‰∏≠ÈÄâÊã©‰∏ÄÈ°πÂõûÁ≠îÔºö1<ÊºîÊäÄÊ¥æ>;2<ÁúüÊòØËßÅÈ¨º‰∫Ü>„ÄÇ",
                nextKeyword: "ÈóÆÂè∑",
                dateIndex: 8,
                inputType: "choice",
                options: ["ÊºîÊäÄÊ¥æ", "ÁúüÊòØËßÅÈ¨º‰∫Ü"]
            },
            "ÈóÆÂè∑": {
                prompt: "ËØ∑ËæìÂÖ•\"Ôºü\"",
                nextKeyword: "ÁúÅÁï•Âè∑",
                dateIndex: 9,
                inputType: "question"
            },
            "ÁúÅÁï•Âè∑": {
                prompt: "ËØ∑ËæìÂÖ•\"......\"",
                nextKeyword: "ÈùíËãóËÆ∫Âùõ",
                dateIndex: 9,
                inputType: "ellipsis"
            },
            "ÈùíËãóËÆ∫Âùõ": {
                prompt: "‰Ω†Â•ΩÂÉèÊ≤°Âê¨ËØ¥ËøáËøô‰∏™ËÆ∫ÂùõÔºåÂÖàÈóÆÈóÆÊûóÊò≠",
                nextKeyword: "ÈÄâÊã©3",
                dateIndex: 11,
                inputType: "keyword"
            },
            "ÈÄâÊã©3": {
                prompt: "ËØ∑Âú®‰∏ãÂàóÈÄâÈ°π‰∏≠ÈÄâÊã©‰∏ÄÈ°πÂõûÁ≠îÔºö1<‰∫ãÂá∫ÂèçÂ∏∏ÂøÖÊúâÂ¶ñ>Ôºõ2<‰ªñÁ§æÊÅê>„ÄÇ",
                nextKeyword: "ÂÜúÂú∫ÂäûÂÖ¨ÂÆ§Ê°£Ê°àÊüú",
                dateIndex: 12,
                inputType: "choice",
                options: ["‰∫ãÂá∫ÂèçÂ∏∏ÂøÖÊúâÂ¶ñ", "‰ªñÁ§æÊÅê"]
            },
            "ÂÜúÂú∫ÂäûÂÖ¨ÂÆ§Ê°£Ê°àÊüú": {
                prompt: "Áé∞Âú®ËØ•ÂéªÂì™ÈáåË∞ÉÊü•Âë¢Ôºü",
                nextKeyword: "20250308",
                dateIndex: 13,
                inputType: "keyword"
            },
            "20250308": {
                prompt: "Âì™‰∏ÄÂ§©ÁöÑÊñá‰ª∂ÊúÄÈáçË¶ÅÔºü",
                nextKeyword: "ÈÄâÊã©4",
                dateIndex: 13,
                inputType: "keyword"
            },
			"ÈÄâÊã©4": {
                prompt: "ËØ∑Âú®‰∏ãÂàóÈÄâÈ°π‰∏≠ÈÄâÊã©‰∏ÄÈ°πÂõûÁ≠îÔºö1<‰Ω†ÊÉ≥Â§ö‰∫Ü>Ôºõ2<ÊÅêÊÄï‰∏çÊòØ>„ÄÇ",
                nextKeyword: "ÈÄâÊã©5",
                dateIndex: 14,
                inputType: "choice",
                options: ["‰Ω†ÊÉ≥Â§ö‰∫Ü", "ÊÅêÊÄï‰∏çÊòØ"]
            },
            "ÈÄâÊã©5": {
                prompt: "ËØ∑Âú®‰∏ãÂàóÈÄâÈ°π‰∏≠ÈÄâÊã©‰∏ÄÈ°πÂõûÁ≠îÔºö1<ËäÇÂìÄ>;2<Ê≠ªËÄÖÂè¶ÊúâÂÖ∂‰∫∫>„ÄÇ",
                nextKeyword: "QM230617001",
                dateIndex: 15,
                inputType: "choice",
                options: ["ËäÇÂìÄ", "Ê≠ªËÄÖÂè¶ÊúâÂÖ∂‰∫∫"]
            },
            "QM230617001": {
                prompt: "ËØ∑ËæìÂÖ•Ê°à‰ª∂ÁöÑÂè¶‰∏Ä‰∏™ÂΩì‰∫ã‰∫∫„ÄÇ",
                nextKeyword: "ÂπºËãóÂÖ±ËÇ≤",
                dateIndex: 16,
                inputType: "keyword"
            },
            "ÂπºËãóÂÖ±ËÇ≤": {
                prompt: "ÈùíËãó‰∏≠Â≠¶Â•ΩÂÉèÊúâ‰∏™ÂæàÁâπÊÆäÁöÑÂà∂Â∫¶",
                nextKeyword: "QM251123489",
                dateIndex: 16,
                inputType: "keyword"
            },
            "QM251123489": {
                prompt: "ËØ∑ËæìÂÖ•ÊûóÊò≠Êê≠Ê°£ÁöÑÂ≠¶Âè∑„ÄÇ",
                nextKeyword: "ÂêÉÊ§çÁâ©‰∫∫",
                dateIndex: 16,
                inputType: "keyword"
            },
            "ÂêÉÊ§çÁâ©‰∫∫": {
                prompt: "È£ü‰∫∫ÊóèÊÄé‰πàË°•ÂÖÖËÜ≥È£üÁ∫§Áª¥Ôºü",
                nextKeyword: "ÁâõÂ•∂",
                dateIndex: 16,
                inputType: "keyword"
            },
            "ÁâõÂ•∂": {
                prompt: "YC-08Ëê•ÂÖªÊ∂≤ÊòØ‰ªÄ‰πàÔºü",
                nextKeyword: "ÈÄâÊã©6",
                dateIndex: 17,
                inputType: "keyword"
            },
            "ÈÄâÊã©6": {
                prompt: "ËØ∑Âú®‰∏ãÂàóÈÄâÈ°π‰∏≠ÈÄâÊã©‰∏ÄÈ°πÂõûÁ≠îÔºö1<Â•ΩÁöÑ>Ôºõ2<‰Ω†Ê≥®ÊÑèÂÆâÂÖ®>„ÄÇ",
                nextKeyword: "Á†ßÊú®",
                dateIndex: 18,
                inputType: "choice",
                options: ["Â•Ω", "Ê≥®ÊÑèÂÆâÂÖ®"]
            },
            "Á†ßÊú®": {
                prompt: "Ëã±ÊâçÊòØ‰ªÄ‰πàÔºü",
                nextKeyword: "Êé•Á©ó",
                dateIndex:18,
                inputType: "keyword"
            },
            "Êé•Á©ó": {
                prompt: "ÈùíËãóÊòØ‰ªÄ‰πàÔºü",
                nextKeyword: "ÊàêÊùê",
                dateIndex: 18,
                inputType: "keyword"
            },
            "ÊàêÊùê": {
                prompt: "ÊØï‰∏öÊÑèÂë≥ÁùÄ‰ªÄ‰πàÔºü",
                nextKeyword: "‰∏æÊä•‰ø°",
                dateIndex: 18,
                inputType: "keyword"
            },
            "‰∏æÊä•‰ø°": {
                prompt: "ÁúãÊù•‰Ω†ÂèëÁé∞‰∫Ü‰ªÄ‰πà‰∏çÂæó‰∫ÜÁöÑÁßòÂØÜÔºåÈÇ£‰πà......",
                nextKeyword: "ÂΩïÈü≥Êñá‰ª∂",
                dateIndex: 18,
                inputType: "report"
            },
            "ÂΩïÈü≥Êñá‰ª∂": {
                prompt: "",
                nextKeyword: "‰Ω†ËøòÂ•ΩÂêó",
                dateIndex: 18,
                inputType: "recording"
            },
            "‰Ω†ËøòÂ•ΩÂêó": {
                prompt: "‰∫ãÊÉÖÁªìÊùü‰ª•ÂêéÔºå‰Ω†‰∏ÄÁõ¥ËØïÂõæËÅîÁ≥ªÊûóÊò≠‰ΩÜÈÉΩÊ≤°ÊúâÂõûÂìçÔºåÁé∞Âú®ËøòË¶ÅÂÜçËØï‰∏ÄËØïÂêóÔºüËØ∑ËæìÂÖ•‚Äú‰Ω†ËøòÂ•ΩÂêóÔºüÊî∂Âà∞ËØ∑ÂõûÂ§ç‚Äù",
                nextKeyword: "ÁªìÂ±ÄÈÄâÊã©",
                dateIndex: 18,
                inputType: "keyword"
            },
            "ÁªìÂ±ÄÈÄâÊã©": {
                prompt: "ÁúüÊòØÂπ∏Á¶èÁöÑÁªìÂ±ÄÔºå‰Ω†ËøòÊúâ‰ªÄ‰πàÊÉ≥ËØ¥ÁöÑÂêóÔºüË∑ü‰ªñËØ¥‚ÄúÊúüÂæÖÊàë‰ª¨‰∏ãÊ¨°ËßÅÈù¢‚Äù;ÊàñËÄÖÈóÆÈóÆ‰ªñÔºö‚ÄúÈ£ü‰∫∫ÊóèÂ¶Ç‰ΩïË°•ÂÖÖËÜ≥È£üÁ∫§Áª¥Ôºü‚Äù",
                nextKeyword: "end",
                dateIndex: 18,
                inputType: "keyword"
            }
        };
        
        // ÊûóÊò≠ÁöÑÂõûÂ§ç - Ê†πÊçÆÊñáÊú¨ÂÜÖÂÆπÈáçÊñ∞Êï¥ÁêÜ
        const linzhaoResponses = {
            "start": [
				"Âê¨ËØ¥ÈùíËãóÊòØÊàë‰ª¨ËøôÂçáÂ≠¶ÁéáÊúÄÈ´òÔºåÊ†°ÂèãÊúÄÁâõÈÄºÁöÑÂ≠¶Ê†°ÔºåÊØèÂπ¥Âè™Êãõ500‰∫∫ÔºåÊ≤°ÊÉ≥Âà∞ÊàëËµ∞ÁãóÂ±éËøêÂΩïÂèñ‰∏ä‰∫ÜÔºÅÁúüÊòØ‰∏çÊûâË¥πÊàëÁ™ÅÂáªÂá†‰∏™ÊúàÔºåËøôËØ¥‰∏çÂÆöÊòØÊàëËøôËæàÂ≠êËÄÉÂæóÊúÄÂ•ΩÁöÑ‰∏ÄÂõûÔºå‰Ω†ËÉΩÂ∏ÆÊàëÊü•Âà∞ÊàëÂÖ•Â≠¶ËÄÉËØïËÄÉ‰∫ÜÂ§öÂ∞ëÂàÜÂêóÔºü"
 ],
            "350": [
                "ÊÄé‰πà‰ºöËøôÊ†∑ÔºüÔºÅÊàëËøò‰ª•‰∏∫ÊàëË∂ÖÂ∏∏ÂèëÊå•‰∫ÜÔºåÂ±ÖÁÑ∂ÊòØÊç°Êºè„ÄÇ",
                "ÁÆó‰∫ÜÔºåÂ≠¶Ê†°ÊÑøÊÑèË¶ÅÊàëÂ∞±Ë°åÔºåÂèçÊ≠£Êàë‰πü‰∏çÊòØÁúüÁöÑËøáÊù•ËØª‰π¶ÁöÑ„ÄÇ",
                "Âê¨ËØ¥ËøòÊúâËã±ÊâçÁè≠ÂíåÈùíËãóÁè≠‰∏§ÁßçÁè≠ÔºåÊàëÂì•Â∞±ÊòØËã±ÊâçÁè≠ÔºåÊàëÂú®Âì™‰∏™Áè≠Ôºü"
            ],
            "2510": [
                "ÈöæÈÅìÊàëÁúüÁöÑÊòØÂ§©ÊâçÔºüÔºÅËé´ÈùûÊòØÂ≠¶Ê†°ÂèëÁé∞‰∫ÜÊàëÁöÑÊüê‰∫õ‰∏ç‰∏∫‰∫∫Áü•ÁöÑÊΩúÂäõÔºüÊ≤°ÊÉ≥Âà∞ÈùíËãóÂ±ÖÁÑ∂ÊòØËøô‰πàÂºÄÊòéÁöÑÂ≠¶Ê†°„ÄÇ",
                "ÁÆó‰∫ÜÔºåÂÖà‰∏çÁ∫†ÁªìËøô‰∏™ÔºåÊòéÂ§©ËøòË¶ÅÊä•ÈÅìÔºåÊàëÂæóÂÖàÁù°‰∫Ü„ÄÇËØùËØ¥Êó¢ÁÑ∂ËÉΩÊâæÂà∞ÊàëÁöÑ‰ø°ÊÅØÔºåÊòØ‰∏çÊòØ‰πüËÉΩÊêúÂà∞ÊàëÂì•ÁöÑÂÖ•Â≠¶ËµÑÊñôÔºü"
            ],
            "‰π≥Á≥ñ‰∏çËÄê": [
                "‰ΩìÊ£ÄÊä•Âëä‰∏äÂÜôÁöÑÔºü‰ªñÁ°ÆÂÆû‰π≥Á≥ñ‰∏çËÄêÔºåÂ∞èÁöÑÂÆ∂ÈáåËÆ¢Êñ∞È≤úÁâõÂ•∂Ôºå‰ªñÂñù‰∏ÄÊ¨°Âêê‰∏ÄÊ¨°ÔºåËøûÂ•∂Ëå∂ÈÉΩÂñù‰∏ç‰∫ÜÔºåÁúãÊù•‰ªñÊ≤°‰∫´Âà∞Â≠¶Ê†°ÂÖçË¥πÁâõÂ•∂ÁöÑÁ¶èÂà©„ÄÇ",
                "ÊàëÂæóÂéª‰∏äËØæ‰∫Ü!ËÄÅÂ∏àÁúãÁùÄËøòÊå∫Âá∂ÁöÑÔºåÂàöÂºÄÂ≠¶ÊàëÂæóÂ§πÁùÄÂ∞æÂ∑¥ÂÅö‰∫∫ÔºåÂÜçÊäΩÁ©∫ËÅîÁ≥ª„ÄÇ"
            ],
            "5201": [
                "ÂÆøËàçÊ•ºÂØÜÁ†ÅÔºüÂ§™Â•Ω‰∫ÜÔºÅÂêç‰æ¶Êé¢ÊûóÊò≠Ë¶ÅÂ§úÈó¥Âá∫Âä®‰∫ÜÔºÅ"
            ],
            "YC001": [
                "Â∏ÆÂ§ßÂøô‰∫ÜÔºÅÊàëÁúãÂà∞ÂÆøÁÆ°Êü•ÂÆåÂØùÁ¶ªÂºÄ‰∫ÜÔºåÊàëËøôÂ∞±ÂéªÊâæÂì•ÁöÑÂÇ®Áâ©Êüú„ÄÇ"
            ],
            "20101123": [
                "Â±ÖÁÑ∂ÊòØÊàëÁöÑÁîüÊó•......",
                "Êó•ËÆ∞1.jpg",
                "Êó•ËÆ∞2.jpg",
                "Êó•ËÆ∞3.jpg",
                "Êó•ËÆ∞4.jpg",
				"Êó•ËÆ∞5.jpg",
                "ÊàëÂì•ÁöÑ‰∫ãÊÉÖËÇØÂÆöË∑üËøôÂá†‰∏™‰∫∫ÊúâÂÖ≥Ôºå‰ªñ‰ª¨Âú®Âì™‰∏™Áè≠ÔºüÔºÅÊàëÂøÖÈ°ªË¶ÅÈóÆÊ∏ÖÊ•ö„ÄÇ"
            ],
            "Ëã±Êâç2301Áè≠": [
                "ÁúüÊòØËØ•Ê≠ªÔºå‰ªñ‰ª¨Á≠âÁùÄÂêßÔºÅ"
            ],
            "Ëê•ÂÖª‰∏çËâØÊÄßË¥´Ë°Ä": [
                "ËøòÂ•Ω‰ªñÊ≤°ÊúâÂèóÂ§™ÈáçÁöÑ‰º§ÔºåËøô‰ª∂‰∫ãÈöæÈÅìÂ∞±Ëøô‰πàÁÆó‰∫ÜÂêóÔºüËøôÂ∑≤ÁªèÊòØÊ†°Âõ≠Èú∏Âáå‰∫ÜÔºåÁ´üÁÑ∂Ê≤°ÊúâËÄÅÂ∏àÁÆ°ÁÆ°„ÄÇÊàëÂ∫îËØ•Êó©ÁÇπÂèëÁé∞ÁöÑ...",
                "ÊàëÂê¨Âà∞ÂÆøÁÆ°ÁöÑËÑöÊ≠•Â£∞‰∫ÜÔºåÊ≠§Âú∞‰∏çÂÆú‰πÖÁïôÔºåÊàëÂæóÂÖàÂõûÂÆøËàç„ÄÇ"
            ],
            "ÊâìÂæóÂ•Ω": [
                "ÈÇ£ÊòØÂΩìÁÑ∂Ôºå‰ªéÂ∞èÈÉΩÊòØÊàëÁΩ©ÁùÄÊàëÂì•„ÄÇ"
            ],
            "‰Ω†ÊÄé‰πàÊ†∑": [
                "ËøôÂá†‰∏™ÁãóË¥º‰∏ãÊâã‰πüÊòØÁúüÊå∫ÈáçÁöÑÔºåÊàë‰ªéÂú∞‰∏äÁà¨Ëµ∑Êù•ÊÑüËßâË¢´ÂçÅÂá†‰∏™‰∫∫Êâì‰∫ÜÔºåÊµëË∫´ÈÉΩÂú®Áñº„ÄÇ",
                "ÂçßÊßΩÔºåÊàëÁöÑÊñ∞Ê†°ÊúçÔºåÂè¶Â§ñ‰∏ÄÂ•óÂàöÊ¥óÂïä„ÄÇ",
                "Ê†°Êúç‰∏äÁöÑËÑöÂç∞.jpg",
                "Ê≤°ÈóÆÂá∫Êù•‰ªÄ‰πàÊúâÊïàÁöÑ‰ø°ÊÅØÔºå‰ªñ‰ª¨Â∞±ÊÄ•ÁùÄÂä®Êâã‰∫ÜÔºåÊàëËøò‰ºö‰∏ÄÁõ¥ÁõØÁùÄ‰ªñ‰ª¨ÁöÑ„ÄÇ"
            ],
            "ÊºîÊäÄÊ¥æ": [
                "‰∏çÁü•ÈÅìÔºåÊÑüËßâÂÉèË¢´‰∫∫Â§∫Ëàç‰∫ÜÔºåÊé•‰∏ãÊù•ËøòÊòØÊöó‰∏≠Ë∞ÉÊü•Âêß„ÄÇ"
            ],
            "ÁúüÊòØËßÅÈ¨º‰∫Ü": [
                "‰∏çÁü•ÈÅìÔºåÊÑüËßâÂÉèË¢´‰∫∫Â§∫Ëàç‰∫ÜÔºåÊé•‰∏ãÊù•ËøòÊòØÊöó‰∏≠Ë∞ÉÊü•Âêß„ÄÇ"
            ],
            "Ôºü": [
                "‰∏∫‰ªÄ‰πà‰Ω†ÊØèÊ¨°ÂõûÁ≠îÈÉΩ‰∏çË∂ÖËøáÂçÅ‰∏™Â≠óÂïäÔºåÂ•ΩÈ´òÂÜ∑Âì¶„ÄÇ",
                "ÊòæÂæóÊàëÂÉè‰Ω†ÁöÑËàîÁãó„ÄÇ"
            ],
            "......": [
                "......"
            ],
            "ÈùíËãóËÆ∫Âùõ": [
                "ËøôÊòØÊàë‰ª¨Â≠¶Ê†°ÂÜÖÈÉ®ÁöÑËÆ∫ÂùõÔºåÈÉΩÊòØÂ≠¶ÁîüÂú®‰ΩøÁî®ÔºåÂÆòÁΩë‰∏äÂ∫îËØ•Êü•ÂæóÂà∞„ÄÇ‰∏çËøáÂú®ËøôÂ≠¶ÊúüÂ•ΩÂÉèÊöÇÂÅúÁª¥Êä§‰∫ÜÔºåËøòÊòØÊàëÂê¨Âä≥Âä®ËØæ‰∏äÁöÑÂêåÂ≠¶Áü•ÈÅìÁöÑ„ÄÇËØ¥Ëµ∑Êù•ÔºåËÆ∫Âùõ‰∏ä‰ºö‰∏ç‰ºöÊúâ‰ªÄ‰πà‰ø°ÊÅØÔºü",
            ],
            "‰∫ãÂá∫ÂèçÂ∏∏ÂøÖÊúâÂ¶ñ": [
                "ÊòØÂêßÔºåÊàë‰πüËßâÂæóËøôÂ≠¶Ê†°ÊÄ™ÂæóÂæà„ÄÇ"
            ],
            "‰ªñÁ§æÊÅê": [
                "Ëøô‰πàÂÜÖÂêëÂ∞±Âà´ÂΩìËÄÅÂ∏à‰∫ÜÂêßÔºåËøò‰ª•‰∏∫ÊòØË¢´ÊàëÁöÑËã±‰øäÊâìÂáªÂà∞‰∫Ü„ÄÇ",
            ],
            "ÂÜúÂú∫ÂäûÂÖ¨ÂÆ§Ê°£Ê°àÊüú": [
                "ËøôÈáåÂ•ΩÂ§öÊñá‰ª∂ÔºåÂ•ΩÂÉèÈÉΩÊòØ‰ª•Êó•ÊúüÂëΩÂêçÁöÑÔºåÊó∂Èó¥‰∏çÂ§öÔºåÊàëËØ•ÂÖàÁúãÂì™‰∏Ä‰∏™Ôºü",
                "‰∏ÄÂ†ÜÊ°£Ê°àË¢ã.jpg"
            ],
            "20250308": [
                "ËøôÂ±ÖÁÑ∂Ë∑üÊàëÂì•ÊúâÂÖ≥ÔºÅ‰∏âÊúàÂÖ´Âè∑Â∞±ÊòØ‰ªñËá™ÊùÄÁöÑÈÇ£Â§©ÔºÅ",
                "Êó∂Èó¥Â∑Æ‰∏çÂ§ö‰∫ÜÔºåÂÜç‰∏çÂõûÂéªË¶ÅË¢´Âº†ÊôìËãóÈÄÆ‰∏™Ê≠£ÁùÄ‰∫ÜÔºåÂÖàÊãçÁÖßÂõûÂéªÂÜçÁúã„ÄÇ"
            ],
			"‰Ω†ÊÉ≥Â§ö‰∫Ü": [
                "ÊûóÊò≠ÔºöÊàëËßâÂæó‚Ä¶‚Ä¶‰∏ç‚Ä¶‚Ä¶‰∏çÔºÅ",
            ],
			"ÊÅêÊÄï‰∏çÊòØ": [
                "ÊûóÊò≠ÔºöËøô‰πàÂ§öÂ∑ßÂêà‰∏≤Âú®‰∏ÄËµ∑Â∞±‰∏çÊòØÂ∑ßÂêà‰∫ÜÔºÅÈöæÈÅìÊàëÂì•Âì•ËøòÊ¥ªÁùÄÔºüÔºÅ",
            ],
            "ËäÇÂìÄ": [
                "ÊàëÊúâÁßçÈ¢ÑÊÑüÔºå‰ªñÊàñËÆ∏ÁúüÁöÑÊ≤°ÊúâÊ≠ªÔºå‰ΩÜÊòØ......"
            ],
            "Ê≠ªËÄÖÂè¶ÊúâÂÖ∂‰∫∫": [
                "‰Ω†ËØ¥ÂæóÂØπ......‰ΩÜÊòØ‰∏ñÁïå‰∏äÁúüÁöÑÊúâÈïøÂæóËøô‰πàÂÉèÁöÑ‰∫∫ÂêóÔºüËøû‰∫≤‰∫∫ÈÉΩËÆ§‰∏çÂá∫Êù•ÔºüÂØπÔºÅÊúâÔºÅ‰πãÂâçË¢´ÊàëÊâì‰º§ÁöÑÈÇ£‰∏™ÂõõÁúºÔºåÊàñËÆ∏ÂêéÊù•Á¢∞Âà∞ÁöÑÊ†πÊú¨‰∏çÊòØ‰ªñ‰ª¨ÔºÅ",
            ],
            "QM230617001": [
                "Ëøô‰∏≤Êï∞Â≠óÊÄé‰πàËøô‰πàÁúºÁÜüÔºåÊàëÂ•ΩÂÉèÂú®Âì™ÈáåËßÅËøá......ËøôÂíåÊàëÂì•ÁöÑÂ≠¶Âè∑Âè™ÊúâÂâçÁºÄ‰∏ç‰∏ÄÊ†∑ÔºÅ‰ΩÜÊàë‰ªéÊù•Ê≤°ËßÅËøáËøôÁßçÂâçÁºÄÁöÑÂ≠¶Âè∑Ôºå‰ªñÂíåÊàëÂì•Êúâ‰ªÄ‰πàËÅîÁ≥ªÔºü"
            ],
            "ÂπºËãóÂÖ±ËÇ≤": [
                "ÂπºËãóÂÖ±ËÇ≤ÔºÅÔºüÈöæÈÅìÔºåÊê≠Ê°£ÁöÑÂàÜÈÖç‰∏çÊòØÈöèÊú∫ÁöÑÔºåÈÇ£ÊàëÁöÑÊê≠Ê°£Â≠¶Âè∑ÊòØ‰ªÄ‰πàÔºü"
            ],
            "QM251123489": [
                "ÊûúÁÑ∂Ôºå‰ªéÂÖ•Â≠¶Â∞±ÊúâÁöÑÂ≠¶Âè∑ÂºÄÂßãÔºåÊê≠Ê°£ÁöÑÁªÑÂêàÂ∞±Â∑≤ÁªèÁ°ÆÂÆöÂ•Ω‰∫Ü„ÄÇ",
                "Á≠âÁ≠âÔºåÊàëÁöÑÁºñÂè∑ÊòØ489ÔºåÂ¶ÇÊûúÊê≠Ê°£ÊòØ‰∏Ä‰∏ÄÂØπÂ∫îÁöÑËØùÔºå‰∏Ä‰∏™Âπ¥Á∫ßÁöÑËã±ÊâçÁè≠ÂíåÈùíËãóÁè≠Âä†Ëµ∑Êù•Â∞±Êúâ‰∏ÄÂçÉ‰∫∫‰∫ÜÔºÅÂ≠¶Ê†°ÊãõÁîüÂÖ¨ÂëäÈáåËØ¥Âè™Êãõ500‰∫∫ÔºåÂ∞±ÁÆóÊòØÁßòÂØÜÊãõÁîüÊàñËÄÖËµ∞ÂÖ≥Á≥ªÊà∑Ôºå‰ΩÜÊØèÂπ¥ÁöÑÊØï‰∏öÁîü‰πüÂè™Êúâ500‰∫∫ÂïäÔºåÂâ©‰∏ãÁöÑ‰∫∫ÂéªÂì™‰∫ÜÔºü",
                "Â¶ÇÊûúÊØè‰∏™‰∫∫ÈÉΩÊúâ‰∏§‰∏™ÔºåËÄå‰∏îÁõ∏‰ººÂà∞‰∫≤‰∫∫ÈÉΩÊó†Ê≥ïÂàÜËæ®ÔºåÈÇ£‰∏ÄÂÆöÊòØÂú®ÊØï‰∏öÁöÑÊó∂ÂÄôÊúâ500‰∫∫‰ºöË¢´Ââ©‰∏ãÁöÑÂèñ‰ª£ÔºÅÂ§ßÁ•ûÊàë‰ª¨Âè™ËÉΩÁ∫ø‰∏äËÅîÁ≥ªÔºå‰Ω†‰∏ÄÂÆöË¶ÅÁ°Æ‰øùË∑ü‰Ω†ËÅîÁ≥ªÁöÑÊòØÊàëÔºÅÊàë‰ª¨ÈúÄË¶Å‰∏Ä‰∏™ÊöóÂè∑„ÄÇËøòËÆ∞ÂæóÂéüÊù•Âú®Á§æÂõ¢‰Ω†ÁªôÊàëËÆ≤ÁöÑÈÇ£‰∏™ÂÜ∑Á¨ëËØùÂêóÔºüÈ£ü‰∫∫ÊóèÊÄé‰πàË°•ÂÖÖËÜ≥È£üÁ∫§Áª¥Ôºü"
            ],
            "ÂêÉÊ§çÁâ©‰∫∫": [
                "ÂìàÂìàÔºå‰Ω†ÊûúÁÑ∂ËÆ∞ÂæóÔºåÈÇ£ËØ¥Â•Ω‰∫ÜÔºåÂ¶ÇÊûú‰Ω†ËßâÂæóÊúâ‰ªÄ‰πà‰∏çÂØπÂ∞±ÈóÆÊàëËøô‰∏™ÈóÆÈ¢ò„ÄÇÂ∞§ÂÖ∂ÊòØÊÑüËßâÊàëÁä∂ÊÄÅ‰∏çÂØπÁöÑÊó∂ÂÄôÔºå‰∏ÄÂÆöË¶ÅÈóÆÔºÅ"
            ],
            "ÁâõÂ•∂": [
                "ÂØπÔºÅÊàëÂì•ÊòéÊòé‰π≥Á≥ñ‰∏çËÄêÔºåÊ†°ÂåªÈô¢Â±ÖÁÑ∂ËøòÂª∫ËÆÆÊàëÂì•Â§öÂñùÁâõÂ•∂ÔºåËøôÊ†πÊú¨‰∏çÊòØÁâõÂ•∂„ÄÇ",
                "ËøôÂÖ∂‰∏≠‰∏ÄÂÆöÊúâ‰ªÄ‰πàÈò¥Ë∞ãÔºåÂæóÊâæÊú∫‰ºöÂéªÊ†°ÂåªÈô¢Ë∞ÉÊü•„ÄÇ",
                "ÊÄª‰πãËøô‰∏™ÁâõÂ•∂‰∏çËÉΩÂÜçÂñù‰∫ÜÔºåÊ≠£Â•ΩÊòéÂ§©ËøòÊòØÂä≥Âä®ËØæÔºåÊàëË¶ÅÂéªÊâæÂº†ÊôìËãóÂØπË¥®ÔºÅ"
            ],
            "Â•ΩÁöÑ": [
                "ÊîæÂøÉÂêßÔºÅÊàëÂèØÊòØÂêç‰æ¶Êé¢ÊûóÊò≠ÔºÅ"
            ],
            "Ê≥®ÊÑèÂÆâÂÖ®": [
                "ÊîæÂøÉÂêßÔºÅÊàëÂèØÊòØÂêç‰æ¶Êé¢ÊûóÊò≠ÔºÅ"
            ],
            "‰Ω†ËøòÂ•ΩÂêóÔºüÊî∂Âà∞ËØ∑ÂõûÂ§ç": [
                "ÊàëÂæàÂ•ΩÔºÅËøôÊ¨°ÁöÑ‰∫ãÊÉÖÂ§™Ë∞¢Ë∞¢‰Ω†‰∫ÜÔºåËôΩÁÑ∂Ê≤°ËÉΩÊïëÂõûÂì•Âì•Ôºå‰ΩÜËá≥Â∞ë‰∏ÄÂàáÁúüÁõ∏Â§ßÁôΩÔºå‰∏ç‰ºöÂÜçÊúâÊñ∞ÁöÑÂèóÂÆ≥ËÄÖ‰∫Ü„ÄÇ",
                "Áà∏Áà∏Â¶àÂ¶à‰∏ÄÁõ¥Âú®‰∏∫Âì•Âì•ÁöÑ‰∫ãÊÉÖË∑üÈùíËãó‰∏≠Â≠¶ÊâìÂÆòÂè∏ÔºåÊàëËøô‰∏Ä‰∏™Â§öÊúà‰∏ÄÁõ¥Âú®Â∏Æ‰ªñ‰ª¨ÔºåÊàëÁõ∏‰ø°Ë≠¶Êñπ‰πü‰∏ç‰ºöÊîæËøáÂπïÂêéÁúüÂá∂ÁöÑ„ÄÇ",
                "Á≠âÊàëË∞ÉÊï¥Â•ΩÁä∂ÊÄÅÔºåÊàë‰ª¨Ëøò‰ºöÂú®ËÆ°ÁÆóÊú∫ËµõÂú∫‰∏äËßÅÈù¢ÁöÑÔºÅ"
            ],
            "ÊúüÂæÖÊàë‰ª¨‰∏ãÊ¨°ËßÅÈù¢": [
                "Âà∞Êó∂ÂÄô‰Ω†ÂèØË¶ÅÊâã‰∏ãÁïôÊÉÖÂëÄÔºÅ"
            ],
            "È£ü‰∫∫ÊóèÂ¶Ç‰ΩïË°•ÂÖÖËÜ≥È£üÁ∫§Áª¥Ôºü": [
                "ÂêÉÊ§çÁâ©‰∫∫„ÄÇ"
            ]
        };
        
        // ÂΩïÈü≥Êñá‰ª∂ÂÜÖÂÆπ
        const recordingSegments = [
            {
                speaker: 'linzhao',
                text: '‰ªäÂ§©Â±ÖÁÑ∂ÂéªÂè¶Â§ñ‰∏ÄÁâáËãóÂúÉÔºåËøô‰∏ÄÁâáÊòéÊòæÈ´ò‰∏Ä‰∫õÔºåÁúãË∑ØÈÉΩË¥πÂä≤„ÄÇËÄå‰∏î‰∏çÊòØÂº†ÊôìËãóÂ∏¶ÈòüÔºåÁÆóÂ•πËµ∞Ëøê„ÄÇ',
                delay: 100
            },
            {
                speaker: 'maleClear',
                text: '‰Ω†Â•ΩÔºåÊê≠Ê°£ÔºåÂèàËßÅÈù¢‰∫Ü„ÄÇ',
                delay: 150
            },
            {
                speaker: 'linzhao',
                text: '‰Ω†‚Ä¶Â•ΩÔºåÂìàÂìàÔºåÂÖàÂπ≤Ê¥ªÂêß„ÄÇ',
                delay: 200
            },
            {
                speaker: 'maleSerious',
                text: 'ÂêåÂ≠¶‰ª¨ÔºåÊàë‰ª¨‰ªäÂ§©ÁöÑ‰ªªÂä°ÊòØÁÅåÊ∫âËøôÊâπÊàêÁÜü‰ΩúÁâ©ÔºåÊûùÂπ≤‰∏äÂ∑≤ÁªèÁïôÊúâÊé•Âè£ÔºåÂ§ßÂÆ∂ÊääËæìÊ∂≤ÁÆ°ÊèíÂÖ•ÂΩì‰∏≠Âç≥ÂèØ„ÄÇÊé•Âè£ÂæàÂ∞èÔºåÊàêÁÜü‰ΩúÁâ©ÊûùÂè∂ËåÇÂØÜÔºåËØ∑ÂêåÂ≠¶‰ª¨ËÄêÂøÉÂØªÊâæ„ÄÇ',
                delay: 120
            },
            {
                speaker: 'linzhao',
                text: '‰ªÄ‰πàÊé•Âè£‚Ä¶‚Ä¶',
                delay: 150,
                soundEffect: 'Ê†ëÂè∂ÊÇâÁ¥¢Â£∞'
            },
            {
                speaker: 'linzhao',
                text: 'ÂçßÊßΩÔºÅ',
                delay: 100,
                soundEffect: 'ÈáçÁâ©ËêΩÂú∞Â£∞'
            },
            {
                speaker: 'linzhao',
                text: 'Ëøô‰ªÄ‰πàÔºüÔºÅËøôÊúâ‰∏ÄÂº†ËÑ∏ÔºÅ',
                delay: 80
            },
            {
                speaker: 'maleClear',
                text: 'Êê≠Ê°£Ôºå‰Ω†Âú®ÂÅö‰ªÄ‰πàÔºü',
                delay: 150
            },
            {
                speaker: 'linzhao',
                text: '‰Ω†Ê≤°ÁúãÂà∞ÂêóÔºü',
                delay: 150,
                soundEffect: 'Ê†ëÂè∂ÊÇâÁ¥¢Â£∞'
            },
            {
                speaker: 'linzhao',
                text: 'ËøôÈáåÔºåËøôÈáåÊúâÂº†ËÑ∏ÔºÅ‰∏çÂØπ‚Ä¶‚Ä¶',
                delay: 100
            },
            {
                speaker: 'femaleDoubt',
                text: 'ÊûóÊò≠‰Ω†ÊÄé‰πà‰∫ÜÔºüËøô‰∏çÊòØÂæàÊ≠£Â∏∏ÂêóÔºüÊàëÈÉΩÁúãÂà∞Êé•Âè£‰∫ÜÔºåÂø´ÁªßÁª≠Âêß„ÄÇ',
                delay: 120
            },
            {
                speaker: 'linzhao',
                text: '‰∏çÂØπËøôÂº†ËÑ∏ÊàëËßÅËøá‚Ä¶‚Ä¶ÂØπÔºåÂú®Â≠¶Ê†°ÂÆòÁΩë‰∏äÊúâËøôÂº†ËÑ∏„ÄÇ',
                delay: 100
            },
            {
                speaker: 'sound',
                text: '',
                delay: 300,
                soundEffect: 'Ê†ëÂè∂ÊÇâÁ¥¢Â£∞'
            },
            {
                speaker: 'linzhao',
                text: '‰Ω†‰ª¨Ëá™Â∑±ÁúãËøô‰∏™‰πü‚Ä¶‚Ä¶ÂïäÔºÅËøô‰∏çÊòØÂè∂Â≠êÔºåËøôÊòØÂ§¥ÂèëÔºÅËøôÊòØÂ§¥ÂèëÔºÅ',
                delay: 70
            },
            {
                speaker: 'linzhao',
                text: '‰ªñ‰ª¨‰∏çÊòØÊ†ëÊòØ‰∫∫ÔºÅÊò®Â§©‚Ä¶Êò®Â§©‰∏çÊòØÂ∑ßÂêàÔºåÊàëÂì•‚Ä¶‰ªñÊ≤°Ê≠ªÔºå‰ªñÊ≤°Ê≠ª„ÄÇ',
                delay: 90
            },
            {
                speaker: 'sound',
                text: '',
                delay: 400,
                soundEffect: 'ËÇ¢‰ΩìÁ¢∞ÊíûÁöÑÈó∑Âìç'
            },
            {
                speaker: 'maleSerious',
                text: '‰∏çË¶Å‰π±Ë∑ëÔºÅ',
                delay: 100
            },
            {
                speaker: 'linzhao',
                text: 'Âà´Êã¶ÊàëÔºÅ',
                delay: 80
            },
            {
                speaker: 'maleSerious',
                text: 'ÊûóÊò≠‰Ω†Ë∫´‰Ωì‰∏çËàíÊúçÂêóÔºüÊòØ‰∏çÊòØÊ≤°Â•ΩÂ•ΩÂêÉÊó©È•≠‰ΩéË°ÄÁ≥ñÔºåËÄÅÂ∏àÂ∏¶‰Ω†ÂéªÊ†°ÂåªÈô¢Âêß„ÄÇ',
                delay: 110
            },
            {
                speaker: 'linzhao',
                text: 'ÊªöÂºÄÔºÅÂà´Á¢∞ÊàëÔºÅ',
                delay: 70
            },
            {
                speaker: 'sound',
                text: '',
                delay: 500,
                soundEffect: '‰∏ÄÈòµÊ∑∑‰π±ÁöÑÂô™Èü≥'
            },
            {
                speaker: 'linzhao',
                text: '‰Ω†‰ª¨‰∏ç‰ø°Ôºü‰Ω†ÔºÅ‰Ω†ËøáÊù•ÔºÅ‰Ω†Êï¢ÂëäËØâÂ§ßÂÆ∂‰Ω†Âè´‰ªÄ‰πàÂêçÂ≠óÂêóÔºü',
                delay: 90
            },
            {
                speaker: 'maleClear',
                text: '‰∏ç‚Ä¶‚Ä¶',
                delay: 200
            },
            {
                speaker: 'linzhao',
                text: 'Âà´Ë∑ëÔºÅÁªôÊàëËøáÊù•ÔºÅ‰Ω†‚Ä¶‚Ä¶‰Ω†ÁöÑÊâã‚Ä¶‚Ä¶Êéâ‰∫Ü‚Ä¶‚Ä¶',
                delay: 120
            },
            {
                speaker: 'sound',
                text: '',
                delay: 600,
                soundEffect: 'Ê§çÁâ©Ê†πËåéÊñ≠Ë£ÇÂ£∞'
            },
            {
                type: 'narration',
                text: 'Áü≠‰øÉÁöÑÂØÇÈùô‰πãÂêéÔºåÊÅêÊÖåÁ™ÅÁÑ∂ÁàÜÂèëÔºåÂ§ßÂÆ∂ÈÉΩÂ§ßÂñäÁùÄÊúâÊÄ™Áâ©ÊúâÊÄ™Áâ©„ÄÇ',
                delay: 100
            },
            {
                type: 'narration',
                text: '‰Ω†ÂæàÈöæÊÉ≥Ë±°ÈÇ£ÊòØÊÄéÊ†∑ÁöÑÊ∑∑‰π±Ôºå‰∫∫‰ª¨Â∞ñÂè´„ÄÅÂ•îÈÄÉ„ÄÅÁ≤æÁ•ûÂ¥©Ê∫ÉÔºåÂê¨‰∏äÂéªÊúâ‰∫∫ÊëîÂÄí„ÄÅ‰∫íÊÆ¥ÔºåÂòàÊùÇÁöÑÂ£∞ÂìçÁîöËá≥Ê∑πÊ≤°‰∫ÜÊûóÊò≠È¢†‰∏âÂÄíÂõõÁöÑÂñÉÂñÉËá™ËØ≠ÔºåËÄå‰∏î‰ºº‰πéÊ∞∏Ëøú‰πüÁ≠â‰∏çÂà∞Â∞ΩÂ§¥„ÄÇ',
                delay: 80
            },
            {
                type: 'narration',
                text: 'Â∞±Âú®‰Ω†ÂùöÊåÅ‰∏ç‰∏ãÂéªÊâìÁÆóÂÖ≥ÊéâÂΩïÈü≥ÁöÑÊó∂ÂÄôÔºåÂ∞ñÈîêÁöÑË≠¶Á¨õÂ£∞ÂàíÂºÄ‰∫Ü‰∏ÄÂàáÊ∑∑‰π±‚Ä¶‚Ä¶',
                delay: 120
            }
        ];

        // ËØ¥ËØùËÄÖÊò†Â∞Ñ
        const speakerNames = {
            'linzhao': { name: 'ÊûóÊò≠', className: 'speaker-linzhao' },
            'maleClear': { name: 'Ê∏Ö‰∫ÆÁöÑÁî∑Â£∞', className: 'speaker-male-clear' },
            'maleSerious': { name: '‰∏•ËÇÉÁî∑Â£∞', className: 'speaker-male-serious' },
            'femaleDoubt': { name: 'ÁñëÊÉëÁöÑÂ•≥Â£∞', className: 'speaker-female-doubt' }
        };
        
        // ËÅäÂ§©Êó•ÊúüÈ°∫Â∫è
        const chatDates = [
            "2025.08.31 23:30", "2025.09.01 07:05", "2025.09.02 21:30", 
            "2025.09.08 14:35", "2025.09.08 20Ôºö40", "2025.09.08 20Ôºö50",
            "2025.09.08 20Ôºö55", "2025.09.09 10:30","2025.09.09 12:12", 
            "2025.09.09 12:48", "2025.09.15 06:30", "2025.09.15 21:35",
            "2025.09.15 21:38", "2025.09.15 21:45", "2025.09.15 22:25", 
            "2025.09.15 00:50", "2025.09.15 01:05", "2025.09.15 01:35",
            "2025.09.16 07:35", "2025.09.16 07:45", "ÁªìÂ±Ä", 
            
        ];
        
        // ÂΩìÂâçËÅäÂ§©Áä∂ÊÄÅ
        let currentDateIndex = 0;
        let currentKeyword = "start";
        let isWaitingForResponse = false;
        let conversationHistory = [];
        let systemPromptShown = false;
        let conversationStep = 0;
        let reportAnswers = {};
        
        // ‰∏æÊä•‰ø°Â°´Á©∫Êï∞ÊçÆ
        const reportBlanks = [
            { id: "date", placeholder: "2025Âπ¥3Êúà8Êó•", correctAnswer: "2025Âπ¥3Êúà8Êó•" },
            { id: "ycGene", placeholder: "YCÂü∫Âõ†Êê∫Â∏¶ËÄÖ", correctAnswer: "YCÂü∫Âõ†Êê∫Â∏¶ËÄÖ" },
            { id: "nutritionLiquid", placeholder: "YC-08Ëê•ÂÖªÊ∂≤", correctAnswer: "YC-08Ëê•ÂÖªÊ∂≤" },
            { id: "brand", placeholder: "Ëã±ÊùêËâØÂìÅ", correctAnswer: "Ëã±ÊùêËâØÂìÅ" }
        ];
        
        // DOMÂÖÉÁ¥†
        const emailModal = document.getElementById('emailModal');
        const reportModal = document.getElementById('reportModal');
        const recordingModal = document.getElementById('recordingModal');
        const mainContainer = document.getElementById('mainContainer');
        const closeEmailBtn = document.getElementById('closeEmailBtn');
        const chatWindow = document.getElementById('chatWindow');
        const messageInput = document.getElementById('messageInput');
        const sendButton = document.getElementById('sendButton');
        const typingIndicator = document.getElementById('typingIndicator');
        const currentDateElement = document.getElementById('currentDate');
        
        // ÂΩïÈü≥ÂºπÁ™óÁõ∏ÂÖ≥ÂÖÉÁ¥†
        const recordingTranscript = document.getElementById('recordingTranscript');
        const recordingWarningFlash = document.getElementById('recordingWarningFlash');
        const recordingSoundIndicator = document.getElementById('recordingSoundIndicator');
        
        // ÂõæÁâáÊîæÂ§ßÂäüËÉΩÂèòÈáè
        let currentImageScale = 1;
        let isDragging = false;
        let dragStartX, dragStartY;
        let imageOffsetX = 0, imageOffsetY = 0;
        let startOffsetX = 0, startOffsetY = 0;
        
        // Ê∏≤ÊüìËÅäÂ§©Ê∂àÊÅØ
    function renderMessage(message, date = null) {
    const messageDiv = document.createElement('div');
    messageDiv.className = `message ${message.type}`;
    
    const header = document.createElement('div');
    header.className = 'message-header';
    
    // Â¶ÇÊûúÊòØÁ≥ªÁªüÊ∂àÊÅØÔºå‰∏çÊòæÁ§∫Êó∂Èó¥
    if (message.type === "system") {
        header.innerHTML = `${message.sender}`; // Âè™ÊòæÁ§∫Âèë‰ª∂‰∫∫Ôºå‰∏çÊòæÁ§∫Êó∂Èó¥
    } else {
        // ÈùûÁ≥ªÁªüÊ∂àÊÅØÊ≠£Â∏∏ÊòæÁ§∫Êó∂Èó¥
        const timeStr = message.time;
        header.innerHTML = `${message.sender} <span class="message-time">${timeStr}</span>`;
    }
    
    const content = document.createElement('div');
    content.className = 'message-content';
    
            // Â§ÑÁêÜÂõæÁâáÂíåÈìæÊé•
let contentText = message.content;
if (contentText.includes('.jpg')) {
    contentText = contentText.replace(/(\S+\.jpg)/g, (match) => {
        // ÂõæÁâáURLÊò†Â∞Ñ
        const imageMapping = {
            "Êó©È§êÂõæÁâá.jpg": "https://i.imgs.ovh/2026/01/02/Ci6Nrm.jpeg",
            "È£üÂ†ÇËèúÂçïÂõæÁâá.jpg": "https://i.imgs.ovh/2026/01/02/Ci8fxY.md.png",
            "ÂÆøËàçÂÆàÂàô.jpg": "https://i.imgs.ovh/2026/01/02/Ci6is9.md.jpeg",
            "Ê†°Âõ≠Âç°ÁÖßÁâá.jpg": "https://i.imgs.ovh/2026/01/02/Ci8COp.md.jpeg",
            "ÂÇ®Áâ©ÊüúÂØÜÁ†ÅÈîÅ.jpg": "https://i.imgs.ovh/2026/01/02/Ci61xF.md.jpeg",
			"ÂΩïÈü≥Êñá‰ª∂ÂõæÁâá.jpg":"https://i.imgs.ovh/2026/01/02/Ci8vvb.md.jpeg",
            "Ë∫´‰∏äÁöÑÂàíÁóïÂõæÁâá.jpg": "https://i.imgs.ovh/2026/01/02/CiQ3tY.md.jpeg",
			"‰∏ÄÂ†ÜÊ°£Ê°àË¢ã.jpg":"https://i.imgs.ovh/2026/01/02/CiDPl9.jpeg",
            "Âº†ÊôìËãóÂ∑•‰ΩúÊó•Âøó.jpg": "https://i.imgs.ovh/2026/01/02/CikntN.jpeg",
            "Êó•ËÆ∞1.jpg": "https://i.imgs.ovh/2026/01/02/Ci8yk6.md.jpeg",
            "Êó•ËÆ∞2.jpg": "https://i.imgs.ovh/2026/01/02/Ci8ZNd.md.jpeg",
            "Êó•ËÆ∞3.jpg": "https://i.imgs.ovh/2026/01/02/Ci8jVg.md.jpeg",
            "Êó•ËÆ∞4.jpg": "https://i.imgs.ovh/2026/01/02/Ci8cn0.md.jpeg",
            "Êó•ËÆ∞5.jpg": "https://i.imgs.ovh/2026/01/02/Ci8O4O.md.jpeg",
            "Ê†°Êúç‰∏äÁöÑËÑöÂç∞.jpg": "https://i.imgs.ovh/2026/01/02/Ci80pc.md.jpeg"
        };
        
        // ‰ªéÊò†Â∞Ñ‰∏≠Ëé∑ÂèñURLÔºåÂ¶ÇÊûúÊâæ‰∏çÂà∞Âàô‰ΩøÁî®ÈªòËÆ§URL
        const imageUrl = imageMapping[match] || "https://images.unsplash.com/photo-1541963463532-d68292c34b19?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80";
        return `<img src="${imageUrl}" alt="${match}" class="zoomable-img">`;
    });
}
            
            content.innerHTML = contentText;
            
            messageDiv.appendChild(header);
            messageDiv.appendChild(content);
            chatWindow.appendChild(messageDiv);
            
            // Ê∑ªÂä†Âà∞ÂéÜÂè≤ËÆ∞ÂΩï
            conversationHistory.push({
                ...message,
                date: date || chatDates[currentDateIndex]
            });
            
            // ÊªöÂä®Âà∞Â∫ïÈÉ®
            chatWindow.scrollTop = chatWindow.scrollHeight;
            
            // ‰∏∫Êñ∞Ê∑ªÂä†ÁöÑÂõæÁâáÊ∑ªÂä†ÁÇπÂáª‰∫ã‰ª∂
            const images = messageDiv.querySelectorAll('.zoomable-img');
            images.forEach(img => {
                img.addEventListener('click', function(e) {
                    e.stopPropagation();
                    openImageZoom(this.src);
                });
            });
        }
        
        // ÊâìÂºÄÂõæÁâáÊîæÂ§ßËßÜÂõæ
        function openImageZoom(src) {
            // ÂàõÂª∫ÈÅÆÁΩ©Â±Ç
            const overlay = document.createElement('div');
            overlay.className = 'image-overlay';
    
            // ÂàõÂª∫ÊîæÂ§ßÂõæÁâáÂÆπÂô®
            const imageContainer = document.createElement('div');
            imageContainer.className = 'image-glow';
    
            // ÂàõÂª∫ÊîæÂ§ßÂõæÁâá
            const zoomImg = document.createElement('img');
            zoomImg.src = src;
            zoomImg.className = 'zoomable-image glow-border';
    
            imageContainer.appendChild(zoomImg);
            overlay.appendChild(imageContainer);
            document.body.appendChild(overlay);
    
            // Ê∑ªÂä†Á∫¢Ëâ≤Ê≥õÂÖâÁâπÊïà
            setTimeout(() => {
                imageContainer.classList.add('active');
            }, 100);
    
            // ÈáçÁΩÆÁº©ÊîæÂíå‰ΩçÁΩÆ
            currentImageScale = 1;
            imageOffsetX = 0;
            imageOffsetY = 0;
            updateImageTransform(zoomImg);
    
            // Èº†Ê†áÊªöËΩÆÁº©Êîæ
            overlay.addEventListener('wheel', function(e) {
                e.preventDefault();
                const rect = zoomImg.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
        
                const zoomIntensity = 0.1;
                const oldScale = currentImageScale;
                const delta = e.deltaY > 0 ? -zoomIntensity : zoomIntensity;
                currentImageScale = Math.max(0.5, Math.min(5, currentImageScale + delta));
        
                // Ë∞ÉÊï¥‰ΩçÁΩÆ‰ª•‰øùÊåÅÁÑ¶ÁÇπ‰∏çÂèò
                const scaleRatio = currentImageScale / oldScale;
                imageOffsetX = x - (x - imageOffsetX) * scaleRatio;
                imageOffsetY = y - (y - imageOffsetY) * scaleRatio;
        
                updateImageTransform(zoomImg);
        
                // Ê†πÊçÆÁº©ÊîæÁ∫ßÂà´Ë∞ÉÊï¥Ê≥õÂÖâÂº∫Â∫¶
                updateGlowIntensity(currentImageScale, imageContainer);
            });
    
            // ÊãñÊãΩÂäüËÉΩ
            zoomImg.addEventListener('mousedown', function(e) {
                isDragging = true;
                dragStartX = e.clientX - imageOffsetX;
                dragStartY = e.clientY - imageOffsetY;
                zoomImg.style.cursor = 'grabbing';
                e.preventDefault();
            });
    
            document.addEventListener('mousemove', function(e) {
               if (isDragging) {
                    imageOffsetX = e.clientX - dragStartX;
                    imageOffsetY = e.clientY - dragStartY;
                    updateImageTransform(zoomImg);
                }
            });
    
            document.addEventListener('mouseup', function() {
                isDragging = false;
                zoomImg.style.cursor = 'grab';
            });
    
            // ÁÇπÂáªÂÖ≥Èó≠
            overlay.addEventListener('click', function(e) {
                if (e.target === overlay || e.target === imageContainer) {
                    // ÁßªÈô§Ê≥õÂÖâÁâπÊïà
                    imageContainer.classList.remove('active');
                    setTimeout(() => {
                        if (document.body.contains(overlay)) {
                            document.body.removeChild(overlay);
                        }
                    }, 300);
                }
            });
        }

        // Êõ¥Êñ∞ÂõæÁâáÂèòÊç¢
        function updateImageTransform(img) {
            img.style.transform = `translate(${imageOffsetX}px, ${imageOffsetY}px) scale(${currentImageScale})`;
        }

        // Ê†πÊçÆÁº©ÊîæÁ∫ßÂà´Ë∞ÉÊï¥Ê≥õÂÖâÂº∫Â∫¶
        function updateGlowIntensity(scale, container) {
            const beforeElement = container.querySelector('.image-glow::before') || 
                         container.style;
    
            // Áº©ÊîæË∂äÂ§ßÔºåÊ≥õÂÖâË∂äÂº∫
            const glowIntensity = Math.min(1, (scale - 0.5) / 4.5);
            const glowOpacity = 0.3 + (glowIntensity * 0.5);
            const glowBlur = 20 + (glowIntensity * 15);
    
            // Êõ¥Êñ∞CSSÂèòÈáè
            container.style.setProperty('--glow-opacity', glowOpacity);
            container.style.setProperty('--glow-blur', `${glowBlur}px`);
    
            // Âä®ÊÄÅÊõ¥Êñ∞‰º™ÂÖÉÁ¥†Ê†∑Âºè
            if (container.style) {
                const pseudoStyle = `
                    opacity: ${glowOpacity};
                    filter: blur(${glowBlur}px);
        `;
                container.setAttribute('data-glow', pseudoStyle);
            }
        }
        
        // Ê∑ªÂä†Êó•ÊúüÂàÜÈöîÁ∫ø
        function addDateDivider(date) {
            const divider = document.createElement('div');
            divider.className = 'date-divider';
            divider.innerHTML = `<span>${date}</span>`;
            chatWindow.appendChild(divider);
        }
        
        // Ê∑ªÂä†ÂéÜÂè≤Ê∂àÊÅØÊèêÁ§∫
        function addHistoryNote(date) {
            const note = document.createElement('div');
            note.className = 'history-note';
            note.textContent = `‰ª•‰∏äÂéÜÂè≤Ê∂àÊÅØ ${date}`;
            chatWindow.appendChild(note);
        }
        
        // ÊòæÁ§∫Á≥ªÁªüÊèêÁ§∫
        function showSystemPrompt() {
            if (systemPrompts[currentKeyword] && !systemPromptShown) {
                setTimeout(() => {
                    const systemMessage = {
                        sender: "Á≥ªÁªüÊèêÁ§∫",
                        content: systemPrompts[currentKeyword].prompt,
                        type: "system",
                        time: new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})
                    };
                    renderMessage(systemMessage);
                    systemPromptShown = true;
                    
                    // Êõ¥Êñ∞ËæìÂÖ•Ê°ÜÊèêÁ§∫
                    updateInputPlaceholder();
                }, 800);
            }
        }
        
        // Êõ¥Êñ∞ËæìÂÖ•Ê°ÜÊèêÁ§∫
        function updateInputPlaceholder() {
            const promptConfig = systemPrompts[currentKeyword];
            if (!promptConfig) return;
            
            switch(promptConfig.inputType) {
                case "period":
                    messageInput.placeholder = "ËæìÂÖ•‚ÄúÂ•Ω‚Äù";
                    break;
                case "question":
                    messageInput.placeholder = "ËØ∑ËæìÂÖ•ÈóÆÂè∑\"?\"...";
                    break;
                case "ellipsis":
                    messageInput.placeholder = "ËØ∑ËæìÂÖ•ÁúÅÁï•Âè∑\"......\"...";
                    break;
                case "choice":
                case "finalChoice":
                    messageInput.placeholder = "ËØ∑ËæìÂÖ•ÈÄâÈ°πÔºàÂ¶Ç: 1 Êàñ 2Ôºâ...";
                    break;
                case "report":
                    messageInput.placeholder = "ËØ∑ËæìÂÖ•\"ÊàëË¶Å‰∏æÊä•\"...";
                    break;
                default:
                    messageInput.placeholder = "ËæìÂÖ•Ê∂àÊÅØÂèëÈÄÅÁªôÊûóÊò≠...";
            }
        }
        
        // ÂàùÂßãÂåñËÅäÂ§©ËÆ∞ÂΩï
        function initializeChat() {
            chatWindow.innerHTML = '';
            const currentDate = chatDates[currentDateIndex];
            currentDateElement.textContent = currentDate;
            
            // Ê∏≤ÊüìÁ¨¨‰∏ÄÂ§©ÁöÑÂàùÂßãÊ∂àÊÅØ
            if (chatData[currentDate]) {
                chatData[currentDate].forEach(message => {
                    renderMessage(message, currentDate);
                });
            }
            
            // ÊòæÁ§∫Á¨¨‰∏Ä‰∏™Á≥ªÁªüÊèêÁ§∫
            setTimeout(() => {
                showSystemPrompt();
            }, 1000);
            
            // ÊªöÂä®Âà∞Â∫ïÈÉ®
            chatWindow.scrollTop = chatWindow.scrollHeight;
        }
        
        // Âä†ËΩΩÊåáÂÆöÊó•ÊúüÁöÑÊ∂àÊÅØ
        function loadDateMessages(dateIndex) {
            if (dateIndex < 0 || dateIndex >= chatDates.length) return;
            
            const date = chatDates[dateIndex];
            
            // Ê∑ªÂä†ÂéÜÂè≤Ê∂àÊÅØÊèêÁ§∫
            if (dateIndex > 0) {
                addHistoryNote(date);
            }
            
            // Ê∏≤ÊüìËØ•Êó•ÊúüÁöÑÊâÄÊúâÊ∂àÊÅØ
            if (chatData[date]) {
                chatData[date].forEach(message => {
                    renderMessage(message, date);
                });
            }
            
            currentDateIndex = dateIndex;
            currentDateElement.textContent = date;
            systemPromptShown = false;
            
            // Âª∂ËøüÊòæÁ§∫Êñ∞ÁöÑÁ≥ªÁªüÊèêÁ§∫
            setTimeout(() => {
                showSystemPrompt();
            }, 1000);
        }
        
        // ÊòæÁ§∫ÊâìÂ≠óÊåáÁ§∫Âô®
        function showTypingIndicator() {
            typingIndicator.style.display = 'flex';
            chatWindow.scrollTop = chatWindow.scrollHeight;
        }
        
        // ÈöêËóèÊâìÂ≠óÊåáÁ§∫Âô®
        function hideTypingIndicator() {
            typingIndicator.style.display = 'none';
        }
        
        // È™åËØÅÁî®Êà∑ËæìÂÖ•
        function validateUserInput(input) {
            const promptConfig = systemPrompts[currentKeyword];
            if (!promptConfig) return true;
            
            switch(promptConfig.inputType) {
                case "period":
                    return input === "Â•Ω" || input === "Â•Ω";
                case "question":
                    return input === "Ôºü" || input === "?";
                case "ellipsis":
                    return input === "......" || input === "„ÄÇ„ÄÇ„ÄÇ„ÄÇ„ÄÇ";
                case "choice":
                case "finalChoice":
                    if (input === "1" || input === "2") {
                        return true;
                    }
                    // Ê£ÄÊü•ÊòØÂê¶ÂåÖÂê´ÈÄâÈ°πÊñáÊú¨
                    const optionText = promptConfig.options[parseInt(input)-1];
                    return optionText && input.includes(optionText);
                case "keyword":
                    return input.includes(currentKeyword);
                case "report":
                    return input.includes("ÊàëË¶Å‰∏æÊä•");
                default:
                    return true;
            }
        }
        
        // Ëé∑ÂèñÁî®Êà∑ËæìÂÖ•ÁöÑÊ†áÂáÜÂåñÂÄº
        function normalizeUserInput(input) {
            const promptConfig = systemPrompts[currentKeyword];
            if (!promptConfig) return input;
            
            switch(promptConfig.inputType) {
                case "period":
                    return "Â•Ω";
                case "question":
                    return "Ôºü";
                case "ellipsis":
                    return "......";
                case "choice":
                case "finalChoice":
                    if (input === "1") return promptConfig.options[0];
                    if (input === "2") return promptConfig.options[1];
                    return input;
                case "report":
                    return "ÊàëË¶Å‰∏æÊä•";
                default:
                    return input;
            }
        }
        
        // Â§ÑÁêÜ‰∏æÊä•‰ø°
        function showReportModal() {
            const reportContent = document.getElementById('reportContent');
            let reportHTML = `
                <div style="font-family: 'SimSun', 'ÂÆã‰Ωì', serif; line-height: 1.8; font-size: 16px;">
                    <div class="instructions">
                        <h3>Â°´ÂÜôËØ¥ÊòéÔºö</h3>
                        <ul>
                            <li>ËØ∑‰ªîÁªÜÈòÖËØª‰∏æÊä•‰ø°ÂÜÖÂÆπÔºåÂú®Á∫¢Ëâ≤ÊñπÊ°ÜÂ§ÑÂ°´ÂÜôÂØπÂ∫îÁöÑÂÖ≥ÈîÆ‰ø°ÊÅØ</li>
                            <li>Â∞ÜÈº†Ê†áÊÇ¨ÂÅúÂú®ËæìÂÖ•Ê°Ü‰∏äÂèØÊü•ÁúãÊèêÁ§∫‰ø°ÊÅØ</li>
                            <li>Â°´ÂÜôÂÆåÊï¥ÂêéÁÇπÂáª"Á°ÆËÆ§ÂèëÈÄÅ‰∏æÊä•‰ø°"ÊåâÈíÆÊèê‰∫§</li>
                        </ul>
                    </div>
                    
                    <div class="letter-container">
                        <div class="letter-header">
                            <h2>ÂÖ≥‰∫éÈùíËãó‰∏≠Â≠¶Ê∂âÂ´åËøùÊ≥ïÁäØÁΩ™Ë°å‰∏∫ÁöÑÂåøÂêç‰∏æÊä•‰ø°</h2>
                            <p>Ê≠¶Èò≥Â∏ÇÂÖ¨ÂÆâÂ±ÄÂπ∂ËΩ¨Â∏ÇÊïôËÇ≤Â±ÄÁõëÂØüÈÉ®Èó®Ôºö</p>
                        </div>
                        
                        <div class="letter-body">
                            <p>2025Âπ¥3Êúà8Êó•ÈùíËãó‰∏≠Â≠¶Â≠¶ÁîüÊûóÂèà‰∏äÂêäËá™ÊùÄÊ°àÂè¶ÊúâÈöêÊÉÖÔºåÈÄöËøáÊ∑±ÂÖ•Ë∞ÉÊü•ÂíåÁé∞Âú∫ÂèñËØÅÂèØÁü•ÈùíËãó‰∏≠Â≠¶Âç±ÂÆ≥Â≠¶ÁîüÁîüÂëΩÂÆâÂÖ®„ÄÅ‰º™ÈÄ†Ê≠ª‰∫°ËØÅÊòéÊé©Áõñ‰∫ãÊïÖÁúüÁõ∏Ôºå‰∏îÊ∂âÂ´å‰∏•ÈáçËøùÊ≥ïÁäØÁΩ™„ÄÇ</p>
                            
                            <p>Áé∞‰∏æÊä•ÈùíËãó‰∏≠Â≠¶Â≠òÂú®‰ª•‰∏ãÈáçÂ§ßËøùÊ≥ïÁäØÁΩ™Â´åÁñëÔºö</p>
                            
                            <p>‰∏Ä„ÄÅËØ•Ê†°‰ª•"<span class="blank-input">
                                <input type="text" id="blank1" placeholder="ËØ∑ËæìÂÖ•‰Ω†ÁöÑÁ≠îÊ°à" value="${reportAnswers.blank1 || ''}">
                                <span class="blank-hint">ÊèêÁ§∫ÔºöËØ•Ê†°ÁöÑËÆ°ÂàíÂêçÁß∞</span>
                            </span>"‰∏∫ÂêçÔºåÊØèÂπ¥ÈÄöËøáÂÖ•Â≠¶ËÄÉËØïÂíå‰ΩìÊ£ÄÁ≠õÊü•ÊãõÁîü500ÂêçÔºå‰ΩìÊ£Ä‰∏≠Á≥ªÁªüÊÄßÈááÈõÜÂ≠¶ÁîüÂü∫Âõ†Ê†∑Êú¨ÔºåÂÆû‰∏∫ÊåëÈÄâ<span class="blank-input">
                                <input type="text" id="blank2" placeholder="ËØ∑ËæìÂÖ•‰Ω†ÁöÑÁ≠îÊ°à" value="${reportAnswers.blank2 || ''}">
                                <span class="blank-hint">ÊèêÁ§∫ÔºöÁâπÊÆäÁöÑÂü∫Âõ†ÂêçÁß∞</span>
                            </span>Êê∫Â∏¶ËÄÖÔºå‰ª•ÈùûÊ≥ïÂü∫Âõ†ÊîπÈÄ†Ëø´‰ΩøÂ≠¶ÁîüËÇ¢‰ΩìÂèëÁîüÁï∏ÂΩ¢ÂºÇÂèò„ÄÇÂè¶Êúâ<span class="blank-input">
                                <input type="text" id="blank3" placeholder="ËØ∑ËæìÂÖ•‰Ω†ÁöÑÁ≠îÊ°à" value="${reportAnswers.blank3 || ''}">
                                <span class="blank-hint">ÊèêÁ§∫ÔºöÊï∞Â≠óÂΩ¢Âºè</span>
                            </span>ÂêçÁ±ª‰∫∫ÁîüÁâ©‰ΩìÔºåÈÄêÊ≠•Â§çÂà∂Ê≠£Â∏∏Â≠¶ÁîüÂ§ñË≤å„ÄÅËÆ∞ÂøÜÔºåÊ®°‰ªøÂÖ∂ÊÄùÁª¥Ë°åÂä®ÔºåÊúÄÁªàÈ°∂ÊõøÁúüÂÆûÂ≠¶ÁîüË∫´‰ªΩÔºåÂπ∂ËøõÂÖ•Á§æ‰ºöÂÖ≥ÈîÆÂ≤ó‰Ωç„ÄÇ</p>
                            
                            <p>‰∫å„ÄÅÊ†°ÊñπÂ∞ÜÊâÄÂ±ûÊ†°ÂåªÈô¢Áîü‰∫ßÁöÑÈùûÊ≥ïËçØÂâÇ<span class="blank-input">
                                <input type="text" id="blank4" placeholder="ËØ∑ËæìÂÖ•‰Ω†ÁöÑÁ≠îÊ°à" value="${reportAnswers.blank4 || ''}">
                                <span class="blank-hint">ÊèêÁ§∫ÔºöÈùûÊ≥ïËçØÂâÇÂêçÁß∞</span>
                            </span>‰º™Ë£ÖÊàêÊØèÊó•ÁâõÂ•∂ÔºåÊäïÊîæÁ•ûÁªèÁ±ªËçØÁâ©ÔºåËØ±ÂØºË∫´‰ΩìÂèëÁîüÊ§çÁâ©ÂåñÂèòÂºÇÔºåËê•ÈÄ†Ê≠£Â∏∏Ê†°Âõ≠ÁîüÊ¥ªÂπªËßâÂπ∂ÊìçÊéßÂ≠¶ÁîüËÆ§Áü•ÂèëËÇ≤„ÄÇ</p>
                            
                            <p>‰∏â„ÄÅÂà©Áî®Ê†°ÂÜÖËØïÈ™åÂü∫Âú∞"<span class="blank-input">
                                <input type="text" id="blank5" placeholder="ËØ∑ËæìÂÖ•‰Ω†ÁöÑÁ≠îÊ°à" value="${reportAnswers.blank5 || ''}">
                                <span class="blank-hint">ÊèêÁ§∫ÔºöÂõõ‰∏™Â≠óÁöÑËØïÈ™åÂü∫Âú∞ÂêçÁß∞</span>
                            </span>"ÂØπÂ§±ÂéªÂéüÊúâÁ§æ‰ºöË∫´‰ªΩÁöÑÊØï‰∏öÁîüËøõË°åÈùûÊ≥ï‰∫∫‰ΩìÂÆûÈ™å,ÂÖªÊÆñÂèòÂºÇ‰∫∫‰Ωì‰Ωú‰∏∫È£üÊùêÂéüÊñôÔºåÂä†Â∑•ÊàêÊ†°Ëë£‰∫ã‰ºöÊóó‰∏ãÂìÅÁâå"<span class="blank-input">
                                <input type="text" id="blank6" placeholder="ËØ∑ËæìÂÖ•‰Ω†ÁöÑÁ≠îÊ°à" value="${reportAnswers.blank6 || ''}">
                                <span class="blank-hint">ÊèêÁ§∫ÔºöÂõõ‰∏™Â≠óÁöÑÂìÅÁâåÂêçÁß∞</span>
                            </span>"ÁΩêÂ§¥È£üÂìÅÔºåÊîØÊíëÁ±ª‰∫∫‰ΩìÁîüÈïøÊ¥ªÂä®„ÄÇ</p>
                            
                            <p>ÂÖ≥ÈîÆËØÅÊçÆËóèÂåø‰∫éËØ•Ê†°ÂÜúÂú∫ÂüπËÇ≤Âå∫„ÄÅÊ†°ÂåªÈô¢ÁâπÊÆäÈ°πÁõÆÊúçÂä°Âô®ÂèäÈ£üÂ†ÇÂêéÂé®Âä†Â∑•ÊµÅÊ∞¥Á∫ø„ÄÇ</p>
                            
                            <p>ËØ•Ê°àÂ∑≤ÊûÑÊàêÈùûÊ≥ï‰∫∫‰ΩìÂÆûÈ™å„ÄÅÂç±ÂÆ≥ÂÖ¨ÂÖ±ÂÆâÂÖ®„ÄÅ‰º™ÈÄ†Ë∫´‰ªΩÁ≠âÂ§öÈáçÁäØÁΩ™Ôºå‰∏•ÈáçÂç±ÂÆ≥Á§æ‰ºöÂÆâÂÖ®„ÄÇ</p>
                            
                            <p>ÊÅ≥ËØ∑Ë¥µÈÉ®Èó®Á´ãÂç≥ÊàêÁ´ã‰∏ìÊ°àÁªÑÁ´ãÊ°à‰æ¶Êü•ÔºåËß£ÊïëÂèóÊéßÂ≠¶ÁîüÔºåÊéßÂà∂Áõ∏ÂÖ≥‰∫∫ÂëòÔºåÊü•Â∞ÅÊ∂âÊ°àÂú∫ÊâÄ„ÄÇ</p>
                            
                            <div class="letter-signature">
                                <p>2025Âπ¥9Êúà16Êó•</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="result-message" id="resultMessage"></div>
                    
                    <div class="btn-container">
                        <button class="submit-btn" id="submitReportBtn">Á°ÆËÆ§ÂèëÈÄÅ‰∏æÊä•‰ø°</button>
                    </div>
                    
                    <div class="footer">
                        <p>Êú¨Á≥ªÁªü‰∏∫ÂåøÂêçÊèê‰∫§ÔºåÊâÄÊúâ‰ø°ÊÅØÂ∞ÜÁõ¥Êé•ÈÄÅËææÊ≠¶Èò≥Â∏ÇÂÖ¨ÂÆâÂ±ÄÂíåÂ∏ÇÊïôËÇ≤Â±ÄÁõëÂØüÈÉ®Èó®</p>
                        <p>¬© 2025 Ê≠¶Èò≥Â∏ÇÂåøÂêç‰∏æÊä•Á≥ªÁªü | ‰∏•Ê†º‰øùÂØÜ‰∏æÊä•‰∫∫‰ø°ÊÅØ</p>
                    </div>
                </div>
            `;
            
            reportContent.innerHTML = reportHTML;
            
            // Ê∑ªÂä†Êèê‰∫§ÊåâÈíÆ‰∫ã‰ª∂ÁõëÂê¨
            setTimeout(() => {
                const submitBtn = document.getElementById('submitReportBtn');
                if (submitBtn) {
                    submitBtn.addEventListener('click', submitReport);
                }
            }, 100);
            
            reportModal.style.display = 'flex';
        }
        
        // Êèê‰∫§‰∏æÊä•‰ø°
        function submitReport() {
            const blank1 = document.getElementById('blank1').value.trim();
            const blank2 = document.getElementById('blank2').value.trim();
            const blank3 = document.getElementById('blank3').value.trim();
            const blank4 = document.getElementById('blank4').value.trim();
            const blank5 = document.getElementById('blank5').value.trim();
            const blank6 = document.getElementById('blank6').value.trim();
            
            // ‰øùÂ≠òÁ≠îÊ°à
            reportAnswers.blank1 = blank1;
            reportAnswers.blank2 = blank2;
            reportAnswers.blank3 = blank3;
            reportAnswers.blank4 = blank4;
            reportAnswers.blank5 = blank5;
            reportAnswers.blank6 = blank6;
            
            // È™åËØÅÊâÄÊúâÂ≠óÊÆµÊòØÂê¶Â°´ÂÜô
            if (!blank1 || !blank2 || !blank3 || !blank4 || !blank5 || !blank6) {
                alert("ËØ∑Â°´ÂÜôÊâÄÊúâÁ©∫ÁôΩÂ≠óÊÆµÔºÅ");
                return;
            }
            
            // Ê≠£Á°ÆÁ≠îÊ°à
            const correctAnswers = {
                blank1: "Ëã±ÊùêÂüπËÇ≤ËÆ°Âàí",
                blank2: "YCÂü∫Âõ†",
                blank3: "500",
                blank4: "YC-08Ëê•ÂÖªÊ∂≤",
                blank5: "ÈùíËãóÂÜúÂú∫",
                blank6: "Ëã±ÊùêËâØÂìÅ"
            };
            
            // È™åËØÅÁ≠îÊ°à
            const userAnswers = {
                blank1: blank1,
                blank2: blank2,
                blank3: blank3,
                blank4: blank4,
                blank5: blank5,
                blank6: blank6
            };
            
            let allCorrect = true;
            let errorFields = [];
            
            // Ê£ÄÊü•ÊØè‰∏™Á≠îÊ°à
            for (const key in correctAnswers) {
                if (userAnswers[key] !== correctAnswers[key]) {
                    allCorrect = false;
                    errorFields.push(key);
                }
            }
            
            // ÊòæÁ§∫ÁªìÊûú
            const resultMessage = document.getElementById('resultMessage');
            if (allCorrect) {
                resultMessage.textContent = "‚úì ‰∏æÊä•‰ø°ÂèëÈÄÅÊàêÂäüÔºÅÊâÄÊúâ‰ø°ÊÅØÊ≠£Á°ÆÔºåÂ∑≤ÊàêÂäüÊèê‰∫§Ëá≥Ê≠¶Èò≥Â∏ÇÂÖ¨ÂÆâÂ±ÄÂíåÂ∏ÇÊïôËÇ≤Â±ÄÁõëÂØüÈÉ®Èó®„ÄÇ";
                resultMessage.className = "result-message success";
                resultMessage.style.display = "block";
                
                // Ê®°ÊãüÂèëÈÄÅÊàêÂäüÂêéÁöÑÊïàÊûú
                const submitBtn = document.getElementById('submitReportBtn');
                submitBtn.disabled = true;
                submitBtn.textContent = "Â∑≤ÂèëÈÄÅ";
                
                // 3ÁßíÂêéÂÖ≥Èó≠ÂºπÁ™óÂπ∂ÁªßÁª≠ËÅäÂ§©ÊµÅÁ®ã
                setTimeout(() => {
                    reportModal.style.display = 'none';
                    currentKeyword = "ÂΩïÈü≥Êñá‰ª∂";
                    systemPromptShown = false;
                    showRecordingModal();
                }, 3000);
            } else {
                let errorText = "√ó ÂèëÈÄÅÂ§±Ë¥•ÔºÅ‰ª•‰∏ã‰ø°ÊÅØÂ°´ÂÜôÊúâËØØÔºö";
                
                // Ê†πÊçÆÈîôËØØÁöÑÂ≠óÊÆµÊèê‰æõÂÖ∑‰ΩìÊèêÁ§∫
                errorFields.forEach((field, index) => {
                    const fieldNumber = field.replace('blank', '');
                    const fieldNames = {
                        "blank1": "ÊãõÁîüËÆ°ÂàíÂêçÁß∞",
                        "blank2": "Âü∫Âõ†ÂêçÁß∞",
                        "blank3": "Á±ª‰∫∫ÁîüÁâ©‰ΩìÊï∞Èáè",
                        "blank4": "ÈùûÊ≥ïËçØÂâÇÂêçÁß∞",
                        "blank5": "ËØïÈ™åÂü∫Âú∞ÂêçÁß∞",
                        "blank6": "ÁΩêÂ§¥È£üÂìÅÂìÅÁâå"
                    };
                    
                    errorText += ` ${fieldNames[field]}`;
                    if (index < errorFields.length - 1) {
                        errorText += "„ÄÅ";
                    }
                });
                
                errorText += "„ÄÇËØ∑Ê£ÄÊü•ÂêéÈáçÊñ∞Êèê‰∫§„ÄÇ";
                
                resultMessage.textContent = errorText;
                resultMessage.className = "result-message error";
                resultMessage.style.display = "block";
                
                // È´ò‰∫ÆÈîôËØØÁöÑËæìÂÖ•Ê°Ü
                errorFields.forEach(field => {
                    document.getElementById(field).style.borderColor = "#b30000";
                    document.getElementById(field).style.backgroundColor = "#fff0f0";
                    document.getElementById(field).style.boxShadow = "0 0 5px rgba(255, 0, 0, 0.5)";
                });
                
                // ÈáçÁΩÆÊ≠£Á°ÆÁöÑËæìÂÖ•Ê°ÜÊ†∑Âºè
                for (const key in correctAnswers) {
                    if (!errorFields.includes(key)) {
                        document.getElementById(key).style.borderColor = "#99cc99";
                        document.getElementById(key).style.backgroundColor = "#f9fff9";
                        document.getElementById(key).style.boxShadow = "none";
                    }
                }
                
                // 5ÁßíÂêéÈöêËóèÈîôËØØ‰ø°ÊÅØ
                setTimeout(function() {
                    resultMessage.style.display = "none";
                }, 5000);
            }
        }
        
        // ÊòæÁ§∫ÂΩïÈü≥ÂºπÁ™óÔºà‰øÆÊîπÁâàÊú¨Ôºâ
		// ==================== ÊèíÂÖ•‰ΩçÁΩÆÔºöÂú®showRecordingModal()ÂáΩÊï∞ÂÆö‰πâ‰πãÂâç ====================

// ==================== GIFÈ¢ÑÂä†ËΩΩÂäüËÉΩ ====================
// Âú®ÂΩïÈü≥Êí≠ÊîæÊó∂È¢ÑÂä†ËΩΩGIF‰ΩÜ‰∏çÊòæÁ§∫
let gifPreloaded = false;

// È¢ÑÂä†ËΩΩGIFÂáΩÊï∞
function preloadTerrorGif() {
    if (gifPreloaded) return;
    
    console.log("ÂºÄÂßãÈ¢ÑÂä†ËΩΩÊÅêÊÄñGIF...");
    
    // ÂàõÂª∫ÈöêËóèÁöÑImageÂØπË±°È¢ÑÂä†ËΩΩGIF
    const preloadImage = new Image();
    
    preloadImage.onload = function() {
        console.log("ÊÅêÊÄñGIFÈ¢ÑÂä†ËΩΩÂÆåÊàê");
        gifPreloaded = true;
        
        // Â∞ÜÈ¢ÑÂä†ËΩΩÁöÑGIFÂ∫îÁî®Âà∞terrorGifÂÖÉÁ¥†
        terrorGif.src = gifUrl;
        terrorGif.style.display = 'none'; // ‰øùÊåÅÈöêËóè
        
        // ËÆæÁΩÆÂä†ËΩΩÂÆåÊàêÊ†áËÆ∞
        terrorGif.dataset.preloaded = 'true';
    };
    
    preloadImage.onerror = function() {
        console.warn("ÊÅêÊÄñGIFÈ¢ÑÂä†ËΩΩÂ§±Ë¥•ÔºåÂ∞ÜÂú®ÊòæÁ§∫Êó∂ÈáçÊñ∞Âä†ËΩΩ");
        // Âç≥‰ΩøÈ¢ÑÂä†ËΩΩÂ§±Ë¥•Ôºå‰πü‰∏çÂΩ±ÂìçÂêéÁª≠ÊòæÁ§∫
    };
    
    // ÂºÄÂßãÂä†ËΩΩÔºà‰ΩøÁî®ÂéüGIF URLÔºâ
    preloadImage.src = gifUrl;
}

// ‰øÆÊîπshowRecordingModalÂáΩÊï∞ÔºåÊ∑ªÂä†È¢ÑÂä†ËΩΩ
const originalShowRecordingModal = window.showRecordingModal;
window.showRecordingModal = function() {
    // Ë∞ÉÁî®ÂéüÂßãÂáΩÊï∞
    if (typeof originalShowRecordingModal === 'function') {
        originalShowRecordingModal();
    }
    
    // ÂºÄÂßãÈ¢ÑÂä†ËΩΩGIF
    console.log("ÂΩïÈü≥ÂºπÁ™óÊâìÂºÄÔºåÂºÄÂßãÈ¢ÑÂä†ËΩΩÊÅêÊÄñGIF...");
    setTimeout(() => {
        preloadTerrorGif();
    }, 500);
};

// ‰øÆÊîπshowTerrorPageÂáΩÊï∞Ôºå‰ΩøÁî®È¢ÑÂä†ËΩΩÁöÑGIF
const originalShowTerrorPage = window.showTerrorPage;
window.showTerrorPage = function() {
    // Ë∞ÉÁî®ÂéüÂßãÂáΩÊï∞
    if (typeof originalShowTerrorPage === 'function') {
        originalShowTerrorPage();
    }
    
    // ‰ΩøÁî®È¢ÑÂä†ËΩΩÁöÑGIF
    if (gifPreloaded && terrorGif.src === gifUrl) {
        console.log("‰ΩøÁî®È¢ÑÂä†ËΩΩÁöÑGIF");
        terrorGif.style.display = 'none'; // ÁªßÁª≠ÈöêËóèÔºåÁõ¥Âà∞Áî®Êà∑ÁÇπÂáªÁªßÁª≠
    } else {
        console.log("GIFÊú™È¢ÑÂä†ËΩΩÔºåÁé∞Âú®ÂºÄÂßãÂä†ËΩΩ");
        terrorGif.src = gifUrl;
        terrorGif.style.display = 'none';
    }
};

// ‰ºòÂåñcloseTerrorPopupÁÇπÂáª‰∫ã‰ª∂Â§ÑÁêÜ
const originalCloseTerrorPopupHandler = closeTerrorPopup.onclick;
closeTerrorPopup.onclick = function(e) {
    // Ë∞ÉÁî®ÂéüÂßãÂ§ÑÁêÜÂáΩÊï∞
    if (typeof originalCloseTerrorPopupHandler === 'function') {
        originalCloseTerrorPopupHandler.call(this, e);
    }
    
    // ÈöêËóèÂºπÁ™ó
    terrorPopup.style.display = 'none';
    
    // ÊòæÁ§∫GIFÂíåÁâπÊïà
    gifFullscreen.style.display = 'flex';
    
    // Á°Æ‰øùGIFÁ´ãÂç≥ÊòæÁ§∫
    if (gifPreloaded && terrorGif.complete) {
        terrorGif.style.display = 'block';
        console.log("Á´ãÂç≥ÊòæÁ§∫È¢ÑÂä†ËΩΩÁöÑGIF");
    } else {
        // Â¶ÇÊûúËøòÊ≤°Âä†ËΩΩÂÆåÔºåÊòæÁ§∫Âä†ËΩΩÁä∂ÊÄÅÂπ∂Á≠âÂæÖ
        terrorGif.style.display = 'block';
        terrorGif.onload = function() {
            console.log("GIFÂä†ËΩΩÂÆåÊàêÔºåÁé∞Âú®ÊòæÁ§∫");
            gifPreloaded = true;
        };
    }
    
    bloodOverlay.style.display = 'block';
    borderFlash.style.display = 'block';
    gifPlayed = true;
    
    // ÂàõÂª∫Ë°ÄÊª¥ÁâπÊïà
    createBloodDrip();
    const bloodInterval = setInterval(createBloodDrip, 3500);
    
    // Ê†πÊçÆGIFÊåÅÁª≠Êó∂Èó¥ËÆæÁΩÆË∑≥ËΩ¨
    setTimeout(function() {
        clearInterval(bloodInterval);
        terrorPage.style.display = 'none';
        showPolicePage();
    }, gifDuration);
};

// È°µÈù¢Âä†ËΩΩÂêéËá™Âä®È¢ÑÂä†ËΩΩÔºàÂèØÈÄâÔºâ
window.addEventListener('load', function() {
    // ÂèØ‰ª•Âú®ËøôÈáåÊ∑ªÂä†È°µÈù¢Âä†ËΩΩÂêéÈ¢ÑÂä†ËΩΩÔºå‰ΩÜ‰∏∫‰∫ÜËäÇÁúÅÂ∏¶ÂÆΩÔºåÊàë‰ª¨Âè™Âú®ÂΩïÈü≥Êí≠ÊîæÊó∂È¢ÑÂä†ËΩΩ
    console.log("È°µÈù¢Âä†ËΩΩÂÆåÊàêÔºåGIFÈ¢ÑÂä†ËΩΩÁ≥ªÁªüÂ∞±Áª™");
});

// ==================== ÊèíÂÖ•ÁªìÊùü ====================
        function showRecordingModal() {
            recordingModal.style.display = 'flex';
            recordingTranscript.innerHTML = '';
            
            // ÈÄêÊÆµÊòæÁ§∫ÂΩïÈü≥ÊñáÊú¨
            let segmentIndex = 0;
            
            function typeNextSegment() {
                if (segmentIndex >= recordingSegments.length) {
                    // ÁîµÂ≠êÊâãË°®‰∫∫Â∑•Êô∫ËÉΩËá™Âä®ËΩ¨ÂΩï
                    setTimeout(() => {
                        const continueBtn = document.createElement('div');
                        continueBtn.innerHTML = '<br><br><div style="text-align:center; color:#2aff2a; font-size:20px; cursor:pointer; padding:10px; border:1px solid #ff2a2a;">ÁÇπÂáªÁªßÁª≠</div>';
                        continueBtn.addEventListener('click', () => {
                            recordingModal.style.display = 'none';
                            // ÊòæÁ§∫ÊÅêÊÄñGIFÈ°µÈù¢
                            showTerrorPage();
                        });
                        recordingTranscript.appendChild(continueBtn);
                    }, 1000);
                    return;
                }
                
                const segment = recordingSegments[segmentIndex];
                
                // ÂàõÂª∫ÊÆµËêΩÂÆπÂô®
                const segmentElement = document.createElement('div');
                
                if (segment.type === 'narration') {
                    // ÂèôËø∞ÊÆµËêΩ
                    segmentElement.className = 'narration';
                    segmentElement.textContent = segment.text;
                    recordingTranscript.appendChild(segmentElement);
                    
                    // ÊªöÂä®Âà∞ÊúÄÊñ∞ÂÜÖÂÆπ
                    setTimeout(() => {
                        segmentElement.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                    }, 100);
                    
                    segmentIndex++;
                    setTimeout(typeNextSegment, segment.delay);
                } else if (segment.speaker === 'sound') {
                    // Á∫ØÈü≥Êïà
                    const soundElement = document.createElement('span');
                    soundElement.className = 'sound-effect';
                    soundElement.textContent = segment.soundEffect;
                    recordingTranscript.appendChild(soundElement);
                    
                    // Êí≠ÊîæÊâìÂ≠óÈü≥ÊïàËßÜËßâÂèçÈ¶à
                    playRecordingTypeSound();
                    
                    // ÊªöÂä®Âà∞ÊúÄÊñ∞ÂÜÖÂÆπ
                    setTimeout(() => {
                        soundElement.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                    }, 100);
                    
                    // Âª∂ËøüÂêéÁªßÁª≠
                    segmentIndex++;
                    setTimeout(typeNextSegment, segment.delay);
                } else {
                    // ÂØπËØùÊÆµËêΩ
                    const speaker = speakerNames[segment.speaker];
                    segmentElement.className = `speaker ${speaker.className}`;
                    segmentElement.innerHTML = `<span class="speaker-name">${speaker.name}Ôºö</span><span class="dialogue-text"></span>`;
                    recordingTranscript.appendChild(segmentElement);
                    
                    const textElement = segmentElement.querySelector('.dialogue-text');
                    
                    // Â¶ÇÊûúÊúâÈü≥ÊïàÔºåÂÖàÊòæÁ§∫Èü≥Êïà
                    if (segment.soundEffect) {
                        const soundSpan = document.createElement('span');
                        soundSpan.className = 'sound-effect';
                        soundSpan.textContent = segment.soundEffect;
                        textElement.appendChild(soundSpan);
                        
                        // Êí≠ÊîæÊâìÂ≠óÈü≥ÊïàËßÜËßâÂèçÈ¶à
                        playRecordingTypeSound();
                        
                        // Áü≠ÊöÇÂª∂ËøüÂêéÁªßÁª≠ÊâìÊñáÊú¨
                        setTimeout(() => {
                            typeText(textElement, segment.text, segment.delay, () => {
                                segmentIndex++;
                                typeNextSegment();
                            });
                        }, 300);
                    } else {
                        typeText(textElement, segment.text, segment.delay, () => {
                            segmentIndex++;
                            typeNextSegment();
                        });
                    }
                    
                    // ÊªöÂä®Âà∞ÊúÄÊñ∞ÂÜÖÂÆπ
                    setTimeout(() => {
                        segmentElement.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                    }, 100);
                }
            }
            
            // ÊâìÂ≠óÊñáÊú¨
            function typeText(element, text, baseDelay, onComplete) {
                if (!text) {
                    onComplete();
                    return;
                }

                let charIndex = 0;
                const highlightWords = ['ËÑ∏', 'Â§¥Âèë', '‰∫∫', 'Ê≠ª', 'ÊÄ™Áâ©', 'Êâã', 'Êéâ‰∫Ü', 'Ê≤°Ê≠ª', 'Êé•Âè£', 'Âº†ÊôìËãó', 'ÊûóÊò≠'];
                
                function typeNextChar() {
                    if (charIndex >= text.length) {
                        // ÊÆµËêΩÊâìÂ≠óÂÆåÊàêÔºåÊ∑ªÂä†ÂÖâÊ†áÈó™ÁÉÅÊïàÊûú
                        const cursor = document.createElement('span');
                        cursor.className = 'cursor';
                        element.appendChild(cursor);
                        
                        // Áü≠ÊöÇÊòæÁ§∫ÂÖâÊ†áÂêéÁßªÈô§Âπ∂ÁªßÁª≠
                        setTimeout(() => {
                            cursor.remove();
                            onComplete();
                        }, 500);
                        return;
                    }

                    const char = text[charIndex];
                    const charSpan = document.createElement('span');
                    charSpan.className = 'typed-char';
                    
                    // Ê£ÄÊü•ÊòØÂê¶‰∏∫ÈúÄË¶ÅÈ´ò‰∫ÆÁöÑÂ≠ó
                    let isHighlighted = false;
                    for (const word of highlightWords) {
                        if (text.substring(charIndex, charIndex + word.length) === word) {
                            const wordSpan = document.createElement('span');
                            wordSpan.className = 'highlight';
                            wordSpan.textContent = word;
                            element.appendChild(wordSpan);
                            
                            // Â¶ÇÊûúÊòØ"ÊÄ™Áâ©"„ÄÅ"Ê≠ª"Á≠âËØçÔºåËß¶ÂèëË≠¶ÂëäÊïàÊûú
                            if (['ÊÄ™Áâ©', 'Ê≠ª', 'Êéâ‰∫Ü'].includes(word)) {
                                triggerRecordingWarning();
                            }
                            
                            charIndex += word.length;
                            isHighlighted = true;
                            break;
                        }
                    }
                    
                    if (!isHighlighted) {
                        charSpan.textContent = char;
                        element.appendChild(charSpan);
                        charIndex++;
                    }
                    
                    // Êí≠ÊîæÊâìÂ≠óÈü≥ÊïàËßÜËßâÂèçÈ¶à
                    playRecordingTypeSound();
                    
                    // ËÆ°ÁÆó‰∏ã‰∏Ä‰∏™Â≠óÁ¨¶ÁöÑÂª∂Ëøü
                    let nextDelay =  baseDelay * 0.5;
                    
                    // Ê†áÁÇπÁ¨¶Âè∑È¢ùÂ§ñÂª∂Ëøü
                    if (['Ôºå', '„ÄÇ', 'ÔºÅ', 'Ôºü', 'Ôºõ', '‚Ä¶'].includes(char)) {
                        nextDelay *= 3;
                    }
                    
                    // ÁúÅÁï•Âè∑ÁâπÊÆäÂ§ÑÁêÜ
                    if (char === '‚Ä¶' && text[charIndex - 2] === '‚Ä¶') {
                        nextDelay = 150;
                    }
                    
                    setTimeout(typeNextChar, nextDelay);
                }
                
                typeNextChar();
            }
            
            // ÂºÄÂßãÊí≠ÊîæÂΩïÈü≥
            typeNextSegment();
        }
        
        // ÊòæÁ§∫ÊÅêÊÄñGIFÈ°µÈù¢
        function showTerrorPage() {
            terrorPage.style.display = 'block';
            // ÈáçÁΩÆGIFÁä∂ÊÄÅ
            gifPlayed = false;
            terrorPopup.style.display = 'block';
            gifFullscreen.style.display = 'none';
            terrorGif.style.display = 'none';
            bloodOverlay.style.display = 'none';
            borderFlash.style.display = 'none';
        }
        
        // Êí≠ÊîæÂΩïÈü≥ÊâìÂ≠óÈü≥ÊïàËßÜËßâÂèçÈ¶à
        function playRecordingTypeSound() {
            const dots = recordingSoundIndicator.querySelectorAll('.sound-dot');
            const randomIndex = Math.floor(Math.random() * dots.length);
            
            dots[randomIndex].style.animation = 'none';
            setTimeout(() => {
                dots[randomIndex].style.animation = 'soundPulse 0.5s ease-out';
            }, 10);
        }
        
        // Ëß¶ÂèëÂΩïÈü≥Ë≠¶ÂëäÊïàÊûú
        function triggerRecordingWarning() {
            recordingWarningFlash.style.display = 'block';
            setTimeout(() => {
                recordingWarningFlash.style.display = 'none';
            }, 1000);
        }
        
        // ÂèëÈÄÅÁî®Êà∑Ê∂àÊÅØ
        // ‰øÆÊîπsendUserMessageÂáΩÊï∞‰∏≠ÁöÑÂõûÂ§çÈÉ®ÂàÜ
function sendUserMessage() {
    const rawInput = messageInput.value.trim();
    if (!rawInput || isWaitingForResponse) return;
    
    // È™åËØÅÁî®Êà∑ËæìÂÖ•
    if (!validateUserInput(rawInput)) {
        const errorMessage = {
            sender: "Á≥ªÁªüÊèêÁ§∫",
            content: `ËæìÂÖ•Ê†ºÂºè‰∏çÊ≠£Á°ÆÔºÅ${systemPrompts[currentKeyword].prompt}`,
            type: "system",
            time: ""
        };
        renderMessage(errorMessage);
        messageInput.value = '';
        return;
    }
    
    // Ê†áÂáÜÂåñÁî®Êà∑ËæìÂÖ•
    const message = normalizeUserInput(rawInput);
    
    // Ëé∑ÂèñÂΩìÂâçÊó•ÊúüÁöÑËÅäÂ§©Êï∞ÊçÆÔºåÊâæÂà∞ÂêàÈÄÇÁöÑÊó∂Èó¥
    const currentDate = chatDates[currentDateIndex];
    const currentChats = chatData[currentDate] || [];
    
    // Ëé∑ÂèñÂΩìÂâçËÅäÂ§©‰∏≠ÁöÑÊúÄÂêé‰∏Ä‰∏™Áî®Êà∑Ê∂àÊÅØÊó∂Èó¥
    let replyTime = "";
    if (currentChats.length > 0) {
        // Â¶ÇÊûúÊúâÂéÜÂè≤Ê∂àÊÅØÔºå‰ΩøÁî®ÊúÄÂêé‰∏ÄÊù°ÁöÑÊó∂Èó¥
        const lastMsg = currentChats[currentChats.length - 1];
        replyTime = lastMsg.time;
    } else {
        // Â¶ÇÊûúÊ≤°ÊúâÂéÜÂè≤Ê∂àÊÅØÔºå‰ΩøÁî®ÂΩìÂâçÊó∂Èó¥ÔºàÁÆÄÂåñ‰∏∫Â∞èÊó∂:ÂàÜÈíüÔºâ
        replyTime = new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
    }
    
    // Ê∑ªÂä†Áî®Êà∑Ê∂àÊÅØ
    const userMessage = {
        sender: "404",
        content: message,
        type: "sent",
        time: replyTime // Áî®Êà∑Ê∂àÊÅØ‰ΩøÁî®Ëøô‰∏™Êó∂Èó¥
    };
    
    renderMessage(userMessage);
    messageInput.value = '';
    isWaitingForResponse = true;
    sendButton.disabled = true;
    systemPromptShown = false;
    
    // ÁâπÊÆäÂ§ÑÁêÜÔºö‰∏æÊä•‰ø°
    if (currentKeyword === "‰∏æÊä•‰ø°") {
        setTimeout(() => {
            showReportModal();
            isWaitingForResponse = false;
            sendButton.disabled = false;
        }, 500);
        return;
    }
    
    // Ëé∑ÂèñÊûóÊò≠ÁöÑÂõûÂ§ç
    const responses = linzhaoResponses[message] || linzhaoResponses[currentKeyword];
    
    if (responses) {
        // ÊòæÁ§∫ÊâìÂ≠óÊåáÁ§∫Âô®
        setTimeout(() => {
            showTypingIndicator();
            
            // ÈÄêÊù°ÂèëÈÄÅÂõûÂ§ç
            let responseIndex = 0;
            const sendResponse = () => {
                if (responseIndex < responses.length) {
                    const response = responses[responseIndex];
                    
                    // ÈöêËóèÊâìÂ≠óÊåáÁ§∫Âô®Âπ∂ÊòæÁ§∫Ê∂àÊÅØ
                    setTimeout(() => {
                        hideTypingIndicator();
                        
                        // ÊûóÊò≠ÁöÑÂõûÂ§ç‰ΩøÁî®Áõ∏ÂêåÁöÑÊó∂Èó¥
                        const linzhaoMessage = {
                            sender: "ÊûóÊò≠",
                            content: response,
                            type: "received",
                            time: replyTime // ‰ΩøÁî®ÂíåÁî®Êà∑Ê∂àÊÅØÁõ∏ÂêåÁöÑÊó∂Èó¥
                        };
                        
                        renderMessage(linzhaoMessage);
                        
                        responseIndex++;
                        
                        // Â¶ÇÊûúËøòÊúâÊõ¥Â§öÂõûÂ§çÔºåÁªßÁª≠ÂèëÈÄÅ
                        if (responseIndex < responses.length) {
                            showTypingIndicator();
                            setTimeout(sendResponse, 1000 + Math.random() * 2000);
                        } else {
                            // ÊâÄÊúâÂõûÂ§çÂèëÈÄÅÂÆåÊØï
                            isWaitingForResponse = false;
                            sendButton.disabled = false;
                            
                            // Êõ¥Êñ∞ÂÖ≥ÈîÆËØç
                            if (systemPrompts[currentKeyword] && systemPrompts[currentKeyword].nextKeyword) {
                                currentKeyword = systemPrompts[currentKeyword].nextKeyword;
                            }
                            
                            // ÁâπÊÆäÂ§ÑÁêÜÔºöÂä†ËΩΩÊñ∞Êó•ÊúüÁöÑÊ∂àÊÅØ
                            if (systemPrompts[currentKeyword] && systemPrompts[currentKeyword].dateIndex !== undefined) {
                                const nextDateIndex = systemPrompts[currentKeyword].dateIndex;
                                if (nextDateIndex > currentDateIndex) {
                                    setTimeout(() => {
                                        loadDateMessages(nextDateIndex);
                                    }, 1500);
                                } else {
                                    // ÊòæÁ§∫‰∏ã‰∏Ä‰∏™Á≥ªÁªüÊèêÁ§∫
                                    setTimeout(() => {
                                        showSystemPrompt();
                                    }, 1000);
                                }
                            } else {
                                // ÊòæÁ§∫‰∏ã‰∏Ä‰∏™Á≥ªÁªüÊèêÁ§∫
                                setTimeout(() => {
                                    showSystemPrompt();
                                }, 1000);
                            }
                        }
                    }, 500);
                }
            };
            
            // ÂºÄÂßãÂèëÈÄÅÂõûÂ§ç
            setTimeout(sendResponse, 1000 + Math.random() * 2000);
        }, 500);
    } else {
        // Ê≤°ÊúâÈ¢ÑËÆæÂõûÂ§çÔºåÁõ¥Êé•Êõ¥Êñ∞Áä∂ÊÄÅ
        isWaitingForResponse = false;
        sendButton.disabled = false;
        
        // Êõ¥Êñ∞ÂÖ≥ÈîÆËØç
        if (systemPrompts[currentKeyword] && systemPrompts[currentKeyword].nextKeyword) {
            currentKeyword = systemPrompts[currentKeyword].nextKeyword;
        }
        
        // ÊòæÁ§∫‰∏ã‰∏Ä‰∏™Á≥ªÁªüÊèêÁ§∫
        setTimeout(() => {
            showSystemPrompt();
        }, 1000);
    }
}
        
        // È°µÈù¢Âä†ËΩΩÂÆåÊàêÂêéÂàùÂßãÂåñ
        window.addEventListener('DOMContentLoaded', () => {
            // ÊòæÁ§∫ÈÇÆ‰ª∂ÂºπÁ™ó
            emailModal.style.display = 'flex';
            
            // ÂÖ≥Èó≠ÈÇÆ‰ª∂ÂºπÁ™ó
            closeEmailBtn.addEventListener('click', () => {
                emailModal.style.display = 'none';
                mainContainer.style.display = 'block';
                initializeChat();
            });
            
            // ÂèëÈÄÅÊ∂àÊÅØ‰∫ã‰ª∂
            sendButton.addEventListener('click', sendUserMessage);
            messageInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    sendUserMessage();
                }
            });
            
            // ÁÇπÂáªÂºπÁ™óÂ§ñÈÉ®ÂÖ≥Èó≠
            emailModal.addEventListener('click', (e) => {
                if (e.target === emailModal) {
                    emailModal.style.display = 'none';
                    mainContainer.style.display = 'block';
                    initializeChat();
                }
            });
            
            reportModal.addEventListener('click', (e) => {
                if (e.target === reportModal) {
                    reportModal.style.display = 'none';
                }
            });
        });
    </script>
</body>
</html>